# Maintainer: Joan Rieu <toto_pirate@hotmail.fr>
pkgname=mcpixel
pkgver=1
pkgrel=1
pkgdesc="McPixel is a save-the-day guy that you guide through short challenges in an oldschool point'n'click fashion."
arch=('i686' 'x86_64')
url='http://mcpixel.net/'
license=('custom: "commercial"')
depends=('adobe-air')
source=("${pkgname}.sh")
md5sums=('1645adaec49f0d36715229fd155f6e0a')
_gamepkg='mcpixel-air-v12.zip'
_airsource='McPixel.air'

build() {
  cd "$srcdir"
  msg "You need to buy the full game to install this package."
  if [[ -f ../${_gamepkg} ]]; then
    ln -s ../${_gamepkg} ${_gamepkg}
  fi
  if [[ ! -f ${_gamepkg} ]]; then
    error "The 'AIR file' download '${_gamepkg}' has to be placed in the build directory"
    msg "Waiting for you to do it. Press enter to continue..."
    read
    if [[ ! -f ${_gamepkg} ]]; then
      ln -s ../${_gamepkg} ${_gamepkg}
    fi
    if [[ ! -f ${_gamepkg} ]]; then
      error "'${_gamepkg}' not found!"
      return 1
    fi
  fi
  unzip "${_gamepkg}"
}

package() {
  cd "$srcdir"
  install -Dm644 "${_airsource}" "$pkgdir/opt/${_airsource}"
  install -Dm755 "${pkgname}.sh" "$pkgdir/usr/bin/${pkgname}"
}

# vim:set ts=2 sw=2 et:
