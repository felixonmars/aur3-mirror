# Maintainer: Jekyll Wu <adaptee [at] gmail [dot] com>

pkgname=nmapsi4
pkgver=0.3.1
pkgrel=2
pkgdesc="Qt-based GUI for nmap."
arch=('i686' 'x86_64')
url="http://www.nmapsi4.org/"
license=('GPL2')
depends=('qt' 'nmap')
makedepends=('cmake')
source=(http://nmapsi4.googlecode.com/files/${pkgname}-${pkgver}.tar.bz2
        nmapsi-0.3.1-gcc-4.7.patch)

build() {
    cd "${srcdir}/${pkgname}-${pkgver}"
    patch -p0 -i ../nmapsi-0.3.1-gcc-4.7.patch

    if [ -d build ] ; then
        rm build/* -rf
    else
        mkdir build
    fi

    cd build

    cmake -DCMAKE_INSTALL_PREFIX=/usr ../
    make
}

package() {
    cd "${srcdir}/${pkgname}-${pkgver}/build"
    make DESTDIR=${pkgdir} install

    # Change permissions to enable the excutables
    chmod 755 ${pkgdir}/usr/bin/*
}
md5sums=('2be404095cb4dc0230ac609c3757e6a6')
md5sums=('e843b46ccf84e4d18131d615c49e93c5')
md5sums=('e843b46ccf84e4d18131d615c49e93c5'
         '2d4a6d31463c2ffe08c4c954128a1c5b')
