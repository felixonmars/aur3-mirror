#Contributor: Yannick LM yannicklm1337 at gmail dot com
#Maintainer: Yannick LM yannicklm1337 at gmail dot com

pkgname=pyjamas
pkgver=0.7
pkgrel=2
pkgdesc='Widget API for Web applications, in Python'
arch=('any')
url='http://pyjs.org'
license=('APACHE')
depends=('python2')
makedepends=('python2' 'python2-distribute')

source=(http://sourceforge.net/projects/$pkgname/files/$pkgname/$pkgver/$pkgname-$pkgver.tgz/download)
md5sums=('8441b60bb3c88051799537852cceefd0')


build() {
  # Conforming to $srcdir/INSTALL.txt
  cd $srcdir/$pkgname-$pkgver
  python2 bootstrap.py /usr/share/pyshared /usr/share/pyjamas .
  python2 run_bootstrap_first_then_setup.py build
  python2 run_bootstrap_first_then_setup.py install --root=$pkgdir || return 1

  msg "patching examples"
  sed -i -e's/..\/..\/bin\///' $pkgdir/usr/share/pyjamas/examples/*/build.sh || return 1

  msg "installing pjsbuild"
  mkdir -p $pkgdir/usr/bin
  install -m 755 bin/pyjsbuild $pkgdir/usr/bin/ || return 1
  mkdir -p $pkgdir/usr/share/man/man1
  install -m 644 pyjs/src/pyjs/pyjsbuild.1 $pkgdir/usr/share/man/man1 || return 1
}

