# Maintainer: Mikael Eriksson <mikael_eriksson@miffe.org>

pkgname=flare-rpg
pkgver=014
pkgrel=1
pkgdesc="open source action roleplaying game"
arch=('i686' 'x86_64')
url="http://clintbellanger.net/rpg/"
license=('GPL')
depends=('sdl' 'sdl_image' 'sdl_mixer')
replaces=('osare')
source=(https://github.com/downloads/clintbellanger/flare/flare_src_v${pkgver}.zip)
md5sums=('2725a77354c38fff191af61e449ffb9a')

build() {
  cd $srcdir/flare_src_v$pkgver/src

  g++ *.cpp -o flare.bin -I/usr/include/SDL -lSDL -lSDL_image -lSDL_mixer
  install -Dm755 flare.bin $pkgdir/usr/bin/flare.bin

  install -d -m755 $pkgdir/usr/share/flare
  for dir in animations build enemies engine fonts images items maps music npcs powers quests soundfx tilesetdefs; do
    cp -r $srcdir/flare_src_v$pkgver/$dir $pkgdir/usr/share/flare
  done
  chmod -R a-x+X $pkgdir/usr/share/flare
  find $pkgdir/usr/share/flare -name .DS_Store -exec rm -rf {} \;

cat > $pkgdir/usr/bin/flare << EOF
#!/bin/sh
cd /usr/share/flare
exec flare.bin
EOF
  chmod 755 $pkgdir/usr/bin/flare
}

# vim:set ts=2 sw=2 et:
