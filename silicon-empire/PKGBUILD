# $Id$
# Maintainer: Hugo Osvaldo Barrera <hugo@osvaldobarrera.com.ar>

pkgname=silicon-empire
pkgver=1.7.3
pkgrel=1
pkgdesc="Set of tools to manage and organize your optical discs like CDs, DVDs and Blu-rays."
arch=('i686' 'x86_64')
url="http://getsilicon.org/"
license=('GPL3')
depends=('fuseiso' 'phonon' 'taglib')
conflicts=('silicon-empire-git')
source=(http://getsilicon.org/download/silicon_${pkgver}_src.tar.gz)
md5sums=('3608f1ef5698c286caa4184ba0089cfe')

build() {
  #cd $srcdir/silicon_${pkgver}_src
  cd Silicon

  sed -i '48d' Makefile

  # Fix Makefile(qmake-qt4 -> qmake)
  # sed -i 's/qmake-qt4/qmake/' Makefile

  make
  
  cd build-linux
  install -Dm755 bin/silicon $pkgdir/usr/bin/silicon 
  cp -R lib/ share/ $pkgdir/usr

  # Desktop icon
  cd $srcdir/Silicon/src/Files
  install -Dm644 silicon.desktop $pkgdir/usr/share/applications/silicon.desktop
  install -Dm644 icons/silicon_22.png $pkgdir/usr/share/icons/hicolor/22x22/apps/silicon.png
  install -Dm644 icons/silicon_32.png $pkgdir/usr/share/icons/hicolor/32x32/apps/silicon.png
  install -Dm644 icons/silicon_48.png $pkgdir/usr/share/icons/hicolor/48x48/apps/silicon.png
  install -Dm644 icons/silicon_64.png $pkgdir/usr/share/icons/hicolor/64x64/apps/silicon.png
  install -Dm644 icons/silicon_128.png $pkgdir/usr/share/icons/hicolor/128x128/apps/silicon.png
}
