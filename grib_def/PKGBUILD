# Contributor: Anton Bazhenov <anton.bazhenov at gmail>

pkgname=grib_def
pkgver=1.9.9
pkgrel=2
pkgdesc="Definition files for GRIB API"
arch=('any')
url="http://www.ecmwf.int/products/data/software/grib_api.html"
license=('LGPL3' 'GPL3')
depends=('grib_api')
source=(${url/g*/}/download/software_files/grib_api-$pkgver.tar.gz)
md5sums=('fe6c684e4a41477f3a6e97ab8892f35d')

build() {
  cd "$srcdir"/grib_api-$pkgver
  sed -i configure -e 's|share/samples|share/grib_api/samples|'
  ./configure F77="gfortran" FC="gfortran" CPPFLAGS="$CPPFLAGS -fPIC" \
      --prefix=/usr --enable-python --with-png-support \
      --with-netcdf=/usr --datadir=/usr/share/grib_api \
      --datarootdir=/usr/share/grib_api/definitions || return 1
  cd definitions && make DESTDIR="$pkgdir" install || return 1
}
