Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jun 15 16:33:22 2014 -0400

    Updating these for the 1.6 release.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jun 10 21:08:02 2014 -0400

    Always default the username to the local username, even when not
    doing SASL.  Fix suggested by Michael Urban.
    
    (cherry picked from commit 164fc755c40aeb37efe1b330fd0c01b7fa9ce72c)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jun 10 19:06:54 2014 -0400

    Use variable-size (but in one case, fixed but larger) buffers for the SASL
    exchange to deal with larger SASL messages (specifically, when doing GSSAPI
    with certain ticket extensions).
    
    (cherry picked from commit af2971700a5d9fbc9f68c4afca5ba6567e800260)

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Mon Jun 9 23:21:35 2014 -0400

    mh-profile.man: rewrite the Profile Lookup section for clarity
    
    thanks to Ralph Corderoy for the text.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jun 9 11:36:05 2014 -0400

    Fix curl example for nmh-access-url entry.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jun 7 23:20:24 2014 -0400

    Updating for 1.6-RC3.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jun 7 23:14:12 2014 -0400

    Return an appropriate error if the input characters are 8-bit, but the
    locale character set is US-ASCII.
    
    (cherry picked from commit c3bb80a82ee1c5f74fbd38e870af591227ac2de3)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jun 7 22:40:12 2014 -0400

    Whoops, this should be LC_CTYPE.  Fixing that exposes the lack of an
    appropriate environment variable in test-utf8-body

Author: David Levine <levinedl@acm.org>
Date:   Thu May 29 21:02:49 2014 -0500

    Split assignment and export of shell variable.
    
    (cherry picked from commit bdd375821d1acbdb86028188106d948ac415afac)

Author: David Levine <levinedl@acm.org>
Date:   Fri May 23 17:07:39 2014 -0500

    Fixed test-mkstemp to work with valgrind.
    
    (cherry picked from commit f8d3c4d16b4a2cf0034dc1159c0c68dc78fd0921)

Author: David Levine <levinedl@acm.org>
Date:   Thu May 22 20:39:45 2014 -0500

    Fixed to commit 378589b17424bd78acbfc57d505383ffb8c256cb:
    when a -file switch will be used, insert -[no]concat before
    the filename (and therefore, the -file switch itself).
    
    (cherry picked from commit df77ac6ade9b551076b33f2addafbb7ae7f06bd3)

Author: David Levine <levinedl@acm.org>
Date:   Wed May 21 22:11:42 2014 -0500

    Don't pass -[no]concat from show(1) to mhl(1).
    
    (cherry picked from commit 378589b17424bd78acbfc57d505383ffb8c256cb)

Author: David Levine <levinedl@acm.org>
Date:   Wed May 21 20:50:22 2014 -0500

    On platforms with no MIMETYPEPROC, declare the content to be
    binary if it contains any NUL characters.
    
    (cherry picked from commit 472ab3b05f3dca9ea0904b39e705b92e74853f19)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon May 19 13:37:26 2014 -0400

    Explain how to get a literal % in format files.
    
    (cherry picked from commit d8113caa79d83b9f7273bde24f6462c59a5b33c2)

Author: David Levine <levinedl@acm.org>
Date:   Sun May 18 21:55:13 2014 -0500

    Documented steps to build RPM from tarball, without using autogen.sh.
    
    (cherry picked from commit 4561e8d03b270487149eae737b55953571a827b7)

Author: David Levine <levinedl@acm.org>
Date:   Sun May 18 21:43:20 2014 -0500

    Added autogen.sh to EXTRA_DIST.
    
    (cherry picked from commit 77f9d39a364f011271ed558e7fcb7008dbc65548)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri May 16 13:02:43 2014 -0400

    Handle unknown message types in the generic content handler rather
    than in the RFC822 handler; this will cause them to be displayed using
    an output marker rather than throw an error.
    
    (cherry picked from commit 2ca027a15f209e2a73b8c7da9115167f2dc8f8a2)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri May 16 12:14:21 2014 -0400

    Output a newline if the last character in a text/plain part is
    not a newline (but only for mhshow).
    
    (cherry picked from commit b67c1d7c42331f0abd85439caa3d5b9a09e7a999)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri May 16 00:11:59 2014 -0400

    Fix 15 year-old bug; the wrong number of arguments in in the prototype
    for show_content_aux() in mhstoresbr.c.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu May 15 23:01:49 2014 -0400

    Switch from %p to %l (%p is no longer supported, although we silently
    accept it).
    
    (cherry picked from commit f5804888e40c2d4b679bdb38e7cba92b527271d4)

Author: David Levine <levinedl@acm.org>
Date:   Tue May 13 07:02:11 2014 -0500

    Added --dereference option, if supported, to file(1) command
    in NMH_MIMETYPEPROC and NMH_MIMEENCODINGPROC macros.
    
    (cherry picked from commit 46b10837480b71900a9d3d10913f4b293f800554)

Author: David Levine <levinedl@acm.org>
Date:   Fri May 9 18:58:11 2014 -0500

    Fix to commit b828fcb1695393007a75c41d32b2173c296be9d7:  a couple
    of commas were missing from the added line.
    
    (cherry picked from commit 576b0d082f23121748fa89f22ca61ab7b8edb60a)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu May 8 12:37:50 2014 -0400

    Treat unknown top-level content types as "application" types, instead
    of generating an "unknown content type 0" error.
    
    (cherry picked from commit dc1779f8425d8aec95718d59bc9d217e40ec0914)

Author: David Levine <levinedl@acm.org>
Date:   Sun May 4 22:30:45 2014 -0500

    Removed obsolete comment.
    
    (cherry picked from commit 1f21da770395e0df90f29a5fe81fa428ab444c21)

Author: David Levine <levinedl@acm.org>
Date:   Sun May 4 21:51:52 2014 -0500

    Replaced use of norm_charmap() in mhshow and mhfixmsg with
    case-insensitive string comparison against the charset name.
    norm_charmap() is intended for use with result of nl_langinfo(),
    and didn't add much value here.
    
    (cherry picked from commit acb338b38e3004891a4f2967df2fae7c65ca001b)

Author: David Levine <levinedl@acm.org>
Date:   Sun May 4 09:03:33 2014 -0500

    In mhshow, copy result of call to norm_charmap() and get_charset()
    because they return a static buffer.  Thanks to Alexander Zangerl
    for tracking this down, when using an ISO-8859-1 locale.
    
    (cherry picked from commit ea855e72d026c72658d43f993fc62cfcf2de2ca3)

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sat Apr 26 10:45:47 2014 -0400

    mhshow: suppress error for undisplayable parts, if they're not wanted
    
    consider this message:
    
       1       multipart/mixed          1113K
         1     multipart/alternative      292
         1.1   text/html                   66
         1.2   text/plain                  49
         2     image/jpeg                823K
    
    if this is displayed using "mshow -part 2", in the presence of an
    MHSHOW variable which _only_ describes a rule for displaying images,
    then we don't want to get an error about how nothing in part 1 was
    displayable.
    (cherry picked from commit c97947332ca87805ea0bc8ce81027c1aa23fdf0e)

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Apr 22 12:23:01 2014 -0400

    man pages: clarify how profiles entries are searched

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 21 23:00:47 2014 -0400

    Fix minor typo in NEWS file.  Pointed out by Norman Shapiro.
    
    (cherry picked from commit 2035f08b18bdc1f1de54e248851a2b57c383e9f2)

Author: David Levine <levinedl@acm.org>
Date:   Mon Apr 21 19:00:45 2014 -0500

    Added yet another NDBM (gdbm, actually) header/lib pair, for Ralph's
    platform.
    
    (cherry picked from commit b828fcb1695393007a75c41d32b2173c296be9d7)

Author: David Levine <levinedl@acm.org>
Date:   Mon Apr 21 13:00:00 2014 -0500

    Added mhfixmsg to nmh man page.
    
    (cherry picked from commit 0ca80aec5c708a8964dcd9d74fb13894d3df97fe)

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sun Apr 20 19:01:48 2014 -0400

    mhshow.man: fix an incorrect 'mhn' reference

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 20 18:28:21 2014 -0400

    Documentation improvements, from Ralph Corderoy.
    
    (cherry picked from commit 76ab1c54655ccaafc68659f848c50a77df9a2201)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 20 18:08:47 2014 -0400

    Move clsfolds() before the call to context_save(); that is required
    when using private sequences, since seq_save() only moves the sequence
    information into the context structure; a subsequent call to context_save()
    is required to actually write out the context file.
    
    (cherry picked from commit 8fefbe7a5313019b93f1972bf9aeabe814d767e4)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 20 00:02:26 2014 -0400

    Sigh.  Of course I find another bug after I release RC2.  Make sure to
    initialize the enclosing CT structure when creating a message/external-body
    part.
    
    (cherry picked from commit 9d45b5ba0226609b41d6ae47b19d195db3239c74)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Apr 19 09:47:05 2014 -0400

    Update for the new (RC2) release candidate.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 18 08:43:37 2014 -0400

    Fix the same problem in scan that was fixed in commit
    9eb9b47593181a3bf987eeaa0398ab5330ec12f8, but fix it for Maildir
    support.  Patch from Eric Gillespie.
    
    (cherry picked from commit 2b416e6c5c3490b510cfe790abb1bb6adae5c4f3)

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 17 19:55:19 2014 -0500

    Unset MAILDROP in test/common.sh so that it doesn't confuse
    test/inc/test-msgchk.
    
    (cherry picked from commit af70448d4b35f6e590aaff8ef13246c58c9a336d)

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Mon Apr 14 12:29:39 2014 -0400

    replyfilter: flesh out the configuration instructions

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Apr 15 21:39:38 2014 -0400

    docs/contrib/ml: add a runtime check for known bash-ism
    
    i'm leaving the #! line as /bin/bash, because that's how i wrote
    and tested.  but with this change i think the script will still
    function correctly on a wide variety of shells.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 15 21:57:30 2014 -0500

    Fixed popsbr.c to look like its nmh 1.5 version, except it now
    uses nmh_get_credentials() instead of ruserpass() directly.  Also,
    added checks of return values of nmh_get_credentials() to smtp.c.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 15 21:10:41 2014 -0500

    Consistently refer to $HOME/.mh_profile and mh-profile(5) in
    the man pages.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 15 20:58:32 2014 -0500

    Reworked retrieval of username and password with SMTP and sasl so
    that if getusername() and no password are accepted by the mechanism,
    then the user need not provide them.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 14 21:32:41 2014 -0400

    It turns out that due to the changes to m_getfld() to support file
    position tracking, this broke the scan output from inc(1) when POPing
    more than one message at a time.  Since a new filehandle was being
    passed to each call to scan(), it made the most sense to simply
    discard the m_getfld() state for each call to scan() when doing POP.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 14 12:00:38 2014 -0400

    Update for new release candidate.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 14 11:58:54 2014 -0400

    Updating release notes for new release.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 23:09:54 2014 -0400

    Update these a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 23:07:45 2014 -0400

    Add README-iCalendar to the distribution.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 23:02:57 2014 -0400

    Update developer documentation to match reality.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 22:37:53 2014 -0400

    If attaching a "message" content type, scan the content to see if it
    has 8bit characters and set the CTE on the enclosing MIME headers
    appropriately.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 22:36:34 2014 -0400

    Create a default CTE so routines in mhparse.c are happy.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 22:17:23 2014 -0400

    Make sure the draft filename ends up in the MIME structure, so error
    messages have the proper name in them.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sun Apr 13 16:18:07 2014 -0400

    add rmf(1) and folder(1) to one another's SEE ALSO sections

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 13 15:13:21 2014 -0500

    If mhfixmsg's call to convert_charset() fails, output why.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 13 13:11:00 2014 -0400

    If c_termproc is set, include a default display command so the charset
    conversion pipeline will work correctly.

Author: David Levine <levinedl@acm.org>
Date:   Fri Apr 11 17:20:02 2014 -0500

    Fixed showproc for RFC 822 messages.  Thanks to Mikhail for
    pointing this out.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Fri Apr 11 15:55:54 2014 -0400

    mhshow: properly report the name of a failing display program
    
    otherwise it's not clear what didn't work.

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 10 21:21:28 2014 -0500

    If -[no]concat is given to show(1), have it use showmimeproc instead
    of showproc and pass those switches along.  This way, show won't pass
    them to mhl, which doesn't accept them.

Merge: 4c82793 236a2b6
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 18:49:18 2014 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 18:47:43 2014 -0700

    Add a note about devel/autotools as a pre-req for building on FreeBSD.
    
    Be a bit more specific about the versions of some OSes we build
    in the buildbot cluster.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 10 21:45:14 2014 -0400

    Use a dynamically-allocated buffer for character set conversion, and
    resize it if we get E2BIG.  Also create a test that exercises this
    particular problem.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 10 18:58:39 2014 -0400

    Don't clobber "cp"; use dp instead.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 10 14:09:18 2014 -0400

    Fix bug in error message when reporting character set conversion failure.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 10 12:29:28 2014 -0400

    A bad cut-and-paste job made -noinlineonly not work.  Patch from
    M. Levinson.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 10 12:28:01 2014 -0400

    Fix test for inlineonly.

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 10 07:52:41 2014 -0500

    Added -dump to w3m and elinks invocations in mhn.defaults.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 04:10:34 2014 -0700

    When lkfopendata() fails, seqfile is being freed too soon.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 04:00:18 2014 -0700

    I missed one spot in getln() where the new quoting flag needs to be cleared.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 03:52:17 2014 -0700

    If getln() sees a newline as its first character, it incorrectly
    references a character one byte before the start of its input
    buffer.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 03:07:16 2014 -0700

    Clang's static analyzer reports a potential NULL pointer deref.
    This is a "shouldn't happen" case, so I have added an assert
    to quell the warning, and catch the failure in the off chance
    we do get here with last == NULL.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Apr 10 02:43:36 2014 -0700

    Remove dead initialization of fp in main().

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 9 22:04:58 2014 -0500

    Added -dump (and -child) to lynx invocation when it's used in
    mhshow-show-text/html.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 21:05:07 2014 -0400

    Formatting fix, from Mikhail <mp39590@gmail.com>.

Merge: 6e94720 d6e398f
Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 9 19:19:26 2014 -0500

    Merge remote-tracking branch 'origin/fix-locking'

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 9 16:32:56 2014 -0500

    The size reported by mhshow test-charset is different with and
    without iconv, so determine it at runtime.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 9 16:31:06 2014 -0500

    Use *ct->c_ceclosefnx() instead of clsoe_encoding() in show_content_aux().

Merge: 1f29440 e6ddebc
Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 16:25:08 2014 -0400

    Merge branch 'mhshow-fixup'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 16:24:34 2014 -0400

    Document and distribute mhshow.marker

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 16:16:18 2014 -0400

    Document the changes made to mhshow.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 14:53:00 2014 -0400

    Change from "concat" to "concatsw" so we don't conflict with the
    function concat().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 13:30:42 2014 -0400

    Add new flags for -concat/-noconcat, -inlineonly/-noinlineonly, and
    -textonly/-notextonly;

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 13:15:28 2014 -0400

    Change things so we only supply a form filename; most programs don't do
    both, and this isn't work the extra hassle.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 9 11:29:32 2014 -0400

    Now only display text and inline content by default.
    Use mh-format(5) to display marker text for skipped content.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 8 21:34:20 2014 -0500

    lkopen_dot() would block forever if another process held a lock
    forever.  Changed it to only retry for 60 seconds, like the other
    lkopen's.  And have it indicate that it failed to acquire the lock.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 6 13:55:27 2014 -0500

    Instead of relying on errno to determine if locking failed, pass
    back explicit indication in int * argument to lk(f)opendata() and
    lkopenspool().

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 6 11:12:14 2014 -0500

    Don't ignore return value of lkfopendata(), most notably of
    seq_read() in folder_read().  Increased LOCK_RETRIES from 5 to 60.

Author: David Levine <levinedl@acm.org>
Date:   Fri Apr 4 20:05:51 2014 -0500

    Update context and sequences before showing messages in mhn(1),
    just like in mhshow(1).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 3 18:12:56 2014 -0400

    Moving closer to fixing mhshow completely.  Includes fix from David Levine
    for a slight bug in charset conversion.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 25 22:41:13 2014 -0400

    Start of changes for mhshow; compiles, but does nothing (yet).

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 23 08:43:56 2014 -0500

    mhn.defaults.sh really doesn't need to look in /usr/demo/SOUND
    for helper programs any more.  If the user has it in their PATH,
    it will anyway.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 23 08:30:37 2014 -0500

    Added mhshow-show-application/pdf detection to mhn.defaults.sh.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 23 08:00:12 2014 -0500

    Note that order is preserved for messages that have the same date,
    when sorting on dates.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 21 18:53:26 2014 -0400

    Move pidcheck() into mhshowsbr.c (the only consumer of it) and make
    it static.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 21 14:22:58 2014 -0400

    Remove support for -pause/-nopause switches to mhshow(1).  This and
    commit 4c436246f048635446353dadaa68174445c58160 are based on work
    originally done by Markus Schnalke.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 21 12:56:37 2014 -0400

    Remove support for parallel content display.  This means we can finally drive
    a stake in the heart of the horrible xpid global!

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 20 09:40:01 2014 -0500

    Fixed quoting of charset value in mhn.defaults.sh.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 16 15:03:37 2014 -0500

    Renamed mkstemp(1) man page to mh-mkstemp(1), so it doesn't obscure
    any existing mkstemp(3) page.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Mar 16 12:19:54 2014 -0700

    Update the manpage style guide to be consistent about setting program names in
    boldface always.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 16 10:40:27 2014 -0500

    Fixed formatting of program name in mh-mime(7) man page.  Removed
    CONTEXT section from mkstemp(1) man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 16 10:15:41 2014 -0500

    Moved "mhparam iconv" description to mhparam(1) man page and put
    references to it in mh-mime(7), mhfixmsg(1), and mhshow(1) man pages.
    Updated mhparam man page description of other configuration
    parameters.  Added "Message Rewrite" section to mh-mime page.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 14 20:25:06 2014 -0500

    Fixed some of the issues noted by clang --analyze with
    mhfixmsg.c and mkstemp.c.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 14 20:22:07 2014 -0500

    Fixed fixup of sbr/dtimep.c with flex 2.5.36.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 14 19:56:38 2014 -0500

    Modified probe to output sbr/dtimep.c.  The flex version is 2.5.36.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 14 19:16:23 2014 -0500

    Added probe to configure.ac to output flex version (for fed18arm7 build).

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 14 19:04:45 2014 -0500

    Compare character with EOF using signed comparison because
    EOF can be (and is likely) negative.  This showed up on
    arm7, which apparently uses unsigned char for char.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 14 15:22:12 2014 -0400

    Sigh.  Make localmbox work even if we're not using -debug.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 14 15:21:49 2014 -0400

    Whoops, missed a warning groff found.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 14 14:59:39 2014 -0400

    Fix some typos and make some style changes suggested by Ralph Corderoy

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 14 12:31:23 2014 -0400

    Add support for printing iconv and localmbox.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 13 15:53:05 2014 -0400

    Update for mh-mime.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 13 15:51:32 2014 -0400

    Create new mh-mime man page, with overview of how MIME handling works in nmh.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 13 15:11:22 2014 -0400

    Update and fix some formatting issues.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 10 20:26:51 2014 -0500

    Fixed test-mkstemp to work on platforms that don't have mkstemps(3),
    such as CentOS 5.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 10 20:24:46 2014 -0500

    Check for text/html display programs in this order:  w3m, lynx, elinks.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 7 12:04:46 2014 -0500

    Fix minor typo.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Mar 7 09:05:17 2014 -0800

    Import Dave Crocker's brief history of email development at Rand.
    (Added with his permission.)

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 20:32:14 2014 -0600

    Fixed test/getcwidth.c to build without MULTIBYTE_SUPPORT.
    Found by cppcheck.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 20:15:45 2014 -0600

    Fixed a few very minor issues that cppcheck noticed.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 19:46:30 2014 -0600

    Removed declaration of unused sm_reply from post.c.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 19:45:37 2014 -0600

    Made a couple of globals static in smtp.c.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 19:43:47 2014 -0600

    Changed unused symbol that gen-ctype-checked creates with NDEBUG
    from a data object to a function, to remove a global from libmh.a.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 19:39:10 2014 -0600

    Added remedy for compile warnings when built with --with-tls on
    Mac OS 10.7 or later.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 6 19:35:22 2014 -0600

    Remove backup file at end of test-ext-params, and a temp file.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 6 15:45:19 2014 -0500

    Put in check so "attach" is rejected when the draft already has MIME headers.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 6 15:31:01 2014 -0500

    Update test to match reality

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 6 15:25:55 2014 -0500

    Update documentation to match reality.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 6 14:59:35 2014 -0500

    Prevent crash if editfile() is called and both "*ed" and editsave
    are NULL.  This can happen if you call "mime" and then run "edit" without
    any arguments, if you're running whatnow standalone.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 6 14:34:34 2014 -0500

    Remove unneeded assignment.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 23:31:31 2014 -0500

    Fix up some warnings and problems when iconv doesn't exist.

Merge: 7b9cb49 5c3a50d
Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 23:17:17 2014 -0500

    Merge branch 'extended-params'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 21:27:25 2014 -0500

    Update pending-release-notes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 21:26:02 2014 -0500

    More tests for extended-parameter parsing.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 18:22:56 2014 -0500

    Add extra argument to add_param() so it can use the passed-in pointers
    directly without making copies first.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 15:43:33 2014 -0500

    A more complicated RFC 2231 parsing example.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 15:42:59 2014 -0500

    Whoops, a little TOO hasty on the last bugfix; put back an assignment.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 15:11:54 2014 -0500

    Switch over to using the token parser instead of isspace(), and
    make sure we have our pointer correct when doing an encoded parameter
    that isn't the first one.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 14:36:43 2014 -0500

    Move language tag parser into the block so it only gets
    invoked on index 0.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 14:04:47 2014 -0500

    Change disposition output slightly.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 13:48:45 2014 -0500

    Update information to mention RFC 2231.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 13:40:13 2014 -0500

    Add message/external-body test.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 5 13:03:30 2014 -0500

    Update mhlist and other relevant utilities to output disposition information
    with a new -disposition switch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 23:44:09 2014 -0500

    Some tests for RFC 2231 decoding; seems like it works, but need to stress
    it some more.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 23:43:26 2014 -0500

    Fix up some error reporting, and reassemble partial parameters correctly.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 22:49:13 2014 -0500

    Fix up a few pointer mishaps; this should now get everything right!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 22:37:10 2014 -0500

    Whoops, forgot to set the name element of the partial parameter structure.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 19:53:23 2014 -0500

    A few minor fixups; the parser now passes the test suite!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 4 13:45:19 2014 -0500

    Fixes for the MIME parser; kinda works for regular parameters, but
    still needs some fixes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 3 21:52:35 2014 -0500

    More work on extended parameter parser.  Does not compile yet.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 3 07:14:09 2014 -0800

    In test/common.sh.in trap, cd to $MH_TEST_DIR before trying
    to remove its Mail subdirectory.  rm on Solaris won't remove
    it if it's in the path of the current working directory.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 3 00:43:46 2014 -0500

    Make parse_header_attrs() a private function (there are no longer any
    public consumers of it).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 3 00:42:56 2014 -0500

    Convert unqp() to decode_qp(), and make it a public function.  Also,
    handle the case where decode_qp() is passed a character outside of
    the normal ASCII range.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 2 22:38:57 2014 -0600

    Added mkstemp(1), wrapper around mkstemp(3)/mkstemps(3), to
    auxexec, for use by mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 2 20:29:20 2014 -0600

    Added convenience function die() to mhmail.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 2 21:04:55 2014 -0500

    Switch over get_ctinfo() to determine the filename based on the filename if
    one was not provided.  Remove some unneeded functions as part of this work.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 2 12:00:13 2014 -0600

    Added recommendation to use nmh-storage profile setting or
    non-default -clobber with mhstore -always.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 2 10:09:18 2014 -0600

    Added check of -noverbose to test-mhstore.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 2 09:30:01 2014 -0600

    Added commented explaining use of ci_attrs[0] in
    build_multipart_alt() of mhfixmsg.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 2 00:07:10 2014 -0500

    Whoops, forgot to TEST THIS OUT first.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 2 00:06:13 2014 -0500

    For some reason viamail listed mhoutsbr as a dependency.  It turned out it
    wasn't required, so we removed it so we don't have to pull in a complete MIME
    parser into viamail.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 1 23:51:19 2014 -0500

    More cleaned and conversion to the new parameter API.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 1 23:24:47 2014 -0500

    Add a new get_param_value(); redo iconv() parameter conversion code.
    Start having code use get_param() and get_param_value() rather than
    walking the whole parameter linked list.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 1 13:55:24 2014 -0600

    Removed recommendation from mhstore man page that users not put
    -auto in their profile.  Added recommendation that users not use
    the %a escape string.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 1 13:30:50 2014 -0600

    Added description of switches.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 1 12:00:18 2014 -0600

    mhstore(1) now obeys its -noverbose switch.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 1 08:32:20 2014 -0600

    Fix to commit a2806483a53fcdb62ca8e2bec4f4e023355f4470
    to properly handle quoting when text follows quoted
    text in a mhshow display string.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 1 08:30:27 2014 -0600

    Moved discussion when no messages are matched from BUGS section
    to new subsection under DESCRIPTION, per Ralph's suggestion.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 28 22:59:09 2014 -0600

    Removed a couple of unnecessary vector typedefs from h/mh.h.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 28 22:05:37 2014 -0600

    Updated MACHINES and SPECS/nmh.spec to reflect packages
    available for CentOS Linux.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 27 21:43:18 2014 -0500

    Fix iconv return value test warning.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 27 21:38:09 2014 -0500

    Support complete encoding for encoding Content-Type parameters.  Start
    work on retrieving parameters and converting them to the correct charset.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 27 11:50:33 2014 -0500

    Use RFC 2047 encoding for Content-Description, and make sure to encode
    MIME parameters correctly when building the Content-Disposition header.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 26 22:58:26 2014 -0500

    Re-do length calculation for parameter output, and adapt test for new code.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 26 21:48:29 2014 -0600

    Fixed quoting of filename, expanded C-T parameter values, etc.,
    in mhshow.  Removed the workarounds that had built up when it
    was broken.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 26 21:13:30 2014 -0500

    Closer, but not quite right yet.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 26 19:58:43 2014 -0600

    Updated mhparam, man pages, and test-mhparam to reflect split
    of locking methods into datalocking and spoollocking.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 21:31:18 2014 -0500

    Add test for long + encoded line; does not pass right now.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 21:30:52 2014 -0500

    Make sure we include space in the list of characters we need to encode in
    a parameter line.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 21:28:45 2014 -0500

    Remove unused variable, and make sure we free c_dispo_type.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 21:15:51 2014 -0500

    A new test for longer lines.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 21:14:51 2014 -0500

    Calculate "characters to use in for current line" based on starting a new
    line, rather than the number of characters in the previous line.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 25 15:23:56 2014 -0500

    First basic test of extended parameter output: working!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 24 21:34:12 2014 -0500

    Beginnings of test suite for RFC 2231 support; does not work yet.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 24 20:18:17 2014 -0600

    Fixed m_getfld() to not return EOF indicator, so that files need
    not end with a newline.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 24 13:39:19 2014 -0500

    Make sure we don't modify the original text when processing the disposition
    header.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 23 18:52:52 2014 -0600

    Added mh-folders to nmh(7) man page.  Split out Formats section of
    nmh man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 23 21:29:52 2014 -0500

    Fix up error reporting for the hook code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 22 00:07:55 2014 -0500

    It compiles now!  And actually sort of works, but still a LOT more
    that needs to be done before it is complete.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 21 14:49:07 2014 -0500

    Getting closer to getting something working.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 20 14:55:01 2014 -0500

    More work on handling encoded params; still does not compile.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 19 22:01:45 2014 -0600

    Cast argument to isspace() to unsigned char instead of int.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 19 21:55:19 2014 -0600

    Fix to commit ed3214f1518b36c8b96a1a17be4af0a708ea25e3
    to not try to quote filenames in multipart parts.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 19 21:36:16 2014 -0600

    Generalized %{charset} display string escape to any Content-Type
    parameter.  Also, always quote the expanded value, whether or not
    the escape was quoted in the profile.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 19 20:09:28 2014 -0600

    Added reason to mhfixmsg's printout when it fails to decode binary
    content.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 19 18:57:29 2014 -0600

    Refined commit ed3214f1518b36c8b96a1a17be4af0a708ea25e3 to only
    accept single quotes wrapping %f and %F display escapes.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 18 21:26:52 2014 -0600

    Migrated show_content_aux2() to argsplit().

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 18 21:16:06 2014 -0600

    Removed redundant quoting of %f and %F in display strings.  Now,
    the code checks to see if those escapes are quoted before quoting
    them.  Removed quoting of them in mhn.defaults.sh because it isn't
    (and wasn't) necessary.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 18 19:16:39 2014 -0600

    Removed leading "exec " inserted in show_content_aux2(), which
    allows use of shell expansion on Content-Type parameters in
    mhshow display straings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 18 12:38:06 2014 -0500

    Fix for bug #41618: Supply charset to w3m when converting text/html parts.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 18 07:54:37 2014 -0600

    Silenced warnings when built without iconv.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 15:25:34 2014 -0600

    Added MH libdir to PATH in test-textcharset because it uses ap.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 14:12:15 2014 -0600

    Removed remaining TMP relics missed with commit
    d046c8f0992fddcd69f2172a6607a14dec3b1251.  Also, have mhmail clean
    up a .orig tmp file, now that it always uses mhbuild.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 13:12:39 2014 -0600

    Added support for %{charset} display string escape to mhshow(1).

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 11:30:41 2014 -0600

    Factored out duplicate code into parse_display_string() function.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 10:26:34 2014 -0600

    Instead of printing PostScript attachments, by default, from mhshow,
    try to find a suitable viewer.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 16 10:06:47 2014 -0600

    Added associations to mhn.defaults.sh from
    http://technet.microsoft.com/en-us/library/cc179224.aspx.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 12 15:41:39 2014 -0500

    More extended parameter work.  Still non-functional.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 12 15:41:04 2014 -0500

    Move contains8bit() to a common file, and make it a bit more general.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 11 23:17:00 2014 -0500

    Beginnings of RFC 2231 support.  Does not compile (yet).

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 10 23:17:28 2014 -0600

    Removed the -[no]textcharset switches that were added to mhshow(1)
    in commit 721b0395fb2fceac4e66fed1009ed2f17fd5351f.  They weren't
    needed.  So the net effect is that, if built with iconv, mhshow
    will attempt to convert text/plain content to match the user's locale.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 12:52:28 2014 -0600

    Use test_skip in test-textcharset if not built with iconv.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 10:32:46 2014 -0600

    Need to set locale to something other than UTF-8 on Cygwin for
    the first couple of checks in test-textcharset.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 09:59:23 2014 -0600

    Removed potential buffer overflow from ruserpass().  It had been
    there a long time.  Also, move the tokval buffer from global data
    to the stack.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 09:58:00 2014 -0600

    Added -[no]textcharset switches to mhshow(1).  These only apply if
    nmh was configured with iconv(3) support.  If -textcharset is not
    used, mhshow will convert, if necessary, the charset of text/plain
    content to match the user's locale setting.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 09:05:14 2014 -0600

    Use $MH shortcut for the profile in a few of the tests.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 9 08:56:42 2014 -0600

    In test-mhfixmsg, look at configuration to see if iconv is enabled
    rather than detecting it from test output.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 8 22:23:17 2014 -0600

    Remove mhbuild backup files at end of a couple of tests, if successful.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 8 21:38:18 2014 -0600

    Changed "codeset" to "charset" for (and in) mhfixmsg.  Also
    cleaned up some comments in mhshowsbr.c.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 8 11:11:25 2014 -0600

    Moved upcase(), update_attr(), content_charset(), and
    convert_charset() out of mhfixmsg.c so that other programs can
    use them.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 7 15:53:35 2014 -0500

    Start of changes to support extended parameter parsing and decoding.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 5 13:05:21 2014 -0500

    Fix uninitialized variable warning

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 5 11:02:01 2014 -0500

    Adjust the quoted-printable output routine to continue when the end of
    the buffer is reached, rather than adding a soft line break.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 15:09:12 2014 -0500

    Add test for -maxunencoded.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 14:54:16 2014 -0500

    A few more C-T-E tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 13:36:29 2014 -0500

    Still more CTE tests to cover (hopefully) all of tbe base64 cases.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 13:34:22 2014 -0500

    More CTE tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 12:38:34 2014 -0500

    More fixes (and tests) for the base64 encoder.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 11:49:49 2014 -0500

    Add a new base64 CTE test.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 4 11:19:24 2014 -0500

    Fix encoder so at least one case of LF -> CR LF conversion happens correctly.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 3 22:48:38 2014 -0600

    Reordered a bit of code in signal handler.  Noted in comment that
    NetBSD doesn't have mkstemps(3).

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 3 21:42:44 2014 -0600

    Use rename(2), not link(2), in m_mktemps() if mkstemps() is not
    available.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 3 21:46:33 2014 -0500

    Add a new (but incomplete) test for mhbuild's new functionality.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 3 21:46:08 2014 -0500

    Fix up mhbuild so the character set is always output when needed, even
    when the CTE is specified.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 3 21:45:41 2014 -0500

    Document changes to mhbuild.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 3 20:14:55 2014 -0500

    Support for selectable Content-Transfer-Encoding.
    Now default to 8bit for CTE for text types.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 2 22:34:14 2014 -0600

    netbsd uses flock by default for mail spool locking, as reported
    by Robert Elz.  Use *netbsd* to also include knetbsd, though I
    don't know for sure that it uses flock.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 2 22:16:25 2014 -0600

    Restored setuid/setgid to slocal:  it needs them when run as root,
    as a mail delivery agent.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 2 16:45:23 2014 -0600

    Removed some unused code that forked /bin/mkdir to make a new
    directory if an the effective and real uids differed.  There are no
    setuid executables in nmh.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 2 09:58:45 2014 -0600

    Removed all unnecessary setuid/setgid calls.  Using setuid as an
    example and not showing the setgid analogues:
    
        1) setuid(getuid());
        This dropped privileges before an exec and is normally a
        good thing.  Except here, the return value isn't checked.
        And, we don't have any setuid programs in nmh now, so it was
        unnecessary.
    
        2) if (geteuid() == 0) setuid(pw->pw_uid);
        This would have been a security hole if the executable was
        setuid root because the user specifies the source of the pw
        data.  This was in slocal(1), which is not setuid, so this
        was certainly not needed.
    
        3) setuid(geteuid());
        This was in post(8) for when it called the sendmail
        executable directly (-mts sendmail or -mts sendmail/pipe.
        It's not necessary with modern sendmail or replacements.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 2 08:46:25 2014 -0600

    Added m_mktemps(), which creates a temporary file with a specified
    suffix.  It uses mkstemps(3) where available, which should be most
    modern platforms.  If not available, it tries link(2), and if that
    fails, rename(2).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 1 16:13:00 2014 -0500

    Change mhstore test slightly to test canonical line ending handling for
    text MIME parts that are encoded with base64.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 1 15:57:49 2014 -0500

    Document changes to base64 encoder/decoder.

Merge: 3235599 d722ee2
Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 1 12:48:20 2014 -0500

    Merge branch 'base64-text-fixup'

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 11:32:53 2014 -0600

    Removed set +e where not needed in test-mhfixmsg.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 11:24:16 2014 -0600

    Fixed test-mhfixmsg check attempted -decode of binary text to
    work with the fixed base64 decoder.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 10:11:08 2014 -0600

    Added note that suffixes were removed from filenames of temporary files.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 10:09:13 2014 -0600

    Look for w3m if lynx isn't available for mhshow-show-text.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 10:11:08 2014 -0600

    Added note that suffixes were removed from filenames of temporary files.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 1 10:09:13 2014 -0600

    Look for w3m if lynx isn't available for mhshow-show-text.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 31 15:53:04 2014 -0500

    Fix base64 to handle text parts properly; currently this breaks mhfixmsg,
    and I'm not sure why yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 31 15:00:57 2014 -0500

    Add -width when appropriate for this test.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 29 15:56:01 2014 -0500

    Beginnings of selectable CTE; allow specification in mhbuild directives,
    but it doesn't do anything quite yet.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 28 21:36:05 2014 -0600

    Unset LANG, LC_ALL, and LC_TYPE in common.sh so that the tests
    don't accidentally rely on any of the user's settings.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 27 18:56:20 2014 -0600

    mhl() needs to set invo_name, too.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 27 12:53:03 2014 -0600

    WhatNow needs to set invo_name so that switches are interpreted properly.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 26 11:57:29 2014 -0600

    No longer look at TMP environment variable for temporary file storage.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 26 11:26:11 2014 -0600

    Merge branch 'tmpfiles'

Merge: 1468359 dd259aa
Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 26 11:23:53 2014 -0600

    Merge branch 'tmpfiles'

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 25 10:50:29 2014 -0600

    Added unregister_for_removal(0) calls to the couple of children
    that don't exec() or _exit() after fork().

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 25 10:04:19 2014 -0600

    Replaced nearly all unlink(3) calls with m_unlink().

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 25 09:26:13 2014 -0600

    Restored the unlinks of temporary files immediately after their
    creation in rcvtty.c, now that we have m_unlink().

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 25 09:15:05 2014 -0600

    Replaced boilerplate at beginning of each nmh program with new
    nmh_init() function.  It sets up an atexit() function and signal
    handlers so that all temporary files are removed when the program
    terminates, however that happens.  It relies on a call in m_mktemp()
    to register each temporary file for removal.  See new "nmh temporary
    files" section in README.developers and comments in m_mktemp.c.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 24 21:10:03 2014 -0600

    Removed 3 renames of temporary files in mhparse.c.  They added
    unnecessary filename extensions to the temp files.  They weren't good
    from a security standpoint and added a failure mode.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 24 20:29:38 2014 -0600

    Replaced use of mkstemp() with m_mktemp() in lock_file.c.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 24 13:17:56 2014 -0500

    Move uip/attach.c to sbr/mime_type.c; it was used by enough programs
    that it deserved to be in libmh.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 24 12:38:03 2014 -0500

    In my over-eager trimming I didn't realize the fallback code that
    used the mhshow-suffix configuration information to determine the
    MIME type was removed; put that back into mime_type().

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 23 22:16:34 2014 -0600

    Replaced use of mkstemp() with m_mktemp2() in header_fd() of
    rcvtty.c.  It never would have worked, anyway, because it had 5
    instead of 6 X's in the template.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 21:48:24 2014 -0500

    Switch from volatile char * to the more correct char *volatile.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 23 19:58:41 2014 -0600

    Separate export from assignment in test-dist and test-attach.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 14:55:21 2014 -0500

    Whoops, forgot to initialize the linked list next pointer to NULL.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 14:55:06 2014 -0500

    Make sure we include tiny.jpg we need for the test suite.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 14:40:44 2014 -0500

    Try to suppress warnings from changes (but why is this thing complaining
    about drft being clobbered now??)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 14:24:35 2014 -0500

    Hm, maybe I can't put environment variable assignments in front of
    functions?

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 14:01:53 2014 -0500

    Whoops, forgot a newline.

Merge: 05b74a0 18a3694
Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 13:35:31 2014 -0500

    Merge branch 'mhbuild-always'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 13:35:03 2014 -0500

    Document changes to mhbuild and send.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 00:34:18 2014 -0500

    Garbage collect unused code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 00:32:18 2014 -0500

    Remove automimeproc functionality; it's redundant now.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 00:31:55 2014 -0500

    Update the pending-release-notes for changes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 23 00:07:54 2014 -0500

    Flesh out test-attach, and set it to run as part of the test suite.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 22 18:59:07 2014 -0500

    Fix mhmail so it works with the new world order.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 22 15:22:07 2014 -0500

    Convert whatnow over to using the new Attach header.
    Mark the old -attach switches as deprecated (and make them not show
    up in help).  Still more documentation cleanup to do.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 22 12:06:49 2014 -0500

    Fixed this to use Attach instead of Nmh-Attachment.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 21 22:09:49 2014 -0600

    Added svector_find() function.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 21 22:35:35 2014 -0500

    Make viamail read the user's profile; this is required because sendsbr()
    wants to call mhbuild, which can be overridden via the user's profile
    (which is required for the test suite to work).

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 21 20:55:57 2014 -0600

    Always check that mktemp()/mktemp2() succeeds before trying to
    use result.  And if it fails, have the error message report
    the directory where the failed temporary file creation occurred.
    And, removed all chmod()'s of temporary files created by mktemp()/
    mktemp2() because they set the umask to 077 before calling mkstemp(3).

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 21 20:51:00 2014 -0600

    Expose get_temp_dir().

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 21 20:50:11 2014 -0600

    Enable asserts when debug is enabled, in build_nmh.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 21 20:12:29 2014 -0500

    Fix a bunch of tests for the mhbuild changes; still more to do.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 20 21:08:47 2014 -0600

    Replaced use of m_mktemp() with m_mktemp2() so that tmp files created
    by attach, burst, mhbuild, and post will be in the directory specified
    by the first non-null of {MHTMPDIR, TMPDIR, TMP, MH Path directory}.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 20 21:07:08 2014 -0600

    Removed remaining occurrences of char *tmp from uip/mh* programs.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 20 20:53:10 2014 -0600

    Expanded mhpath(1) man page discussion of its handling of out-of-range
    message numbers, and fixed a couple of formatting glitches.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 20 10:52:07 2014 -0600

    Use LC_ALL instead of LC_CTYPE in test-pick because LC_ALL has
    precendence.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 20 10:31:16 2014 -0600

    Fixed three LC_ALL settings:
    1) Replaced en_US.ISO8859-1 with C because that's sufficient to show
       decoding with an invalid multibyte sequence.
    2) Removed redundant LC_ALL=en_US.UTF-8; that is set for the entire test.
    3) Removed the last en_US.ISO8859-1 because it hid what the test was
       trying to show.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 20 01:27:15 2014 -0500

    Remove autoconf checks for nl_langinfo() and langinfo.h

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 20 01:15:55 2014 -0500

    Completely deprecate support for MM_CHARSET.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 19 23:21:51 2014 -0600

    Removed "tmp" from the uip/mh* programs, so that they no longer
    use the nmh-storage profile component for their tmp files.  Or
    their invoname, but that will be taken care of later.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 23:21:32 2014 -0500

    Remove the --disable-locale configure option and make locale support
    unconditional.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 13:47:07 2014 -0500

    Document the -dist flag.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 11:59:25 2014 -0500

    Change error message so "Unknown error 0" doesn't get printed if there
    is an error parsing an address.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 11:52:47 2014 -0500

    Add a test for dist to make sure it works with headers that need RFC-2047
    encoding.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 19 10:48:14 2014 -0600

    Updated MACHINES to show package requirements on Linux and Cygwin.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 01:11:59 2014 -0500

    Add support for not outputting any MIME headers when using dist.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 19 00:50:49 2014 -0500

    Allow mhbuild to work when the message body is empty.  You know, that
    was actually a giant pain!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 18 23:34:41 2014 -0500

    Removed unused argument "file" to user_content().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 18 01:17:12 2014 -0500

    Beginning of work to run mhbuild always.  A bit more complicated than I
    originally expected.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 18 00:38:39 2014 -0500

    Explictly return the exit code, so we can portably guarantee that
    pidstatus() will return 0 on a successful command execution.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 17 18:42:52 2014 -0600

    Removed -a option from whatnow attach, in anticipation of
    removal of send -attachformat.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 17 15:45:31 2014 -0500

    Add support for -auto flag to mhbuild.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 17 14:20:12 2014 -0500

    Remove WHATNOW #ifdefs; that code was obsolete a long time ago.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 16 21:48:01 2014 -0600

    Moved readline check to after termcap/curses check in configure.ac.
    This way, $TERMLIB can be included in the readline check.  That's
    neeed on CentOS 5.9.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 16 19:55:58 2014 -0600

    Moved readconfig() of mhn.defaults into construct_build_directive().
    This way, platforms that don't define MIMETYPEPROC will display
    the proper directive with attach -v.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 14 20:09:40 2014 -0600

    Added check to get_file_info() in attach.c for failed fgets() call.
    It can happen on Cygwin for mysterious reasons,
    http://cygwin.com/faq/faq.html#faq.using.bloda.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 14 19:39:42 2014 -0600

    Removed the tests of attach -v -a from test-attach-detach, and
    added -prompt '' to try to get the test to pass on Mac OS X.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 14 07:41:28 2014 -0600

    Modified last check added to test-scan-multibyte so that it
    also works without iconv support.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 13 20:29:19 2014 -0600

    Skip the last check that I added to test-scan-multibyte if we don't
    have iconv support because it requires converting from ISO-8859-1 to
    UTF-8.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 13 20:08:55 2014 -0600

    In cpstripped(), check for negative return value from wcwidth().

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 13 14:33:44 2014 -0800

    Better fix for test-attach-detach on platforms without readline.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 13 13:35:41 2014 -0800

    Fixed build on Solaris by only checking for -Wno-unused-result with gcc.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 12:18:47 2014 -0600

    Hacked test-attach-detach to pass on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 11:45:16 2014 -0600

    Final fix to test-attach-detach:  on some platforms, there's no
    charset for a text/plain file.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 11:32:11 2014 -0600

    Really fix mode of file that's used in test-attach-detach.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 11:26:07 2014 -0600

    One final fix to test-attach-detach.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 11:22:57 2014 -0600

    Fixed test-attach-detach to work with any umask, and without readline.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 12 10:18:20 2014 -0600

    Added -v and -a switches to whatnow attach so the user can see
    the mhbuild directive that send(1) will use.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 16:30:42 2014 -0600

    Refined the POSTLINK used on OpenBSD so that it leaves the warnings,
    but capitalizes the "w" so that they don't color the buildbot waterfall.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 16:00:14 2014 -0600

    Refined the autoconf test for -Wno-unused-result so that
    it's only used where we need it (currently Ubuntu gcc 4.8.1
    with -O2).

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 11:22:50 2014 -0600

    Calculate port numbers in test suite based on uid so that different
    users can run the test suite on a host simultaneously.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 11:02:19 2014 -0600

    Updated Cygwin and Linux build notes.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 11:01:21 2014 -0600

    Added more .exe files to .gitignore.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 10:15:27 2014 -0600

    Work around OpenBSD 5.4 file(1), which reports the --mime-encoding
    of text files as "binary".

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 09:22:36 2014 -0600

    Reworked attach to add charset to Content-Type string for
    text content.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 08:09:20 2014 -0600

    Changed how build_nmh deals with older mhparam that doesn't
    report SASL/TLS.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 11 08:00:55 2014 -0600

    Reorganized autoconf test for -Qunused-warnings so that it
    outputs something when configuring on any platform.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 11 01:41:44 2014 -0500

    Change test-mhmail so it can handle a MIMETYPEPROC that doesn't output
    the character set.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 11 01:11:45 2014 -0500

    Switch over to using --mime-type, since --mime seems to include a
    charset for non-text MIME types.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 10 23:41:04 2014 -0600

    Fixed POSTLINK (on OpenBSD) now that it doesn't use -Qunused-arguments.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 11 00:32:54 2014 -0500

    More tests, but not quite there yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 10 13:31:05 2014 -0500

    Don't error out if the message body is empty.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 10 23:25:19 2014 -0600

    Only add -Qunused-arguments to LDFLAGS if compiler is clang.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 10 20:49:24 2014 -0800

    Reworked LFLAGS hack for flex 2.5.35 and 2.5.36 to work on
    Ubuntu.  And use sed instead of ed.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 10 19:36:34 2014 -0600

    No longer add -g or -s to LDFLAGS.  autoconf handles -g.  And "make
    install-strip" is the approved way to install stripped executables.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 10 19:03:56 2014 -0600

    Added -Wno-unused-result to silence warnings on Ubuntu.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 10 00:45:38 2014 -0500

    Make sure we use the 'short' filename and add newlines where appropriate.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 9 23:17:25 2014 -0500

    A bit closer, but don't run the test just yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 9 16:03:21 2014 -0500

    Preliminary Attach: header support.  Untested just yet.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 8 20:54:50 2014 -0600

    OpenBSD 5 needs an other-libraries (fourth argument) to the
    AC_CHECK_LIB for SSL_library_init, because it doesn't automatically
    append -lcrypto when linking with -lssl.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 8 20:14:57 2014 -0600

    Hard-code the config/version.c target, instead of using $@, so its
    rule works for the distcheck target with Solaris (System V) make.
    distcheck uses VPATH, causes that make to prepend the VPATH to $@.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 8 19:02:58 2014 -0600

    Replace use of awk with sed in test-anno because it failed
    on Solaris (gawk).

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 8 18:23:10 2014 -0600

    Detect whether or not to use -n with tail in build_nmh.
    Synched that to uip/mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 7 22:51:41 2014 -0600

    Fixed typo in last commit of test-curses.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 7 22:49:51 2014 -0600

    Added -Txterm-color to tput invocations that didn't have it.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 7 22:27:55 2014 -0600

    In test-curses, use termcap codes if terminfo capabilities
    are not supported, such as on FreeBSD 9.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 7 20:18:52 2014 -0600

    Added sbr/dtimep.c to CLEANFILES so that make distcheck passes on
    FreeBSD 9.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 7 19:51:58 2014 -0600

    Clarified advisory message it test-mhfixmsg if a text browser
    isn't available.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 7 23:15:39 2014 -0500

    Update this for From, Resent-From, and Envelope-From.  Also document
    Attach even though the code hasn't been written yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 7 11:45:24 2014 -0500

    Prevent message status allocation code from overflowing if we get a
    message number that is too high; simply abort instead.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 6 20:49:18 2014 -0600

    Replaced hidden make_mime_composition_file_entry() used by attach()
    with public construct_build_directive().

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 6 19:14:20 2014 -0600

    Here's a better fix for the whatnow tests:  set and export
    TERM at the beginning of each test so that valgrind can be
    supported.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 6 11:30:42 2014 -0600

    Removed remaining run_prog's from tests that set an
    environment variable.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 6 11:20:47 2014 -0500

    Add a test for the new curses-based format escapes.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 5 14:48:18 2014 -0600

    Fixed description of send -attach switch in whatnow:  its argument
    is the header file name, not a filename.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 5 10:01:48 2014 -0600

    Removed remaining globals in uip/attach.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 5 09:51:53 2014 -0600

    Got rid of a couple of globals used by attach get_line().

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 5 09:39:11 2014 -0600

    Moved the functions that implement whatnow attach from
    uip/sendsbr.c to new uip/attach.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 5 08:28:58 2014 -0600

    In whatnow help, don't show that detached can be abbreviated
    with "de", because that conflicts with "delete".

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 4 20:44:21 2014 -0500

    Whoops, I'm supposed to NUL-terminate the string, not set the actual pointer
    itself!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 4 14:01:58 2014 -0500

    Make sure scan.curses is installed & distributed.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 4 00:59:38 2014 -0500

    Support for sending color escape sequences retrieved from terminfo(5).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 15:55:10 2014 -0500

    Add support for %(hascolor), and a new function for parameterized
    terminfo capabilities.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 14:40:35 2014 -0500

    Document %(nodate), and update things a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 11:43:16 2014 -0500

    Garbage collect some Autoconf cruft that has been around a lot longer
    than necessary.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 11:06:29 2014 -0500

    Also make sure outc() uses TPUTS_PUTC_ARG.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 11:05:18 2014 -0500

    Whoops, I forgot that AC_CACHE_CHECK calls AC_MSG_RESULT.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 10:44:59 2014 -0500

    Create an autoconf test to determine the argument of the tputs() callback.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 09:27:39 2014 -0500

    Remove checks for termcap.h and ncurses/termcap.h, since we're not using
    those header files anymore.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 00:42:05 2014 -0500

    Sigh.  Fix up missing conversion from clear->ti_clear.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 00:30:15 2014 -0500

    I guess we can't include both termcap and terminfo headers on Solaris.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 3 00:15:56 2014 -0500

    include curses.h so this (hopefully) now works on Solaris.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 23:59:57 2014 -0500

    Convert all of the terminal functions over to terminfo(5) instead of
    the older termcap.
    
    Move the terminal-specific code from fmt_compile.c to terminal.c, so it
    is all in one place.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 15:55:33 2014 -0500

    Garbage collect unused code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 15:52:49 2014 -0500

    Remove baudrate-handing code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 15:04:17 2014 -0500

    Always emit an STR instruction for terminal escape sequences, otherwise you
    can get unintended results (like printint the previous contents of the str
    register, which is almost certainly what you don't want).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 15:00:46 2014 -0500

    Switch from the M-X format for characters with the high bit set to
    \xXX instead when printing format strings and other characters.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 14:46:52 2014 -0500

    Fix problem with %(putlit) and %(zputlit) causing a SIGSEGV
    if str is NULL.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 13:54:07 2014 -0500

    Drop support for different behavior on hardcopy terminals.  It's 2014,
    I'm assuming this is not a valid concern anymore.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 2 11:38:20 2014 -0500

    Move the termsbr code into the libmh library, where it belongs.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 1 13:43:51 2014 -0600

    Give up on fmt_compile.c for now.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 1 13:21:56 2014 -0600

    That didn't work.  Try including termcap.h first, instead of
    ncurses/termcap.h.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 1 13:18:08 2014 -0600

    Changed several globals to be static, to avoid collision,
    notably with "filter" in libtermcap.so, on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 1 13:16:48 2014 -0600

    Try including termcap.h before curses.h to see if that solves
    the tputs() mismatch on Solaris.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 31 15:29:40 2013 -0500

    It looks like some systems also need curses.h as well as term.h

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 31 15:20:22 2013 -0500

    Add support for outputing a few (limited) terminal attributes in format
    sequences.  Needs documentation and some expansion.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 31 15:19:21 2013 -0500

    Make sure that branching instructions are traced even if we're executing the
    branch (previously, they would only be traced if they did not execute the
    branch).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 31 00:13:21 2013 -0500

    Change fmttest to use litputs() on str and output buffers during tracing.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 29 08:01:28 2013 -0600

    Generalized the valgrind suppression for sendmsg via readLine.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 28 18:24:54 2013 -0600

    Added test/valgrind.supp to EXTRA_DIST in Makefile.am so that
    NMH_VALGRIND=1 works with make distcheck.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 28 18:23:49 2013 -0600

    Removed one run_prog from test-pick because it loses the setting
    of the LC_CTYPE environment variable.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 28 11:55:12 2013 -0600

    Fixed chmod of temp file in prompter.  Noticed by valgrind.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 28 11:54:05 2013 -0600

    Null-terminate buffer in mbx_copy() in dropsbr.c.  Noticed by
    valgrind.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 28 11:51:01 2013 -0600

    Added support for running the test suite with valgrind by setting
    the NMH_VALGRIND environment variable.  To support that, nmh
    programs that are invoked in the test suite should be run via
    (the new function) run_prog or run_test.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 24 09:02:15 2013 -0600

    Have configure print out what it detects for the program to detect
    the MIME type string for a file.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 23 15:32:45 2013 -0600

    Added "true" to end of flex fixups in configure.ac, in case the
    user has hacked flex to not produce the errant code.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 23 15:09:23 2013 -0600

    Removed flex fixup for version 2.5.37, it's not necessary with
    flex 2.5.37 on Fedora 20.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 18:09:55 2013 -0600

    Use --brief option, if supported, with file --mime.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 17:38:59 2013 -0600

    In test-mhmail, insert semicolon in output of "file --mime" if needed.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 16:42:34 2013 -0600

    file --mime on OpenBSD returns strings such as "text/plain
    charset=us-ascii", without an intervening semilcolon.  Insert one if
    there isn't one.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 16:12:02 2013 -0600

    Removed support for file -i, it just spits out "regular file"
    on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 16:11:18 2013 -0600

    Removed temporary printouts.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 15:30:30 2013 -0600

    More debugging statements for OpenBSD.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 15:08:30 2013 -0600

    Added debuging printouts.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 15:05:38 2013 -0600

    Whooops, gcc on OpenBSD noticed a nasty in the last commit.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 14:42:26 2013 -0600

    With whatnow attach, determine the content MIME type that's inserted
    into the Content-Type header using file --mime or file -i, if
    available on the platform at configuration time.  If not, continue to
    use the mhshow-suffix- method.  Added a mimetypeproc component to
    mhparam so that a user can query the configuration.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 14:38:49 2013 -0600

    Updated date on a few man pages.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 10:41:09 2013 -0600

    Removed temporary probes added in commit
    3441b5648a0c21e067c05f428a51bf96352735e7.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 09:02:29 2013 -0600

    Added temporary probes to see what file --mime and file -i do on
    OpenBSD and Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 22 09:01:41 2013 -0600

    Increased size of file command buffer in make_mime_composition_file_entry()
    because it was a bit too small.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 10:41:01 2013 -0600

    Cleaned up setting of CFLAGS in configure.ac.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 10:29:33 2013 -0600

    Added POSTLINK to remainder of executables in Makefile.am.
    Replaced hard-coded sbr/libmh.a with $(LDADD) in LDADD
    macro for test/getfullname.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 09:51:47 2013 -0600

    The buildbot was reporting "warning" on stdin, not stderr.
    Escape "warning" so that it doesn't snag it.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 08:51:42 2013 -0600

    The build failed mysteriously on the OpenBSD buildbot host ("Provide
    an AUTOCONF_VERSION environment variable, please").  This was in the
    compile, not autogen, phase.  Committing trivial change to kick off
    another build.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 08:37:11 2013 -0600

    That didn't quite work, try reducing size of warning filter
    temporarily.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 14 08:24:14 2013 -0600

    Filter out "often/almost always misused" warnings from OpenBSD linker.
    Added POSTLINK macro to configure/Makefile for this purpose.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 19:23:27 2013 -0600

    Added mention of filename completion at whatnow prompt if nmh
    was configured with readline enabled.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 19:20:12 2013 -0600

    Moved the set -x after the uname and string test in autogen.sh
    to reduce build log clutter.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 19:12:15 2013 -0600

    Generalized -Wel fix in test-manpages of commit
    27659f0aa30c07081f7b8647c51a6ca82837e5d1 to apply on
    any platform.

Author: Pascal Stumpf <Pascal.Stumpf@cubes.de>
Date:   Fri Dec 13 18:57:57 2013 -0600

    rand()/srand() are not cryptographically secure PRNGs.  Some systems
    have the much better suited arc4random() family of functions; there's
    no reason to not use it if it is available.  Make m_rand() just a
    wrapper around arc4random_buf() in that case.  (There's no need to
    ever seed it manually.)
    
    As a bonus, silences some warnings on OpenBSD.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 16:48:02 2013 -0600

    groff -man silence the test-manpages warnings.  One more try: -Wel.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 16:25:24 2013 -0600

    Try using -man instead of -mandoc in test-manpages on OpenBSD
    to see if it silences the warnings.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 13 15:33:14 2013 -0600

    Disable assertions by default.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Dec 13 15:38:58 2013 -0500

    Minor autoconf style cleanup.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 20:15:14 2013 -0600

    Minor changes to configure.ac:
    1) Replaced direct manipulation of NDEBUG with AC_HEADER_ASSERT.
    2) Removed unnecessary level of quoting around LFLAGS assignments.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 20:11:42 2013 -0600

    Moved all LDFLAGS manipulations in configure.ac to one place.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 18:37:58 2013 -0600

    Tweaked rcvtty.c to squelch warnings on OpenBSD.  Three of the
    four were due to unused artifacts with HAVE_GETUTXENT not defined.
    The fourth was due to control reaching the end of non-void
    function message_id(), which had an _exit() call at the end.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 18:29:31 2013 -0600

    Initialize local child_id in main() of whom.c to squelch warning
    from cc on OpenBSD.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 18:27:17 2013 -0600

    Squelch warning from cc on OpenBSD that fd argument of usr_pipe() in
    slocal.c might get clobbered by vfork() by copying it to a volatile
    local.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 18:23:45 2013 -0600

    Removed --posix from awk invocation in test-anno.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 12 18:08:01 2013 -0600

    It looks like the sed "a" in test-anno didn't emit a trailing
    newline on OpenBSD.  It does on other platforms.  Try using
    awk instead.

Author: Lyndon Nerenberg <lyndon@bbsobsd5.bitsea.ca>
Date:   Thu Dec 12 11:55:58 2013 -0800

    Add buildbot hacks for OpenBSD.
    
    OpenBSD auto{conf,make} want a version specified in the environment
    for each of the tools.  For now, hardwire this into autogen.sh until
    we can figure out a better way of dealing with this.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 11 20:52:49 2013 -0600

    Sun Studio cc -V must output to stderr.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 11 20:28:10 2013 -0600

    Try 9efa994ecac2790dbc56113f78c464eed1371590 again.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 11 19:47:29 2013 -0600

    Undid last commit of temporary printouts because buildbot is down.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 11 17:19:48 2013 -0600

    Temporarily add some printouts to configure.ac to see why -v
    isn't added to Sun Studio cc on Solaris build host.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Dec 11 10:53:28 2013 -0800

    Prefer cc over gcc.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Dec 11 10:42:04 2013 -0800

    One more attempt at getting the buildbot $PATH correct on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 19:17:00 2013 -0600

    OK, this should work to detect Sun Studio cc.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 19:07:25 2013 -0600

    Oops, that didn't work.  Disable -v with SunStudio cc for now.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 19:05:32 2013 -0600

    OK, use SunStudio cc, if present, on Solaris if user didn't set CC.
    And with it, use -v and suppress the statement not reached warning.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 18:45:26 2013 -0600

    Suppress E_STATEMENT_NOT_REACHED warning from SunStudio cc.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 18:35:08 2013 -0600

    Added -errtags=yes to SunStudio cc options.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 18:22:23 2013 -0600

    Removed a bunch of unreachable break statements found by
    SunStudio cc -v.  Also fixed an "end-of-loop code not
    reached" condition in uip/dropsbr.c.  That one is significant
    because it meant that retries were not attempted when attempting
    to open and lock a file.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 16:43:20 2013 -0600

    Need full path to cc on Solaris buildbot host, at this point.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 16:16:59 2013 -0600

    Try -v with SunStudio cc.  Also, try setting CC instead of modifying
    AC_PROC_CC to pick up cc on the buildbot Solaris host.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Dec 10 14:05:08 2013 -0800

    Remove the Solaris cc hack; the buildbot should have the correct
    cc in its $PATH now.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 08:40:59 2013 -0600

    Removed +w from SunStudio cc, it caused compilation failure.
    Maybe it can only be used with CC.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 08:36:15 2013 -0600

    That worked.  Now try +w2 with SunStudio cc.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 08:15:22 2013 -0600

    Of course that didn't work.  Try specifying the SunStudio
    compiler in CC.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 10 07:53:14 2013 -0600

    That didn't work.  Set PATH to pick up SunStudio cc.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 9 23:45:54 2013 -0600

    Use SolarisStudio cc if available.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 9 23:20:27 2013 -0600

    Added temporary probe to find cc on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 9 18:25:03 2013 -0600

    Removed temporary favor of cc over gcc.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 9 18:19:17 2013 -0600

    Temporarily favor cc over gcc to try it out on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 23:17:50 2013 -0600

    Commit 9c663383ab54e0290781ac1c25d790ce03160e08 introduced
    a backward incompatibility to build_nmh.  Refuse to support
    -y if the current nmh installation has an mhparam that doesn't
    support the sasl and tls components.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Dec 8 22:18:46 2013 -0500

    Clean up comments, and update information on file locking.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 19:02:28 2013 -0600

    Removed dependence of build_nmh on ldd by adding sasl and tls
    components to mhparam(1).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Dec 8 18:05:42 2013 -0500

    Fix one of the POP tests to work on wide terminals.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 13:27:33 2013 -0600

    Removed temporary diagnostic to determine gcc version on Solaris
    buildbot host.  It's 4.5.2.  4.6.0 and later return an error
    status with an unrecognized option, which we rely on for the test
    for -Qunused-arguments.  4.5.2 doesn't.  But that option doesn't
    produce any errors, just warnings that don't contain "warning".
    So ignore it.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 13:16:19 2013 -0600

    Added temporary diagnostic to see what version of gcc is
    used on the buildbot Solaris host.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 12:50:39 2013 -0600

    With the fix of 4929cad323afc87404752a1e88664a7f42cbb737,
    prepare_space() no longer needs to insert initial space.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 12:15:18 2013 -0600

    Try this sed command for squeeze_lines().

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 11:19:13 2013 -0600

    Added -eval 'set document.browse.margin_width = 0' to elinks
    command in mhfixmsg-format-text/html in mhn.defaults, to disable
    indentation of converted text.  Thanks to Rickard Carlsson for
    this suggestion.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 10:56:35 2013 -0600

    That didn't work, so try this awk command from Robert Elz.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 8 10:29:00 2013 -0600

    Fixed squeeze_lines() test function to be compatible with POSIX awk.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 7 20:27:37 2013 -0600

    Fixed test-mhfixmsg to work with elinks, which inserted leading
    space on a line.  Thanks to Valdis for reporting that and to
    Ralph for the awk and sed magic to emulate diff -w (and cat -s).

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 7 10:44:31 2013 -0600

    Added notes to README.developers about write access to
    the git repo and git rebase.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 7 10:39:16 2013 -0600

    Replaced hard-coded use of "," with `mhparam sbackup` in
    test-header-encode.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 7 09:34:05 2013 -0600

    Disable clang complaint about unused -ansi when linking by
    adding -Qunused-arguments to LDFLAGS, if supported.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 6 18:56:11 2013 -0600

    Removed bash-isms from inc/test-deb359167.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 6 18:43:20 2013 -0600

    Skip inc/test-deb359167 on FreeBSD >= 10 because its valgrind
    throws a strange error.  Code provided by Lyndon.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Dec 6 14:52:03 2013 -0800

    test/common.sh.in: use awk to pick off first output field.
    
    md5 and md5sum are inconsistent in their use of SP vs HT as a field separator.
    cut(1) can only handle a single field delimiter character; awk is more forgiving.

Merge: 2734ae8 7d7ed69
Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 22:49:54 2013 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 22:49:49 2013 -0600

    Renamed test/getfqdn to test/getcanon.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 23:40:44 2013 -0500

    I give up for now; revert these debugging commits.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 23:28:44 2013 -0500

    One final check to make sure the binary isn't stripped

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 23:15:57 2013 -0500

    Sigh. Make sure the binaries aren't stripped as well.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 22:56:57 2013 -0500

    Switch to default of -g so hopefully we can get something useful from the
    FreeBSD buildbot valgrind output.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 22:48:04 2013 -0500

    Sigh, I always forget this is errno.h, not sys/errno.h.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 5 21:59:22 2013 -0500

    Have getfqdn fall back to printing out the given hostname if the DNS lookup
    fails, to replicate the behavior of LocalName().

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 18:38:16 2013 -0600

    That didn't work, either.  Restoring configure.ac.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 18:35:00 2013 -0600

    That didn't work, try adding -pedantic-errors.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 18:10:01 2013 -0600

    The linker on FreeBSD 10 doesn't like -ansi.  So added a
    configure check to not put -ansi in CFLAGS if the linker
    doesn't like it.  Though may need to add -pedantic-errors.
    There doesn't seem to be an easy way to get automake to
    not put CFLAGS in the link command.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 17:48:08 2013 -0600

    Clean up mhbuild backup files left by test-header-encode.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 08:02:27 2013 -0600

    Better fix than commit 605d80e7cf0d02d4bab9387f03b4e1d43177e33e
    for test-mhfixmsg:  always overwrite HOME environment variable
    if mhfixmsg uses w3m.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 5 07:04:51 2013 -0600

    Fix to commit 7e40862e6a4da7810a46aa1e28b05e527fdc208a:
    only one of the variables should have ICONV_CONST.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 22:25:14 2013 -0600

    In test-mhfixmsg, make sure that $HOME is writeable, in case
    nmh has been configured to use w3m.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 21:48:04 2013 -0600

    Really fixed mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 21:18:38 2013 -0600

    Removed temporary hack.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 21:15:31 2013 -0600

    Removed temporary hack to enable debug from configure.ac.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 21:13:55 2013 -0600

    Fixed test-mhmail failure on Solaris:  its tail doesn't suport -n.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 22:03:23 2013 -0500

    Update pending-release-notes regarding removal of the -normalize and
    -nonormalize switches.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 21:56:50 2013 -0500

    Garbage collect "normalize".
    
    The code to normalize addresses (look up the hostnames in DNS for the
    "official" hostnames) was disabled when we made DUMB the default configuration
    in 1.5.  Since them, the -normalize switch was still around in various
    utilities, but it didn't do anything.  Remove all of those switches and
    garbage collect various other bits of the "normalize" functionality.
    
    At the same time, improve getm() a bit; it now takes an argument specifying
    the length of the error buffer.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 20:54:03 2013 -0600

    Added temporary diagnostic hack to test-mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 20:40:59 2013 -0600

    The buildbot is up, put in hacks to enable debug and print out hostname.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 20:30:04 2013 -0600

    Fixed m_getfld() bug introduced in commit
    0c7ac5073c24f01663fadc78b5112c86d52e4452.  This bug caused parsing
    of messages with long (>= 8K) header field values to fail.  The fix
    was easy:  decrement the counter of bytes read when decrementing the
    current read position, in FLDPLUS state.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 20:29:05 2013 -0600

    Use ICONV_CONST in declaration of variable that's passed to
    iconv(), to quiet warning in FreeBSD 10.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 19:49:36 2013 -0600

    Added identifier to each check in test-mhlist to help diagnose
    test failure.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 19:38:11 2013 -0600

    Added comment about not supporting trailing semicolons
    for aliases (in alias file).

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 19:37:00 2013 -0600

    Undid temporary hacks, it looks like the buildbot is down.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 4 19:24:57 2013 -0600

    Temporarily added a few hacks to diagnose problems found by buildbot.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 18:11:31 2013 -0500

    Fix another warning.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 15:49:52 2013 -0500

    A few more tests; I think that's enough for now.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 14:29:54 2013 -0500

    Fix a few warnings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 12:57:20 2013 -0500

    More tests (but not quite finished yet).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 12:56:54 2013 -0500

    Fix cut & paste mistake.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 12:12:55 2013 -0500

    More man page minor fixup.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 11:56:34 2013 -0500

    Slightly clarify mhbuild man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 4 11:40:52 2013 -0500

    Minor typo fix.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 21:57:01 2013 -0500

    Note changes to mhbuild.

Merge: 4c1236a 4fcf75e
Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 21:52:30 2013 -0500

    Merge branch 'encode-rfc2047'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 21:52:11 2013 -0500

    Support for more tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 21:36:39 2013 -0500

    Whoops, shouldn't use autoincrement with a macro; forgot about side
    effects!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 15:52:00 2013 -0500

    First round of tests!  Still want to do more before it gets merged.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Dec 3 15:21:29 2013 -0500

    Add support for a -file switch to handle messages that are not in folders.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 23:34:02 2013 -0500

    Don't put a space after the trailing semicolon for group termination.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 23:14:47 2013 -0500

    Use pref_encoding() to select the default encoding for all headers.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 23:11:27 2013 -0500

    Do proper group handling, and fix a bug in the q-p encoder.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 15:49:35 2013 -0500

    I think we're very close to get address encoding working, but still have
    to test it more.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 13:47:34 2013 -0500

    Document a few more things.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 13:41:51 2013 -0500

    Since our last caller of getlocaladdr() was removed, garbage-collect this
    function.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 2 13:39:34 2013 -0500

    Remove code to set the signature buffer; it turns out that with our
    refactoring for 1.5, it was no longer used.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 27 12:49:07 2013 -0500

    More work, but still stuff to do.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 25 14:06:38 2013 -0500

    Fix up a few warnings and problems.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 21 15:59:21 2013 -0500

    More work on address portion of RFC 2047 encoder.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 14 15:30:15 2013 -0500

    A little bit closer to working for address headers.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 14 11:43:33 2013 -0500

    Break out the unquote functionality to a separate function.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 14 10:16:22 2013 -0500

    Fix up the unquote test, with help from Lyndon and Ralph.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 22:26:09 2013 -0500

    Test for unquoting, but it doesn't work yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 20:54:48 2013 -0500

    Switch fmttest over to using snprintb() instead of the private custom version
    we originally cribbed from fmtdump.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 20:54:22 2013 -0500

    Document snprintb() a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 20:54:05 2013 -0500

    Actually check the output buffer length all of the time.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 15:51:08 2013 -0500

    Start work on address header parsing.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 13 11:03:12 2013 -0500

    Fix up date mode so it works without providing a format string.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Nov 10 22:46:49 2013 -0500

    Document things a bit more.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Nov 10 00:46:23 2013 -0500

    A number of bug fixes:
    
    - Fix macro to calculate the number of characters that will fit
      within a specified base64 encoding length.
    - Refactor code to handle leading spaces, and insert a leading space
      correctly after the start of a header.
    
    With all this, it seems to work!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Nov 9 14:27:12 2013 -0500

    Don't increment the buffer pointer for the NUL string terminator; this
    lets us concatenate new text on the end of the current output buffer.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Nov 9 10:39:48 2013 -0500

    Add support for -changecur and -nochangecur to mhlist(1).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 7 22:44:13 2013 -0500

    A little closer, but still has problems.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 7 22:43:50 2013 -0500

    Fix handling of -headerencoding switch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 7 16:02:14 2013 -0500

    Getting closer to getting base64 header encoding working.

Author: David Levine <levinedl@acm.org>
Date:   Sun Nov 3 12:36:10 2013 -0600

    Removed spurious space before a period in rcvpack man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Nov 3 12:34:12 2013 -0600

    Cleaned up the "stripped CRs" mhfixmsg verbose message.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 31 11:51:52 2013 -0400

    Beginning stubs to support base64 header encoding.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 31 11:37:52 2013 -0400

    Support the -headerencoding switch to select the header encoding algorithm.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 31 11:36:46 2013 -0400

    Switch to the (correct) casting of char to unsigned char for is*() macros.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Oct 30 20:44:19 2013 -0400

    Fix some space calculation/whitespace handling bugs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Oct 30 15:32:03 2013 -0400

    Fix qpspecial() macro test, and do proper casts to handle signed chars.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Oct 30 14:04:16 2013 -0400

    It looks like simple quoted-printable encoding of headers works!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 29 22:52:06 2013 -0400

    Remove unused argument.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 29 22:42:51 2013 -0400

    Fix up a few miscalculations.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 29 15:58:35 2013 -0400

    A hopefully-functional quoted-printable encoder

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Oct 28 14:44:30 2013 -0400

    Test to make sure mhshow is actually invoking a charset conversion
    program if one is defined.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Oct 27 22:31:50 2013 -0400

    Fix bug found by LLVM.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Oct 27 22:31:35 2013 -0400

    Fix up warnings reported by LLVM.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 27 08:57:55 2013 -0500

    Interpret a full path argument to mhfixmsg as a filename, not
    a message.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Oct 23 14:40:02 2013 -0400

    A little tiny bit closer to working.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 11:24:34 2013 -0500

    Success!  Clean build on the buildbot Solaris11 host.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 11:04:52 2013 -0500

    Ooops, fixed typo in configure.ac.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 11:02:47 2013 -0500

    See if this cleans up the Solaris build on the buildbot.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 10:47:23 2013 -0500

    More probing:  print out sbr/dtimep.c.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 10:20:49 2013 -0500

    OK, Solaris on the buildbot uses flex 2.5.35.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 10:16:31 2013 -0500

    More probing: added flex -V.

Author: David Levine <levinedl@acm.org>
Date:   Wed Oct 23 09:57:16 2013 -0500

    Added back an enhanced hack to configure.ac to try to diagnose
    the flex 2.5.36/.36 bug workaround.  Changed test-dist a bit
    to help isolate where it just failed.  (My last commit message
    was incorrect:  it was test-dist that failed, not test-comp-format.)

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 22 22:54:08 2013 -0500

    Reverted commit 9caa7da143644ed93c6ba6351f48fa1327ad4392
    because it didn't solve the problem on Solaris, and
    apparently broke test-comp-format, though I don't see how.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 22 19:46:51 2013 -0500

    Added hack to configure.ac to work around bug in flex 2.5.36 and
    2.5.37 that prevents the builds from being completely green.
    According to http://sourceforge.net/p/flex/bugs/140/, this should
    be fixed in the next release of flex.  The hack is confined to
    just configure.ac so it'll be easy to remove.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Oct 21 23:51:57 2013 -0400

    Minor comment update.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Oct 21 16:01:02 2013 -0400

    Start of RFC 2047 encoding code.  Not complete in the slightest.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Oct 21 12:48:23 2013 -0400

    Some comments describing the MIME structures.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 19 09:58:14 2013 -0500

    Added volatile qualifier in a couple of places to get rid of
    "might be clobbered" warning from when -Wno-clobbered isn't
    supported.  And I removed the check for Wno-clobbered from
    configure.ac.  It's no longer needed on any of the platforms
    I use, we'll see if others need it.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 19 09:19:58 2013 -0500

    Allow mhfixmsg to strip carriage returns from ISO-8850, UTF-8,
    and Windows-12xx text, in addition to ASCII.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 19 09:17:22 2013 -0500

    Added docs/README-iCalendar.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 17 22:03:07 2013 -0400

    Implemented -build switch for comp, at the request of the MH-E developers.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 17 21:44:52 2013 -0400

    Minor comment cleanup.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Oct 17 15:43:15 2013 -0400

    Update the mh-sequence(5) man page with details of the format of the
    sequence file.  Also mention that nonexistant messages will be removed
    from sequences.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 15 20:21:32 2013 -0400

    Add locking support to the version of the sequence file reading code used
    by the "new" command.  Based on a patch by Harvey Eneman.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 15 15:02:18 2013 -0400

    Remove support for NOPUBLICSEQ.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Oct 15 14:48:19 2013 -0400

    Remove unneeded stat() call; was a leftover from the original MH
    code where the owner of the folder was checked against the results of
    getuid().

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 6 08:45:22 2013 -0500

    The Content-Disposition type needs to be "inline" for MS Outlook and
    BlackBerry calendar programs to properly handle a text/calendar
    attachment.  So do that with attachformat values of 1 and 2.

Author: David Levine <levinedl@acm.org>
Date:   Thu Sep 19 18:30:19 2013 -0500

    Added script name to test-mhfixmsg printout.

Author: David Levine <levinedl@acm.org>
Date:   Thu Sep 19 08:13:24 2013 -0500

    Don't check -replacetextplain in test-mhfixmsg if skipping -reformat
    check.

Author: David Levine <levinedl@acm.org>
Date:   Wed Sep 18 21:40:19 2013 -0500

    Run output of -replacetextplain test through uniq.

Author: David Levine <levinedl@acm.org>
Date:   Mon Aug 19 00:42:01 2013 -0500

    Added -replacetextplain switch to mhfixmsg.  If enabled, -reformat
    will replace any existing text/plain part, such as those that are
    empty or that don't match their corresponding text/html part.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jul 2 18:33:37 2013 -0500

    Added unsigned char cast of char argument to isascii() call.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jul 1 15:44:22 2013 -0400

    Reject email addresses which contain 8-bit characters.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jul 1 15:07:16 2013 -0400

    Add warnings about the use of %(decode) on addresses.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jul 1 14:31:51 2013 -0400

    If mbtowc() fails to handle a character, replace the offending character
    with a '?' and continue.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 1 07:11:27 2013 -0500

    In test-mhfixmsg, run output through uniq before head instead of after.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 22:29:12 2013 -0500

    Punted on comparing that html part in test-mhfixmsg:  it
    can get reformatted legally.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 21:20:00 2013 -0500

    Try this formatting change to test-mhfixmsg.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 20:46:18 2013 -0500

    One more formatting chagned to the input in test-mhfixmsg.  One of
    the lines is one character longer than the others and that's about
    where the problem shows up, so yanked a character out of it.

Merge: 1863e69 03da1d1
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 18:11:42 2013 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 18:11:13 2013 -0700

    Revert "Move a variable manipulation outside the context of setjmp() to quell a compiler warning."
    
    Turns out it didn't fix it after all.
    
    This reverts commit 0152658e840581077e5cd575b5195faf18b9df8b.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 20:11:08 2013 -0500

    Changed formatting of the input in test-mhfixmsg that breaks
    on Solaris 11, maybe this will fix it.

Merge: 0152658 7970ff4
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 17:59:59 2013 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 17:59:31 2013 -0700

    Move a variable manipulation outside the context of setjmp() to quell a compiler warning.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 19:40:34 2013 -0500

    Restored test-mhfixmsg.  Not sure what to do about failure on Solaris.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 17:24:48 2013 -0700

    Copy a parameter off the call stack to quell a longjmp warning.

Merge: 5fb90fa daae5d9
Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 19:14:46 2013 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 19:12:58 2013 -0500

    See if the rest of test-mhfixmsg will pass on Solaris.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 16:58:23 2013 -0700

    Remove spurious return statements after exit().
    
    These are holdovers from a long forgotten era.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 18:50:50 2013 -0500

    OK, fixed test-mhfixmsg on Solaris 11, where BUFSIZ is 1024.
    The problem was in the content_encoding() function of mhfixmsg:
    it would restart its counter of the characters on a line whenever
    new characters were read in.  The fix was easy, just move the
    initialization of that counter outside of the fread() loop.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 18:28:56 2013 -0500

    Added to the Solaris debug printout.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 18:11:43 2013 -0500

    Removed exit() after a longjmp() in uip/sendsbr.c to quiet
    compile warning on Solaris 11.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 18:03:28 2013 -0500

    More debugging of test-mhfixmsg on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 17:50:44 2013 -0500

    Fixed removal of <> in test-dist and test-rcvdist.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 16:44:23 2013 -0500

    Remove any <> surrounding localmbox in test-dist and test-rcvdist,
    so that the tests pass when the user doesn't have a SIGNATURE set.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 16:35:39 2013 -0500

    That didn't work, fixed location of mhn.defaults in test.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 30 16:19:56 2013 -0500

    Added debug printouts to see why the test fails on Solaris 11.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 13:14:12 2013 -0700

    Prefer /usr/sbin/sendmail over /usr/lib/sendmail.
    
    If the site installs a sendmail replacement, or updates to a newer
    version, odds are better for the new sendmail preferring to install in
    /usr/sbin over /usr/lib.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Jun 30 12:39:46 2013 -0700

    Add compilation guard around lkopen_flock.
    
    Oracle Solaris 11 doesn't have flock().

Author: Lyndon Nerenberg <lyndon@nmhsol11.(none)>
Date:   Sun Jun 30 12:16:07 2013 -0700

    If we're searching for commands, prefer xpg4 versions on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 11 20:30:31 2013 -0500

    Removed hyphen from all occurrences of RFC-*.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 11 20:17:29 2013 -0500

    Changed all bare occurrences of 822/2822 to RFC 822/RFC 2822.
    Reported by Norm.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 11 19:46:51 2013 -0500

    Changed "separated by spaces" in mh-sequence man page to
    "as separate arguments", as suggested by Norm.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 11 19:45:47 2013 -0500

    Changed a couple of occurrences of "white-space" to "whitespace"
    to be consistent with other man pages.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 26 12:37:40 2013 -0700

    conflict(8): style - move deprecation notice into DESCRIPTION.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 26 12:28:24 2013 -0700

    Remove SYNOPSIS from nmh(7).

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 26 12:23:00 2013 -0700

    Delete SYNOPSIS from section 5 manpages.
    
    This isn't applicable to section 5 manpages.

Merge: c943fb3 4859041
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 26 12:17:41 2013 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 26 12:17:31 2013 -0700

    Fix typo.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 26 11:11:48 2013 -0500

    Added note to pending-release-notes that "*" address-group is
    obsolescent.  Split obsolete and deprecated features into
    separate sections.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat May 25 20:19:50 2013 -0700

    Stupid typo in manpage.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat May 25 20:14:04 2013 -0700

    Clean up mh-alias(5) manpage.
    
    Word-smithing, update to use *.example domains for addresses,
    literal text in bold rather than italic, use typographers quotes on
    single character references, etc.
    
    Re-organize sections to match documentation convention.
    
    Mark "*" address-group as obsolescent.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 12 08:29:34 2013 -0500

    Fixed strip_crs() in mhfixmsg to work even if it's the
    only modification to the message.  Also, fixed the test
    so that it succeeds even if there is no lynx, w3m, etc.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 6 20:14:57 2013 -0500

    Fixed number of bytes to fread() in strip_crs() in mhfixmsg.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun May 5 14:41:34 2013 -0700

    More .ta -> .TP manpage cleanup.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 4 10:38:35 2013 -0500

    Per Ralph's suggestion, added note that "moreproc" is not
    supported in user profile display strings.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 4 10:30:21 2013 -0500

    Replaced hard-coded "more" with DEFAULT_PAGER in show_text().

Author: David Levine <levinedl@acm.org>
Date:   Sat May 4 09:36:42 2013 -0500

    When the mhfixmsg -decodetext switch is enabled, each carriage
    return character that precedes a linefeed character is removed
    from ASCII-encoded text parts.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 4 09:03:27 2013 -0500

    Removed unused declaration of "nolist" from mhshow.c.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 4 09:01:42 2013 -0500

    Replaced raw hack to add the credentials profile entry in post.c
    with new add_profile_entry() function.

Author: David Levine <levinedl@acm.org>
Date:   Thu May 2 20:36:21 2013 -0500

    Fixed failure reported by Valdis of post to retrieve login and
    password with legacy credentials.

Author: David Levine <levinedl@acm.org>
Date:   Wed May 1 20:40:55 2013 -0500

    Fixed problem with m_getfld() with long headers reported by
    Paul Fox.  The problem occurred with the 512th byte of the
    header was a newline:  it then skipped the next character.

Author: David Levine <levinedl@acm.org>
Date:   Wed May 1 20:38:48 2013 -0500

    Set the return status from the check() function of the test
    suite if the check failed.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 30 20:59:55 2013 -0500

    Removed remaining #includes of stdio.h and stdlib.h because
    they're #include'd by h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 30 20:54:43 2013 -0500

    Applied what was done to uip/send.c in commit
    af429a902add614e35cd76d15172a4ccb70a3be1 to uip/viamail.c and
    uip/whatnowsbr.c, because they call sendsbr() directly.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 19:42:09 2013 -0500

    Removed some #includes of stdio.h, ctype.h, stdlib.h, and
    string.h because they're #include'd by h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 19:32:44 2013 -0500

    Removed some #includes of unistd.h and stdio.h because they're
    in h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 19:26:58 2013 -0500

    Redirect some outputs in the test suite to standard error.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 14:59:34 2013 -0500

    Fix to commit af429a902add614e35cd76d15172a4ccb70a3be1 to
    use the user found by nmh_get_credentials() in sm_auth_sasl().

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 13:07:31 2013 -0500

    Tweaked check of -outfile in test-mhstore.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 12:49:44 2013 -0500

    Allow -clobber with mhstore -outfile.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 11:29:47 2013 -0500

    Added -outfile switch to mhstore(1).

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 28 11:13:41 2013 -0500

    Refined error message from check() shell function of test suite.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Apr 27 20:32:55 2013 -0400

    Remove extra arguments from two anno tests; the check() function now
    complains about them.  Looks like they were always there.

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 27 14:08:49 2013 -0500

    Removed #include of sys/param.h from sbr/makedir.c.  It's
    #include'd by h/nmh.h, with HAVE_SYS_PARAM_H protection.

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 27 13:26:18 2013 -0500

    Allow mhfixmsg -reformat to succeed even when decode of binary
    text fails.  This is a refinement of commit
    ebf35185aa9256b0cd09234f39bd14db9e90e81c.

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 27 13:24:53 2013 -0500

    Added support for 'ignore space' argument to check() function
    of test/common.sh.in.

Author: David Levine <levinedl@acm.org>
Date:   Mon Apr 22 22:00:38 2013 -0500

    Completed commit 52a236230220232fd632b5aa88eb9bb31dba346e so
    that send(1)/post(1) use "credentials" profile entry.  post
    doesn't read the profile so pass the credentials setting to
    it via a new switch.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:49:48 2013 -0500

    Replaced calls to static getcpy() in mf.c with calls to strdup()

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:43:27 2013 -0500

    Added quoting of local part of invalid address in message being
    replied to [Bug #26780].

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:42:00 2013 -0500

    Fixed small formatting glitch in repl man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:41:03 2013 -0500

    Added const to arguments of mf functions.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:39:44 2013 -0500

    Added const to argument of getname().

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 21 09:39:20 2013 -0500

    Added const to argument of getcpy().

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 20 08:36:12 2013 -0500

    Refined commit 9b70e8396d50989db2177547515594bc15ee8b17 to allow
    options to be passed to ls from whatnow prompt.  This way, "ls -l"
    works as expected.

Author: David Levine <levinedl@acm.org>
Date:   Fri Apr 19 21:06:50 2013 -0500

    Added mention to mhlist(1) man page, in response to question
    from Ralph, that it lists multipart/alternative parts in reverse
    order of their placement in a message.
    
    And in response to suggestion from Ralph, trimmed whitespace from
    ends of mhlist output lines.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Apr 9 14:32:32 2013 -0400

    test-mark:  add tests for relative message selections

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Thu Apr 4 08:21:19 2013 -0400

    mh-sequence.man: document new '=+' and '=-' for selecting relative msgs
    
    also add a line-item to docs/pending-release-notes.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Thu Apr 4 08:21:50 2013 -0400

    m_convert: 'foo=n' and 'foo=+/-n' now select msgs with relative offsets

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 18 21:30:33 2013 -0500

    Fixed permissions of maildelivery file in test-slocal to fix
    test failure reported by Paul Fox.  Also added code to the test
    to help diagnose any failure.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 16 08:00:54 2013 -0500

    Plugged memory leak in m_unknown().

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 16 07:59:54 2013 -0500

    Added date to test message with two blank lines between header
    and body so that the test can pass on other days.

Author: David Levine <levinedl@acm.org>
Date:   Mon Apr 15 21:01:12 2013 -0500

    Fixed problem in m_getfld() reported by Paul Fox.  When
    inc'ing a message from a maildrop with two blank lines
    between the header and body, the last 3 or 4 characters of
    the last header would be copied into the body.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 14 10:47:31 2013 -0500

    Moved #include of signal.h to h/signals.h.  And it was already
    in h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 14 10:27:47 2013 -0500

    Moved #include of errno.h to h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 14 10:13:42 2013 -0500

    Removed #include of sys/wait.h from sbr/pidstatus.c.  I missed
    it with b523a72928c0ef630be33cf5f5aab9fc301958e1.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 14 09:53:32 2013 -0500

    A "credentials" mh-profile entry has been added.  This allows
    post(8), whom(1), send(1), inc(1), and msgchk(1) to (optionally)
    honour the username in the .netrc file [Bug #23168].  And, it
    allows specification of any valid filename in place of $HOME/.netrc.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 9 20:26:43 2013 -0500

    Fixed typo in several man pages.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 3 20:06:19 2013 -0500

    Added vpick to dist_contib_DATA so it gets distributed.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 3 19:56:54 2013 -0500

    Be sure that mhfixmsg returns a status of non-zero if
    it can't reformat a part.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 3 18:46:22 2013 -0500

    Added port number to "Connecting to" message with -snoop.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 1 12:10:28 2013 -0400

    Document new -initialtls option.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 31 20:56:49 2013 -0500

    Cast away constness of SSL_CTX_new() arg because that's
    what older versions of ssl use.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 31 20:39:55 2013 -0500

    Look at post instead of inc to determine build options in build_nmh.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 31 20:39:22 2013 -0500

    Added const to SSL_METHOD *.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 31 18:33:46 2013 -0400

    Preliminary support for TLS negotiation at the very start of SMTP session.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 31 16:32:10 2013 -0500

    Moved #include <sys/wait.h> to h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 31 11:45:09 2013 -0500

    Removed limit on maximum number of sequences in a folder.
    Dynamically sized vectors in sbr/vector.c were added to support
    this.  Their sizes are limited only by virtual memory.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 30 09:53:10 2013 -0500

    Moved #include <assert.h> to h/nmh.h.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 29 12:09:15 2013 -0500

    A bug fix and an enhancement to mhfixmsg based on patches
    provided by M. Levinson:
    1) Set status to NOTOK in get_multipart_boundary() if the
       message is missing its end boundary.  This avoids a seg fault
       in fix_boundary(); also added check for null return from
       parse_mime().  If this turns out to be a common problem, we
       could consider adding code to repair it.  Now, mhfixmsg ignores
       the condition and proceeeds with any other transformations.
    2) With -decodetext 7bit, mhfixmsg now converts base64-encoded
       parts to quoted-printable 8bit if the part will not fit into
       7bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 27 14:56:44 2013 -0400

    Document changes regarding increased per-folder sequence limits.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 27 14:51:33 2013 -0400

    Warn the user if too many sequences exist during sequence initialization.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 27 14:22:40 2013 -0400

    Change seqset_t to unsigned long to support more sequences on LP64 systems.
    Also include necessary casts to make sequence macros worked properly.
    Based on code contributed by M. Levinson.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 25 22:29:06 2013 -0500

    Reworded description of "mark -seq foo delete all" example
    in mark(1) man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 13:37:47 2013 -0500

    Finished replacing mh_strcasecmp() with strcasecmp().  Removed
    sbr/strcasecmp.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 13:23:59 2013 -0500

    More replacements of mh_strcasecmp() with strcasecmp().

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 11:45:42 2013 -0500

    More replacements of mh_strcasecmp() with strcasecmp().

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 11:28:51 2013 -0500

    More replacements of mh_strcasecmp() with strcasecmp().

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 11:15:27 2013 -0500

    More replacements of mh_strcasecmp() with strcasecmp().

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 10:36:18 2013 -0500

    More replacements of mh_strcasecmp() with strcasecmp().

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 24 09:09:02 2013 -0500

    Started replacing uses of mh_strcasecmp() with strcasecmp().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 23 22:59:24 2013 -0400

    Change folder_delmsgs() to save context and sequence files (and make
    sure those changes are before calling rmmproc().  Update programs
    that use folder_delmsgs() to make all changes to sequences and
    the context before calling folder_delmsgs().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 22 00:28:35 2013 -0400

    Make some formatting changes to conform to our manpage style.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 22 08:33:40 2013 -0500

    Always update sequences and context in mhfixmsg, not just when
    there is a rmmproc.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 21 21:05:09 2013 -0500

    Fixes from M. Levinson:
    1) Fixed typo in elinks option in etc/mhn.defaults.sh.
    2) Added #include <sys/wait.h> to mhfixmsg.c.
    3) Fixed seg fault when there's no corresponding profile entry
       for a message part in mhfixmsg.
    4) If rename() fails in write_content() of mhfixmsg, attempt to
       copy and then remove the file.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 21:49:29 2013 -0400

    Minor formatting fix for fmttest man page.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Thu Mar 21 20:22:21 2013 -0500

    Went through the sources and checked where etcpath() is
    used, and added/cloned an explanatory bit of text from the
    fmttest man page to the files section for all affected
    programs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 18:28:21 2013 -0400

    Make sure to mark the sequence file as closed in the msgs struct.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 17:19:46 2013 -0400

    Change mhfixmsg to the new world folder_read() API.

Merge: 6f70907 85bb87a
Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 17:14:30 2013 -0400

    Merge branch 'newlock'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 17:12:42 2013 -0400

    More documentation about locking changes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 17:12:13 2013 -0400

    Support for sequence file locking in inc(1).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 21 13:47:04 2013 -0400

    Don't lock and write the sequence files until after the searching
    is complete.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 21 09:13:13 2013 -0500

    Replaced reference to mktemp(3) with mkstemp(3) in
    rmmproc.messageid.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 20 21:48:57 2013 -0500

    Added support for Content-Disposition header (RFC 2183) to
    mhstore(1) and mhn(1) when used with -auto.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 20 20:52:10 2013 -0500

    Removed hard-coded locking selection from SPECS/nmh.spec.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 20 20:25:31 2013 -0500

    Fixed typo in rmf man page.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 19 07:32:24 2013 -0500

    Added -[no]rmmproc switches to rmm and mhfixmsg.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 19 01:02:45 2013 -0400

    Make sure the building of config/config.o and sbr/mts.o depend on
    the Makefile so changes to the Makefile are properly reflected in the build.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 18 20:00:10 2013 -0500

    Added -[no]rmmproc switches to rmm and mhfixmsg.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 18 15:29:35 2013 -0400

    Add code for (and convert world to) the new world lock order.
    
    Still need to add some code to make inc and pick behave better (not hold locks
    for as long).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 18 10:38:06 2013 -0400

    Add ICONVLIB to build rule for mhfixmsg

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 18 08:54:55 2013 -0500

    Fixed use of WIFEXITED in mhfixmsg.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 17 21:55:56 2013 -0500

    Fixed procmail example in mhfixmsg man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 17 15:40:36 2013 -0500

    Removed color-tests from AM_INIT_AUTOMAKE because the build
    breaks if not supported, and automake 1.13 enables it by
    default.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 17 10:32:57 2013 -0500

    Added mhfixmsg(1).

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 17 10:29:26 2013 -0500

    Fixed typo in fmmtest man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 16 00:04:38 2013 -0400

    Add information about locking support entries to the man pages.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 15 23:45:54 2013 -0400

    Support for locking tests in the test suite.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 15 19:42:43 2013 -0400

    Turns out the close function can be called with FILE * == NULL, so handle
    that case.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 15 15:57:56 2013 -0400

    Mostly complete now, but not yet functional.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 15 08:50:23 2013 -0500

    Corrected comment describing copy_seqs().

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 14 22:02:30 2013 -0500

    Changed c_cefile member of struct Content from pointer to
    struct cefile.  The memory cost will be negligible and it
    simplifies the MIME parser code a bit.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 14 20:58:31 2013 -0500

    Added -[no]retainsequences switches to refile(1).

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 14 20:37:49 2013 -0500

    Changed loop in dumpwidth() to go from [0, 0xffff) because
    wchar_t is 2 bytes wide on Cygwin.  gcc noticed that the loop
    would never terminate because 0xffff would increment to 0.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 14 19:08:15 2013 -0500

    Changed detection of warning in build_nmh for sign mismatch
    in sbr/dtimep.c to work with older gcc.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 14 15:57:07 2013 -0400

    More locking updates; still doesn't compile yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 13 21:02:48 2013 -0400

    Start of the changes for the new lock code.  Does not compile yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 12 14:22:49 2013 -0400

    Add support for RFC-2017, message/external-body content which contains URLs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 12 12:57:41 2013 -0400

    Change sample disposition from "application" to "attachment"

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 11 18:57:01 2013 -0500

    Added check that writesomecmd() isn't at the end of argp before
    dereferencing ++argp.  I'm surprised that no one, including me,
    tripped over this before:  whatnow(1) would seg fault when
    handling, e.g., detach -n 4.  But until I upgraded to Fedora 18,
    I never noticed it.  (valgrind did.)

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 11 18:42:16 2013 -0500

    Ignore the sign mismatch warning when sbr/dtimep.c is built with
    flex 2.5.36 or 2.5.37.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 8 06:40:07 2013 -0600

    Fixed spelling of "preserve" in refile man page.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 7 20:11:22 2013 -0600

    In the locking discussion of mh-folders(5), discourage direct
    access to the nmh state files.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 5 20:17:08 2013 -0600

    Added lockmethod pseudocomponent to mhparam so that users
    can easily find out what locking method was configured in.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 5 14:30:51 2013 -0500

    Update with more information.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 3 21:45:09 2013 -0600

    Added a bit more on sequences to mh-folders.man.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 3 09:53:10 2013 -0600

    Added beginnings of storage format spec to new mh-folders.man.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 3 09:49:05 2013 -0600

    Fixed typo in rmmproc.messageid.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 27 19:32:38 2013 -0600

    Reworked internals of MIME parser's reverse_parts() and made it
    public.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 27 19:31:31 2013 -0600

    Added tolower(), toupper(), and toascii() to
    gen-ctype-checked.c.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 26 19:23:58 2013 -0600

    Added a handful of functions to the parser to allow access to
    init functions and string representations of enum valus for
    content types and encodings.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 26 19:08:38 2013 -0600

    Added nmh_strcasestr() because POSIX doesn't have strcasestr().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 26 13:19:06 2013 -0500

    Support RFC 2231 language tags in RFC 2047 header strings.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 25 23:02:05 2013 -0600

    Added cpytrim() function.  Unlike trimcpy(), it does not modify
    its argument.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 25 22:46:00 2013 -0600

    Added const qualifier to arguments of concat() and copy().

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 24 21:55:28 2013 -0600

    Added find_str() and rfind_str() to sbr/utils.c

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 24 21:38:33 2013 -0600

    Added const qualifier to char * arguments of add(), addlist(),
    and folder_exists() in sbr/utils.{h,c}.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 22 00:52:50 2013 -0500

    Add support for LS_UNQUOTE instruction.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 22 00:47:47 2013 -0500

    Fix the code to print out an unknown instruction.  Wow, this never worked
    back from the original fmtdump.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 23:56:02 2013 -0500

    Whoops, forgot a \ when adding fmttest.man to man_SRCS.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 23:03:31 2013 -0500

    Quote the arguments to the .I macro so the manpage test doesn't complain.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 22:55:41 2013 -0500

    Document new fmttest program.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 22:55:23 2013 -0500

    Fix a few issues resulting from m_getfld() API changes.

Merge: b5f3b74 7344831
Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 22:40:48 2013 -0500

    Merge branch 'format-test'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 22:38:18 2013 -0500

    Add a lot more text to the man page; it should be in reasonable shape now.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 22:37:47 2013 -0500

    Update instruction output to be a bit more cleaner

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 21 21:01:55 2013 -0600

    Fixed write8Bit() to use fread()/fwrite() instead of
    fgets()/fputs().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 15:53:06 2013 -0500

    Flesh this out so finally it's halfway useful.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 15:52:36 2013 -0500

    Rearrange options a bit and support the -nodump flag.  Also clean up how
    -raw mode works.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 21 15:52:09 2013 -0500

    Bring this up to best practices.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 20 22:37:50 2013 -0500

    Minor updates for fmttest man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 20 15:53:54 2013 -0500

    Basic format tracing support; seems to work!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 20 15:19:11 2013 -0500

    Support for the address duplication done by repl, and also clean up
    some stuff.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 20 12:01:05 2013 -0500

    Support callbacks into the format engine.  This is so we can add in proper
    hooks for %(formataddr), %(concataddr), and (eventually) tracing.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 19 21:57:32 2013 -0500

    Make generating the ChangeLog work if you're building a distribution from
    an object directory.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 19 21:54:14 2013 -0500

    The beginnings of a fmttest man page.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 19 19:45:25 2013 -0600

    In m_getfld.c, cast the returns of valid characters to
    unsigned char.  This differentiates them from EOF and matches
    the behavior prior to the recent m_getfld() rework.  But that
    behavior is very broken on 8-bit input.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 19 13:51:47 2013 -0500

    Apply David Levine's fix from whomfile() to sendfile() as well.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 18 21:32:24 2013 -0600

    Removed addition of whomproc to the vec array in whomfile()
    now that argsplit() does it.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 18 21:24:29 2013 -0600

    Added locking discussion to rcvstore(1) man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 18 20:51:46 2013 -0500

    fmttest is actually starting to get useful now.  Some changes were required
    to the format code to make this code cleaner.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 17 22:04:51 2013 -0600

    "RFC-2045 to RFC-2049" instead of "thru".

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 16 08:27:29 2013 -0600

    When output_content() outputs a non-MIME message with no body,
    suppress the newline after the headers.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 16 08:23:10 2013 -0600

    Added mention of rcvstore(1) to inc(1) man page.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 16 08:21:10 2013 -0600

    Plugged small memory leak in etcpath().

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 16 08:19:45 2013 -0600

    In InitMultiPart(), always set bogus_mp_content if boundaries
    don't match.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 16 00:37:36 2013 -0500

    Remove dead UUCP address parsing code.  Sadly, this is not the complete
    removal of UUCP support, but it's a good start.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 16 00:31:16 2013 -0500

    Slightly more useful, but still more work to do.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 15 15:58:21 2013 -0500

    Add more functionality to fmttest; it's starting to get semi-useful.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 14 21:53:50 2013 -0600

    Added a couple of global variables to mhparse.c to allow
    suppression of the warning about bogus multipart content,
    and detection of it.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 14 13:50:28 2013 -0500

    More work on fmttest, but still plenty more to go.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 14 13:49:54 2013 -0500

    Correct man page information for %(width) format instruction.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 13 21:11:59 2013 -0600

    Added support for multiple message/file arguments to
    rmmproc.message.id.  Added mention of it to rmm man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 13 15:53:13 2013 -0500

    Clean up argument handling to fmttest, as a precursor to actually getting
    it done.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 13 14:42:50 2013 -0500

    Remove support for -mail, -saml, -send, and -soml switches in send
    and whatnow.  The code in post implementing these options was removed
    as part of commit 537e02c38f4bb.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 13 14:24:11 2013 -0500

    Convert fmttest over to the new argument processing world order.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 13 10:47:26 2013 -0500

    Document argsplit changes in mh-profile man page.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 12 22:03:54 2013 -0600

    Fixed typo in mhlist man page.  Also removed sendfiles(1)
    from its SEE ALSO list.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 12 20:05:17 2013 -0500

    Remove installproc from the test since we don't have it anymore.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 12 15:39:18 2013 -0500

    Remove "installproc" since it is no longer used.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 12 15:37:00 2013 -0500

    Final conversion to new argsplit() code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 11 15:57:31 2013 -0500

    Add a new test for the MIME functionality in burst.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 10 20:55:54 2013 -0600

    Multipart parts might have content before the first subpart
    and/or after the last subpart that hasn't been stored anywhere
    else, so do that at the end of InitMultiPart(), and output it
    in output_content().

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 10 19:05:37 2013 -0600

    Added etc/rmmproc.messageid, which shows how to try to move
    a message or file to a file that's named based on Message-ID.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 8 15:46:31 2013 -0500

    Make burst(1) be able to burst MIME-formatted messages with message/rfc822
    parts in them.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 8 13:02:00 2013 -0500

    Create a central prototype for free_content().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 7 14:34:12 2013 -0500

    More conversion to argsplit().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 7 11:31:45 2013 -0500

    Move etc/gen-ctype-checked into an Automake primary so dependency information
    can properly be recorded for it.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 6 20:39:06 2013 -0600

    When debugging is enabled, replace the ctype functions with
    macros that index into arrays.  This allows the compiler to
    catch use of char, instead of unsigned char, arguments to
    those functions.  gcc uses -Wchar-subscripts, which is enabled
    with the -Wall that we use by default.  Thanks to Tom Lane for
    suggesting this approach.
    
    This feature can be enabled by undef'ing NDEBUG in config.h.
    configure --enable-debug does that.  We can now use the same
    mechanism to enable and disable assert(3), too.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 6 20:31:18 2013 -0600

    Added global variable skip_mp_cte_check to turn off that check
    for incorrect encoding of multipart messages in InitMultiPart().

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 6 20:28:29 2013 -0600

    output_content() assumed that ci->ci_values[0] was the boundary,
    but that's not always the case.  Added search for the boundary
    in ci->ci_attrs[].

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 6 15:51:04 2013 -0500

    More work to convert programs over to the use of argsplit().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 6 11:12:56 2013 -0500

    Make sure these stdarg lists are properly terminated with pointer-context
    NULLs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 5 21:06:35 2013 -0500

    Remove warning suppression we no longer need.  Hooray!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 5 21:00:40 2013 -0500

    FINALLY clean up our signed/unsigned character warning mess.  In short, we
    have switched to using "char" almost everywhere, and casting char to
    unsigned char when using the ctype macros/functions.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 5 16:20:53 2013 -0600

    Changed m_getfld() to use char instead of unsigned char.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 5 15:25:23 2013 -0600

    Changed m_getfld() to use char instead of unsigned char.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 5 13:01:09 2013 -0500

    Start of the signed/unsigned char cleanup.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 3 22:51:00 2013 -0600

    Tweaked logic in brkstring.c and showfile.c to get rid of the
    remaining "statement not reached" warnings from Solaris cc.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 2 14:28:39 2013 -0500

    Make sure we don't link getcwidth with the nmh libraries.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 12:56:53 2013 -0600

    Added support for "-" to indicate stdout to output_message().

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 12:54:55 2013 -0600

    Removed unlink of "core" from signal handler of mhlist, mhn,
    mhshow, and mhstore.  Those programs shouldn't remove a file
    that has nothing to do with them.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 12:40:59 2013 -0600

    Removed myuid and mygid variables, they're no longer used and
    the Solaris C compiler complained about their initializers.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 2 13:30:24 2013 -0500

    Cast wchar_t to long unsigned int to deal with differing types of
    wchar_t across systems.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 11:55:23 2013 -0600

    Suppress warning from test-manpages that groff can't break a line if
    the user's prefix is too long.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 10:54:32 2013 -0600

    The Solaris compiler was right about unreachable statements.
    Fixed all of them in uip/.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 10:21:14 2013 -0600

    Added l modifier to X printf conversions of wchar_t's.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 10:18:24 2013 -0600

    Removed unused vec[0] relic from before argsplit conversion.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 10:12:57 2013 -0600

    Added trailing newline to sed input in mhmail when processing
    -headerfield argument, to squelch complain from Solaris sed.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 09:59:28 2013 -0600

    Set MHTMPDIR to try to keep all test-related files together.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 09:58:20 2013 -0600

    More test-mhmail probing.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 09:23:49 2013 -0600

    Try this test-mhmail probe.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 08:43:32 2013 -0600

    More test-mhmail probing.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 08:26:43 2013 -0600

    Modified test-mhmail probe.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 2 08:15:15 2013 -0600

    Added temporary probe to test-mhmail.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 2 01:10:06 2013 -0500

    Convert post over to use new argsplit code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 2 00:48:54 2013 -0500

    Handle the case where (on Solaris) the width of U+2019 is 2 (which seems
    TOTALLY bizarre to me, but there you have it).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 2 00:33:51 2013 -0500

    Rework multibyte test so it will calculate the width of all of the
    Unicode characters we are using.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 23:24:27 2013 -0600

    In setup_test(), set PATH after install.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 23:12:09 2013 -0600

    Added set -x to test-ali.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 22:52:00 2013 -0600

    Maybe the mkdir in setup_test() needs a -p?

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 22:39:49 2013 -0600

    More test-ali diagnostics for Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 22:25:51 2013 -0600

    Use test -t 1 instead of test -w in test-pick.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 22:24:48 2013 -0600

    More setup_test() and test-ali attempts on Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 18:46:02 2013 -0600

    Removed the ls of folder from setup_test().

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 18:35:13 2013 -0600

    Try full path to folder in setup_test().

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 18:16:26 2013 -0600

    Maybe the PATH needs to be exported again in setup_test()?

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 17:37:02 2013 -0600

    So folder does exist the first time through setup_test().
    Let's see its stdout.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 17:20:37 2013 -0600

    Suppressed display of info message when test-eom-align isn't
    run with stdout to a terminal.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 17:19:40 2013 -0600

    Temporarily added ls of folder to setup_test().

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 15:08:32 2013 -0600

    In setup_test(), create the Mail directory if it doesn't
    already exist.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 15:41:00 2013 -0500

    Ignore the return status of diff, so we don't exit if diff fails when using
    set -e.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 15:18:47 2013 -0500

    Add some diagnostics to determine what is going wrong.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 14:08:45 2013 -0600

    It looks like the first test fails on Solaris because it
    can't find folder.  So, added a test/sleep before its first
    use, in setup_test().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 15:03:16 2013 -0500

    If the multibyte width test fails, dump the values of wcwidth() for the
    complete BMP.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 13:38:36 2013 -0600

    Added diagnostic to setup_test() to try to figure out
    why the first test fails on the Solaris buildbot.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 1 13:36:23 2013 -0600

    Restored test-ali to its prior condition.  It failed on the
    Solaris buildbot because it was the first test.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 14:06:49 2013 -0500

    Make sure we created the test file even if we don't have iconv support;
    it's needed for two tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 13:42:51 2013 -0500

    Move ICONV_ENABLED so it always gets initialized even if the header check
    for iconv.h fails.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 13:25:17 2013 -0500

    If we don't have iconv, skip the multibyte test that requires character
    set conversion.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 12:30:45 2013 -0500

    Finally switch over from vfork() to fork() completely.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 1 12:11:59 2013 -0500

    More code converted to use argsplit().

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Feb 1 07:25:44 2013 -0800

    Fix configure tests for -Wfoo option support.
    
    Drooped support for -Wunused-macros and -Wno-unused-macros.  The
    warnings serve no useful purpose, and causing subsequent configure
    checks for -Wfoo flags to get messed up.
    
    Split each test of -Wfoo into a separate check. Include -Werror in
    the individual flag tests to ensure the test compile fails if the
    other flag isn't supported.  Without this, clang issues a diagnostic
    message about the flag being ignored, but otherwise carries on, fooling
    configure into thinking the flag is in fact supported.

Merge: ae9b723 b78be76
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Feb 1 04:44:29 2013 -0800

    Merge branch 'master' into savannah

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Feb 1 00:20:44 2013 -0800

    Update manpages to use .TP for tagged paragraphs (part I).
    
    This replaces .fc/.nf and friends with the man(7) .TP macro.
    
    This commit covers about half of the man pages.  The rest will
    follow in a couple of days.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Feb 1 00:20:44 2013 -0800

    Update manpages to use .TP for tagged paragraphs (part I).
    
    This replaces .fc/.nf and friends with the man(7) .TP macro.
    
    This commit covers about half of the man pages.  The rest will
    follow in a couple of days.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Jan 31 21:28:51 2013 -0800

    Update the manpage template documentation.
    
    Update the section ordering to follow the UNIX order.  This
    pulls nmh-specific sections into the body of the manpage, and
    pushes FILES, SEE ALSO, and BUGS to the end.
    
    Clarifies a few other minor points.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 22:32:26 2013 -0600

    More probing of test-ali on Solaris:  exit before the
    setup_test call, which has the folder invocation.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 22:30:36 2013 -0600

    OK, test-pick should be good on Solaris now.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 21:27:46 2013 -0600

    Added exit to test-ali, temporarily, to isolate failure on
    Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 21:24:53 2013 -0600

    More homing in on the test-pick warning.  Also, removed
    warning to user that the tty test is being skipped, it's
    not that important.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 20:10:59 2013 -0600

    Removed an used sed invocation from test-mhmail.  I don't
    know if it was causing the warnings on Solaris, we'll see.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 31 21:04:43 2013 -0500

    Fix some warnings for Solaris.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 20:04:50 2013 -0600

    it looks like the write to /dev/tty is causing the warning from
    test-pick on Solaris, here's an attempt to squelch that.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 19:44:47 2013 -0600

    Removed sizes from mhlist output.  Apparently tar files are
    so much smaller on Solaris that they cause the check of its
    output to break.  The test also compares the contents of
    the tar file, so it's still adequate.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 31 19:43:09 2013 -0600

    Redirected stderr to /dev/null in the test for presence of
    /dev/tty.  Solaris warns that it can't create the device.
    This may not fix it, but it should help isolate which part of
    the test is causing the warning.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 31 20:01:27 2013 -0500

    Set the locale for one of the "pick" invocations to UTF-8, so we can decode
    the UTF-8 header correctly in the test.

Author: Lyndon Nerenberg <lyndon@minisun.(none)>
Date:   Thu Jan 31 03:56:55 2013 -0800

    Use cmp(1) to compare acheieved and expected test results.
    
    'diff -c' on Solaris 11 generate a spurious 'No differences encountered'
    message (on stdout, no less!) when the compared files are identical. This
    changes the test logic to compare with 'cmp -s', and then perform a
    'diff -c' if the results don't match expectations.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Jan 31 01:44:03 2013 -0800

    Wrap 'pick -subject foobar 13' test with set +e/-e.
    
    The command was failing silently on FreeBSD, leading to
    premature script termination.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Jan 30 23:55:26 2013 -0800

    Change the MD5FMT macro in configure.ac to not emit filename.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Jan 30 23:07:17 2013 -0800

    How hard can it be to write a portable shell function that does nothing?
    
    Pretty hard, apparently :-P

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Jan 30 21:45:16 2013 -0800

    Hush progress indicator during tests when stdout is not a tty.
    
    This eliminates 100 lines of logfile spam during buildbot runs.

Merge: e716be9 f1722de
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Jan 30 19:58:16 2013 -0800

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh into nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Wed Jan 30 19:57:22 2013 -0800

    IPPROTO_TCP requires <netinet/in.h>
    
    At least on BSD it does.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 30 15:47:32 2013 -0500

    More changes to use argsplit() for helper programs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 29 15:58:34 2013 -0500

    Switch the editor invocation over to use argsplit().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 29 15:30:36 2013 -0500

    The start of the use of argsplit() to process command strings.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 28 21:38:39 2013 -0600

    Changed m_getfld() buffer size to 4096 from 8192, to benefit
    scan(1).  We could consider using a larger buffer size when
    readying message bodies.  But I expect any benefit would be
    overshadowed by the way parse_mime() currently reads MIME
    messages:  it reopens the file for each part.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 28 21:20:22 2013 -0600

    Added m_getfld_track_filepos() for callers to indicate that they
    may interleave fseek*/ftell* calls with m_getfld() calls.  This
    eliminates the need for m_getfld() to call fseek() when called
    by inc(1) and scan(1).

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 28 19:12:17 2013 -0600

    Added scan_reset_m_getfld_state(), for msh only.  It needs to
    call that so that it can support more than one operation on its
    mailbox.

Merge: a5a4757 4538251
Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 27 10:37:54 2013 -0600

    Merge branch 'm_getfld'

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 27 10:11:10 2013 -0600

    In the sortm warning message, say "file modification time"
    instead of "file mtime", per Paul F.'s suggestion.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 27 09:34:58 2013 -0600

    Changed sortm warning message from an amonish() to and advise(),
    and included the remedy of using the file mtime, per suggestions
    of Norm and Ralph.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 27 08:37:31 2013 -0600

    Fixed a couple of calls to m_getfld():  they were in while loops
    and the loop bodies were missing brackets.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 26 09:42:25 2013 -0600

    Deprecated msh(1).

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 26 09:00:48 2013 -0600

    In build_nmh's output from the test suite:  retain
    colorization and list any test failures.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 26 08:52:50 2013 -0600

    Enabled colorized test output (PASS/FAIL/summary) by default
    via "color-tests" automake option.  To disable at runtime,
    either set your AM_COLOR_TESTS environment variable to "no",
    or provide that on the make check command line.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 25 22:21:53 2013 -0600

    Reworked the new documentation in m_getfld.c.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 25 22:22:46 2013 -0500

    Handle the case in the test suite where wcwidth() can return different
    values for combining Unicode codepoints on different operating systems.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 24 16:05:36 2013 -0500

    Fix the format engine so it properly keeps track of multibyte characters
    and column positions when processing components and other functions.
    
    When working on this code I realized we have nothing that checks to make
    sure right justification of format function output works properly, so a
    test for right justification is also included.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 23 20:24:21 2013 -0600

    Added functions for inc, msh, rcvtty, and scan to access
    scansbr's gstate instance so it can be hidden, except for
    msh's uses of m_getfld().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 21 10:32:37 2013 -0500

    Fix a bug leading to message corruption with inc when incorporation more
    than one message at a time.
    
    When I reworked the scan() code to remove the use of stdio internals,
    two code paths were created.  The inc code path consumed another buffer
    from the nxtbuf list for processing the message body.  At the end of
    scan() there was code to push back all of the consumed buffers to the
    nxtbuf list.  The extra buffer consumed in the inc code path wasn't
    being pushed back, and as a result the nxtbuf list would end up with
    duplicate pointers in it.  This would result in two components sharing
    the same text buffer, which caused the message corruption.
    
    When I looked at this closer, I realized that there was no reason to
    push those buffers back to the list; nxtbuf gets reset to compbuffers
    at the start of every call to scan(), and nxtbuf isn't used after the
    buffers are pushed back.  Some researched revealed that this was the
    same back in the original MH code.  I decided it was simplest to simply
    delete the buffer recycling code.
    (cherry picked from commit 22d2acba60374851c291260ff6aa716e9bf44a6d)

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 23 19:42:56 2013 -0600

    Brought over changes to test-pop from master to m_getfld branch.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 20 08:38:18 2013 -0600

    Added scan and inc from mbox with multiple messages.
    (cherry picked from commit c4c53777458bfcfd288d45b7708e52eb47c56405)

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 17 20:58:25 2013 -0600

    Added test-msg-buffer-boundaries.
    (cherry picked from commit dbd0fa0a56a222bd118fea627eba53e5d9811d01)

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 23 19:20:40 2013 -0600

    Brought over changes to test-pop from m_getfld branch.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 22 21:02:49 2013 -0600

    Changed m_getfld() to automatically allocate a new state
    instance as needed.  Callers no longer use
    m_getfld_state_init().

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 22 17:08:21 2013 -0600

    Removed unnecessary m_getfld_state_destroy() from scan.c.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 22 17:07:47 2013 -0600

    Reworked enter_getfld() and Peek().

Merge: 2f5c4e8 22d2acb
Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 21 10:58:07 2013 -0500

    Merge branch 'master' into format-test

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 21 10:32:37 2013 -0500

    Fix a bug leading to message corruption with inc when incorporation more
    than one message at a time.
    
    When I reworked the scan() code to remove the use of stdio internals,
    two code paths were created.  The inc code path consumed another buffer
    from the nxtbuf list for processing the message body.  At the end of
    scan() there was code to push back all of the consumed buffers to the
    nxtbuf list.  The extra buffer consumed in the inc code path wasn't
    being pushed back, and as a result the nxtbuf list would end up with
    duplicate pointers in it.  This would result in two components sharing
    the same text buffer, which caused the message corruption.
    
    When I looked at this closer, I realized that there was no reason to
    push those buffers back to the list; nxtbuf gets reset to compbuffers
    at the start of every call to scan(), and nxtbuf isn't used after the
    buffers are pushed back.  Some researched revealed that this was the
    same back in the original MH code.  I decided it was simplest to simply
    delete the buffer recycling code.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 21 08:42:20 2013 -0600

    Plugged small memory leak in m_unknown().

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 20 22:22:17 2013 -0600

    Replaced hard-coded value with MAX_DELIMITER_SIZE in m_getfld.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 20 21:27:54 2013 -0600

    Removed the static m_getfld() state instance and replaced
    with functions for callers to create and destroy their own
    instances.  This also allows inc, msh, and pick to call
    m_getfld() with an initial file stream position other than 0.
    
    There is now a global state instance so that scan can call
    m_unknown() on maildrop files.  It'd be nice to get rid of
    that.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 20 22:23:58 2013 -0500

    Fix memory leak in arglist code

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 20 08:38:18 2013 -0600

    Added scan and inc from mbox with multiple messages.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 20 07:49:58 2013 -0600

    Updated test-inc-scanout on master to match version of
    m_getfld branch.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 19 08:33:38 2013 -0600

    Added a FILE * to the m_getfld_state struct so that most
    functions don't need to pass it explicitly.  Note that
    m_getfld() must still be passed the FILE * because some
    callers, e.g., those in mhparse.c, reopen their input file
    and therefore pass different FILE *'s for the same input.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 19 08:00:03 2013 -0600

    Moved all file static data in m_getfld.c into the
    m_getfld_state struct.  Changed MSG_INPUT_SIZE from
    hard-coded number to BUFSIZ.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 19 06:54:10 2013 -0600

    Added check of -pack to test-pop.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 18 19:19:00 2013 -0600

    Fixed test-header to work on Cygwin, which has a BUFSIZ of
    only 1024.  That caused an error message to be truncated.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 18 16:03:26 2013 -0500

    Beginning of implementation of new argsplit() function to handle arguments
    to profile-defined commands.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 17 21:58:50 2013 -0600

    Removed all traces of m_getfld() FLDEOF and BODYEOF states.
    They were never set by m_getfld(), so all caller code that
    supported them was completely unexercised.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 17 21:46:54 2013 -0600

    Minimized message files reads in m_getfld() when the caller
    interleaves calls to fseek().  Added check of handling of
    long header field name without a colon to test-header.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 17 20:58:25 2013 -0600

    Added test-msg-buffer-boundaries.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 16 22:02:12 2013 -0600

    More cleanup of m_getfld(), changed some variable names.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 16 21:48:11 2013 -0600

    Added check of header field body with more than 511
    characters to test-inc-scanout.  Also changed a couple of
    test message files to be generated on the fly.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 16 20:13:04 2013 -0600

    Cleaned up m_getfld() code a bit.  The most notable change
    was to remove the check for mmdlm2 not being null.  It's
    global data so that shouldn't happen.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 15 22:56:33 2013 -0600

    Added check of a header with name that's 998 bytes long to
    test-header.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 15 20:11:41 2013 -0600

    Removed the for-loop that was used to get a header field
    name in m_getfld ().  It was no longer necessary when not
    drawing directly from the stdio buffer.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 15 19:38:16 2013 -0600

    Check that a character array isn't empty before looking for its
    next-to-last element.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 15 18:14:46 2013 -0600

    In build_nmh, removed configuration of pager and editor.
    And replaced use of which(1) with a self-contained function.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 15 15:30:17 2013 -0500

    Support the VISUAL and EDITOR environment variables, and remove support
    for configuring a default editor with --with-editor.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 15 13:22:13 2013 -0500

    Remove the --with-pager configure option and replace it with a default
    of "more".

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 22:05:38 2013 -0600

    Renamed a couple of m_getfld auxiliary functions.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 21:34:08 2013 -0600

    Cleaned up m_getfld's read_more().

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 21:05:22 2013 -0600

    In m_getfld(), fixed the loop that handles the FLDPLUS case.
    In Getc(), removed the increment of the byte count at EOF,
    it didn't seem correct or necessary.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 20:58:56 2013 -0600

    m_getfld() now supports interleaving calls with
    fseek()/ftell().  Reverted the changes to uip/mhparse.c of
    commit 484eb1003ae647e4b751e4d7829c7daf44fb99c9 because
    they're no longer necessary.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 09:45:23 2013 -0600

    Moved test of empty header field from
    test/inc/test-inc-scanout to test/bad-input/test-header.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 14 09:41:50 2013 -0600

    Cleaned up a bit.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 13 21:56:07 2013 -0600

    Added support for m_getfld() callers interleaving fseek() calls
    with their m_getfld() calls.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 13 11:08:28 2013 -0600

    Added bytes_read to m_getfld() buffer state.  This is the
    next step in supporting ftell()/fseek().

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 13 09:43:15 2013 -0600

    Removed unused local char_read from forwsbr.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 13 09:17:47 2013 -0600

    Added check of m_getfld() handling of fields with trailing
    whitespace to test-inc-scanout.'

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 12 11:14:45 2013 -0600

    Removed "sleazy hack" of negative bufsz because commit
    05d8af21d26673279a1ca079ad9c6f301426fe0e removed the only
    use of it.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 12 10:58:31 2013 -0600

    Cleaned up FLDPLUS handling in m_getfld().  As part of this,
    removed the backing up of the read pointer in the "something
    went wrong" portion of the FLD handling.  It had been moved
    back two positions.  The first is no longer necessary
    because a Getc() was replace by a Peek(), and the second
    caused the extra blank line noted in the old comments.
    Updated the expected output in test/bad-input/test-header to
    correspond.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 12 09:23:19 2013 -0600

    Fixed addition to test-inc-scanout in
    683e0fb1a14da5b9ce7bc5db6e76951d14d79348 to not depend on
    current date.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 12 09:21:59 2013 -0600

    Very minor cleanup to m_getfld() to remove an increment of j.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 11 11:13:44 2013 -0500

    We never use the autoconf checks for errno.h, crypt.h, or netdb.h, so
    remove them.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 11 11:07:51 2013 -0500

    At this point we're assuming at least C89 support, so there's no reason
    we should check for support for const and standard header files.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 10 22:52:59 2013 -0600

    Started revising m_getfld() code to replace direct buffer
    access with Getc().  The goal is to again support fseek()
    after return from m_getfld().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 10 14:18:15 2013 -0500

    Convert the MIME content cache switches over to the smatch() New World Order.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 10 08:00:20 2013 -0600

    Added explicit third initializer to some swit struct values
    to silence gcc -Wmissing-field-initialziers warning.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 9 22:04:23 2013 -0500

    Convert all argument processing over to using X-Macros for cleanup.
    Based on a suggestion by Ralph Corderoy.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 9 20:58:03 2013 -0600

    Added comments to and started cleaning up m_getfld.c.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 9 20:50:58 2013 -0600

    When read_more() loads more bytes, save some from the end of the
    current chunk and move them to the front of the buffer.  This
    allows backing up of the current position, which is necessary when
    looking for the message delimiter in a maildrop file.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 7 17:41:27 2013 -0500

    Fix bug where a "cur" sequence that was outside the folder allocation limits
    could trigger a core dump on some systems.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 6 15:04:24 2013 -0600

    Removed support for #ifdef LBL.  It was broken anyways,
    sometime between MH 6.8.5 and the Apr 1999 entry into CVS.
    Also removed the addtoseq format function that could only be
    accessed with it.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 6 09:38:21 2013 -0600

    Fixed test-utf8-body to actually contain the UTF-8 character
    instead of the single byte, 8-bit character.  This was caught
    using Heirloom shell with a UTF-8 locale:  when it wrote the
    test draft from a here document, it converted the single byte
    character to UTF-8.  This verifies that behavior:
    
    LANG=en_US.utf-8 /usr/lib/heirloom/5bin/sh -c "od -x <<EOF
    `printf '\xA1'`
    EOF
    "

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 5 09:55:35 2013 -0600

    Expanded warning message for invalid Content-Transfer-Encoding.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 4 18:50:06 2013 -0600

    Added reference to RFC-1864 to mhbuild man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 4 15:12:15 2013 -0500

    Remove support for -ebcdicsafe/-noebcdicsafe switches in various utilities.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 4 15:03:32 2013 -0500

    Create a dependency for mh-chart.man on all of the man page sources so
    it gets rebuilt correctly if the man pages change.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 3 22:33:42 2013 -0600

    Block SIGPIPE before killing the child in sm_end().  This replaces
    the discard() calls that were removed in commit 4548a3ecc4248a1d4.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 3 22:32:28 2013 -0600

    Removed discard() call in post(8).  It was only used with -debug
    and seemed to serve no useful purpose any more.  Its comment
    said that it was needed to help the loader.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 3 21:59:44 2013 -0600

    In cpstripped() and cptrimmed(), if a multibyte character is
    found, only count it as taking up one character in the
    destination buffer (if it has enought room).  This way,
    scan(1)'s output won't be jagged if there are any subjects,
    for example, that have multibyte characters.
    
    Added a test for this to test-scan-multibyte, and moved the
    test for an invalid multibyte sequence from test-scan to it.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 3 21:51:56 2013 -0600

    Removed empty file name .null from the historical mh-6.8.5 tree.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 2 20:07:43 2013 -0600

    Fixed decoding of header fields when they contain a character that
    can't be converted.  Added test case to test-scan.  valgrind also
    noticed that things went amiss.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 2 18:13:59 2013 -0600

    Remove test .netrc file at the end of test-pop.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 2 15:23:29 2013 -0500

    Switch to using native automake rules for cscope.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 22:06:33 2013 -0500

    Change TLS support to only link the TLS libraries with the programs that
    need them.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 02:40:30 2013 -0500

    Clean up (and hopefully improve) the autoconf iconv tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 01:50:06 2013 -0500

    Still MORE autoconf cleanup.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 01:27:08 2013 -0500

    Autoconf/automake cleanup

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 01:01:32 2013 -0500

    Document removal of --enable-nmh-debug

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 1 01:00:03 2013 -0500

    Finally deprecate --enable-nmh-debug

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Dec 30 20:17:01 2012 -0500

    Note changes to autoconf requirements here.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Dec 30 19:40:42 2012 -0500

    We are now requiring autoconf 2.68 and automake 1.13.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 30 12:19:47 2012 -0800

    Note that the minimum required version of automake is 1.12.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 30 09:38:46 2012 -0800

    Ignore top-level ar-lib file.
    
    This is detritus from the AM_PROG_AR macro I added to configure.ac.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 30 01:27:49 2012 -0800

    Add an AM_PROG_AR program check to configure.ac  This quells a
    warning when configuring on FreeBSD 10.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 27 13:53:33 2012 -0600

    Corrected fseek() emulation to fix test/bad-input/test-header.

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 27 09:51:09 2012 -0600

    Replace use of ftell() in mhparse.c:get_content() by keeping track
    of bytes read by m_getfld().

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 26 14:03:20 2012 -0600

    Tweaked last commit to test/common.sh.in to eliminate a mv.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 26 11:09:28 2012 -0600

    Added note about PATH when running "make check" on Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 26 11:04:23 2012 -0600

    Fixed test-slocal to work with mmdfldir set to /dev/null, and on
    Cygwin, which needs the full path to tee(1).

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 26 09:52:12 2012 -0600

    Restored an explicit refill of the buffer in m_getfld() that I
    removed in the big stdio cleanup.  Its need is shown by reducing
    the message buffer size to 2048.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 25 19:25:43 2012 -0600

    Removed call to fpurge() and its platform-specific emulations
    from discard.c.  discard() is called on stdout from mhl(1) and
    msh(1) in interrupt handlers, and post(8) but only with -debug.
    tcflush() should do the purge when stdout is a terminal.  If
    it's a file or pipe, well, maybe some garbage could get flushed
    out.  And it's called on the streams that post uses to talk to
    its smtp server, so removed those calls because they no longer
    do anything.  And removed LINUX_STDIO define from configure.ac.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 25 11:57:31 2012 -0600

    Replaced all the stdio buffer access in m_getfld.c with a single call
    to fread() and then some almost straightforward buffer manipulations.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 25 11:57:02 2012 -0600

    Fixed formatting of last change to scansbr.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 23 09:27:03 2012 -0600

    Updated m_getfld() interface description.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 22 11:51:21 2012 -0600

    Changed bufsz argument of m_getfld() to be in-out instead of in.
    This allowed removal of the msg_count global, in turn allowing
    removal of sbr/m_msgdef.c

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 22 10:14:36 2012 -0600

    Changed msg_style and msg_delim to be file static to m_getfld.c
    instead of global.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 22 10:05:51 2012 -0600

    Changed type of name argument to m_getfld() from unsigned char *
    to unsigned char[NAMESZ].

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 22 09:51:25 2012 -0600

    Added m_getfld () interface description.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 11 23:24:19 2012 -0600

    Removed a few #ifndef JLR/#endif pairs because they're not needed.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 11 19:45:29 2012 -0600

    Removed some dead code, all inside #if 0's.  I tried to not remove
    anything useful, so there are a few #if 0's remaining.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Dec 10 20:54:15 2012 -0800

    Import a copy of Markus Schnalke's master's thesis: The Modern Mail Handler.
    
    (Added with Markus' permission.)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 10 23:23:44 2012 -0500

    Remove the peeking into the stdio internals inside of scan().  Hm, this
    was more complicated than I originally thought.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 10 16:01:59 2012 -0500

    The beginnings of a program to test format functions/files.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 9 21:26:49 2012 -0600

    Added release notes for releases 1.4 and 1.3 to tail of NEWS.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Fri Dec 7 10:27:52 2012 -0500

    mhshow:  properly treat unknown multipart subtypes as "mixed"

Author: David Levine <levinedl@acm.org>
Date:   Thu Dec 6 09:46:18 2012 -0600

    Added test of -nosequence to test-pick.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Wed Dec 5 21:47:12 2012 -0500

    pick: add -nosequence command line switch

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 3 18:45:55 2012 -0600

    Note in dist, mh-profile, and repl man pages that the @ link
    is only created with -atfile.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 3 08:54:21 2012 -0600

    Fix to 25581a94c5113eb78b2baf7110408df96efc4418: always set $editalt,
    even without -atfile.

Author: Jerrad Pierce <belg4mit@pthbb.org>
Date:   Sun Dec 2 21:02:11 2012 -0600

    Added docs/contrib/vpick.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 2 09:19:21 2012 -0600

    Cleaned up sendfiles(1) man page just a bit.

Author: Ralph Corderoy <ralph@inputplus.co.uk>
Date:   Sun Dec 2 09:05:37 2012 -0600

    Corrected the last addition to man/nmh.man.  Might be nicer to explain
    the warty truth from the off.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 1 10:53:36 2012 -0600

    Updated the TODO file.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 1 10:52:27 2012 -0600

    Copied atexit() code from fakesmtp.c to fakepop.c so that its
    pid file gets cleaned up.  Also copied the sig handler.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 30 18:42:40 2012 -0600

    Fixed formatting glitch in msh.man.

Author: Jerrad Pierce <belg4mit@pthbb.org>
Date:   Fri Nov 30 18:40:52 2012 -0600

    Added description of @folder format to nmh.man.

Merge: d6c134e b6f8e44
Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 29 15:28:12 2012 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Thu Nov 29 14:54:49 2012 -0500

    show: remove unused variable
    
    this should have been part of the previous removal of unreachable code.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Thu Nov 29 13:59:55 2012 -0500

    show:  remove unreachable code
    
    the stanza in question has been impossible to reach for some time.  i
    believe its purpose was to give a non-mh display proc full pathname
    arguments to work with.  since we've chdir'd to the folder, giving it
    message numbers (i.e., relative pathnames) is fine.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Nov 27 00:20:55 2012 -0500

    show: remove MAXARGS limit when running any of the helper procs
    
    use app_msgarg() to maintain both the msgs[] and vec[] string vectors.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Mon Nov 26 23:43:00 2012 -0500

    forw: remove MAXARGS limit when running mhlproc
    
    use app_msgarg() to maintain both the msgs[] and vec[] string vectors.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Nov 27 09:53:56 2012 -0500

    burst: eliminate use of MAXARGS
    
    use the already available app_msgarg() utility to make this easy.
    (the MAXARGS limit was highly unlikely to be exceeded, in practice.)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Nov 28 11:21:50 2012 -0500

    Update about changes to rmmproc support.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Nov 27 12:05:56 2012 -0500

    app_msgarg: de-obfuscate
    
    add some whitespace and break things up.  and add comment to reflect
    that this might be (and is) used for more than just msg parameters.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Mon Nov 26 21:00:28 2012 -0500

    Artificial argv limits.
    
    when i skimmed the code earlier, i was looking at all the uses of
    MAXARGS -- many of which are used to size local arrays.  converting
    them all to be dynamically-sized might be a fair amount of work.
    
    but looking at rmm.c, refile.c, and folder_delmsgs(), i don't think
    that issue applies.  the patch below fixes the problem, and makes
    rmmproc and refile do the right thing (well, at least, the modern
    thing).  NB: i didn't test to the limit where execvp should return
    E2BIG.
    
    as for the rest of mh -- it's certainly possible to hit the MAXARGS
    limit with other commands (show, for instance), but i suspect the
    frequency is much lower, and those, too, can be fixed as needed.
    
    paul
    
    >From 9636bc0e1697829966f51d2c301cd5d730c38c0a Mon Sep 17 00:00:00 2001
    From: Paul Fox <pgf@foxharp.boston.ma.us>
    Date: Mon, 26 Nov 2012 20:49:55 -0500
    Subject: [PATCH] rmm/refile: remove the MAXARGS limit when running rmmproc

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 26 11:25:31 2012 -0500

    Since pick now uses decode_rfc2047, we need to be sure to link in the
    iconv library (if we need it).

Author: David Levine <levinedl@acm.org>
Date:   Sun Nov 25 09:17:15 2012 -0600

    In pick(1), attempt to decode each header field as if it were
    MIME encoded.

Author: David Levine <levinedl@acm.org>
Date:   Sun Nov 25 09:06:20 2012 -0600

    In pick(1), attempt to decode each header field as if it were
    MIME encoded.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Nov 25 00:49:04 2012 -0500

    A new test for the POP support in inc.  Very simple for now, but it seems
    to at least check the basic functionality.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Nov 24 23:50:31 2012 -0500

    Add support for a -nosasl switch.

Author: David Levine <levinedl@acm.org>
Date:   Sat Nov 24 09:08:31 2012 -0600

    Fixed pick(1) to properly unfold multiple-line header fields
    by removing newlines instead of replacing them with spaces
    [Bug #15215].

Author: Bill Wohler <wohler@newt.com>
Date:   Sat Nov 24 01:41:06 2012 -0500

    The big news for this update is nmh 1.5.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 23 20:54:28 2012 -0500

    Fix the race condition with fakesmtp so it works without needing retries.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 23 19:59:37 2012 -0500

    Document changes to inc.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 23 19:58:34 2012 -0500

    Document the -port switch to inc.  Also, fix the -port switch to inc so
    it actually works.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 23 09:27:44 2012 -0600

    Added test-slocal.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 23 09:26:21 2012 -0600

    slocal used to support two different formats for three of
    its arguments:
    
      [address info sender]
      [-addr address] [-info data] [-sender sender]
    
    But it hasn't properly supported the first form since at
    least April 1999.  So, I removed that first form from the
    man page and the broken support from the code.  Score
    another for the test suite!

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 23 09:25:15 2012 -0600

    Added Message-Id to messages in test suite.

Author: David Levine <levinedl@acm.org>
Date:   Mon Nov 19 19:19:59 2012 -0600

    Fixed a couple of signed-unsigned comparisons.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Nov 20 00:47:24 2012 +0100

    Yozo TODA: fix for mhshow-charset- directives in .mh_profile being broken

Merge: ea28cc1 c616181
Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 15:31:21 2012 -0500

    Merge branch 'format-memory-rework'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 15:29:01 2012 -0500

    Make sure we strip off a newline from components we want to display (we
    were stripping off a newline from the wrong copy of the component).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 14:37:14 2012 -0500

    Convert repl to the new world format API.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 14:19:30 2012 -0500

    Support for the new world format API for comp and forw.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 14:18:55 2012 -0500

    Whoops, with the new world order we need to make sure we allocate memory
    for all strings in format instructions.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 13:48:16 2012 -0500

    Convert scan() to the new world format API.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 13:47:46 2012 -0500

    Change fmt_findcasecmp() to fmt_findcasecomp().  The new name is more
    consistent.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 12:23:16 2012 -0500

    Change API a bit.
    
    Rename fmt_addcomp() to fmt_addcomptext().
    Create new function fmt_addcompentry().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Nov 19 12:22:26 2012 -0500

    Remove unused variable.

Author: David Levine <levinedl@acm.org>
Date:   Sat Nov 17 12:05:22 2012 -0600

    Removed leading space from lines in mhbuild and rmm man pages
    to correct formatting.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 16 23:56:26 2012 -0500

    Finished work on rcvdist to convert to new world format API.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 16 23:41:10 2012 -0500

    More (and hopefully for now) the final cleanup for mhl.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 16 23:22:23 2012 -0500

    Basic support for the new world API; seems to work!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 16 23:21:54 2012 -0500

    Add missing functions for manipulating component text.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 16 23:20:28 2012 -0500

    Fix up documentation a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 21:47:59 2012 -0500

    Partial work for mhl; still more stuff to do.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 21:47:36 2012 -0500

    Fix missing argument to fmt_free().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 15:53:24 2012 -0500

    Beginnings of conversion of code to new format interface.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 15:50:46 2012 -0500

    Update documentation to match code change.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 14:21:20 2012 -0500

    Fix a few bugs:
    
    Make sure to add a ref when adding to the hash table.
    Forgot the increment the format array inside of fmt_free().
    Marked an allocated string when doing FT_LIT.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 13:30:30 2012 -0500

    Add some comments to explain how format loop support was supposed to work.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 11:05:55 2012 -0500

    Add refcounting to struct comp.
    Move CHASH and FINDCOMP into fmt_compile.c to make private.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 09:19:36 2012 -0500

    Beginnings of the changes to fmt_compile for memory rework.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Nov 15 09:18:11 2012 -0500

    Update with new functions and comments describing them.

Author: David Levine <levinedl@acm.org>
Date:   Wed Nov 14 08:47:14 2012 -0600

    Removed support for zip from sendfiles.  I added it as part of the
    sendfiles rewrite, f8baa5a34335fc0fc8ccabfabc601d0af73ab769, a few
    weeks ago.  But because sendfiles fed zip from standard input, zip
    would use Zip64 extensions.  That would require unzip 6.0 or later
    to extract, according to the zip man page.  But current MacOS X
    uses unzip 5.52, so it broke there.

Author: David Levine <levinedl@acm.org>
Date:   Tue Nov 13 22:35:57 2012 -0600

    1) Don't bother checking stderr output from sendfiles because tar's
       output format isn't standardized.
    2) Added -c to uncompress.

Author: David Levine <levinedl@acm.org>
Date:   Tue Nov 13 22:32:22 2012 -0600

    Updated scan.highlighted to feed an expression to %(zputlit).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Nov 13 22:23:02 2012 -0500

    Make sure we stick to POSIX-sed only.  I _think_ this portable enough to
    work everywhere.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Nov 13 18:53:55 2012 -0500

    Change %(putlit) and %(zputlit) to take TF_EXPR instead of TF_STR.  This
    was originally my fault; TF_STR means a string literal as an argument, but
    the documentation (and the code) really means for it to take an expression.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 9 15:02:53 2012 -0600

    Updated test-scan to correspond to commit
    112b90c43391644f24559f5aa58752214de0e8a5.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Fri Nov 9 14:53:21 2012 -0600

    Added ml script to docs/contrib.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 9 14:39:59 2012 -0600

    Refer to just "root" in slocal man page.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Fri Nov 9 14:37:59 2012 -0600

    Added ml script to docs/contrib.

Author: David Levine <levinedl@acm.org>
Date:   Wed Nov 7 16:48:05 2012 -0600

    In scan.highlighted, set black background on the colorized lines
    to enhance visibility if the user has a light background.

Author: David Levine <levinedl@acm.org>
Date:   Tue Nov 6 18:43:42 2012 -0600

    Removed note from BUGS section of several man pages saying
    that command line arguments must be quoted for protection from
    the shell.  That's not a bug, and has nothing to do with nmh.
    
    Changed "back-quoted" to "backquoted" for consistency in a few
    man pages.

Author: David Levine <levinedl@acm.org>
Date:   Tue Nov 6 18:42:45 2012 -0600

    Fixed typo in mhn.man.

Author: David Levine <levinedl@acm.org>
Date:   Mon Nov 5 13:10:16 2012 -0600

    Fixed typo in mh-format man page description of zputlit.

Author: David Levine <levinedl@acm.org>
Date:   Mon Nov 5 11:25:33 2012 -0600

    Added application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
    for .xlsx files.

Author: David Levine <levinedl@acm.org>
Date:   Sun Nov 4 20:58:47 2012 -0600

    Added format support for zputlit function escape.  It requires
    that the str contents have zero display width, such as for
    terminal escape sequences.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Nov 3 19:22:49 2012 -0700

    nmh.7 isn't the place to advise people how to change their $PATH.

Author: David Levine <levinedl@acm.org>
Date:   Sat Nov 3 08:13:34 2012 -0500

    Fixed comparison to be signed instead of unsigned.

Author: David Levine <levinedl@acm.org>
Date:   Sat Nov 3 07:37:40 2012 -0500

    Added description of "all" range abbreviation.

Author: David Levine <levinedl@acm.org>
Date:   Fri Nov 2 22:45:07 2012 -0500

    Added argument to fmt_scan() to specify the buffer size.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 28 22:35:45 2012 -0500

    Updated date on sortm(1) man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 28 13:21:46 2012 -0500

    Updated build-nmh-cygwin for release of Cygwin nmh 1.5-2.  To use:
    1) Change VERSION to 1.5-2.
    2) make dist
    3) Symlink build-nmh-cygwin to nmh-1.5-2 and run that with "all".

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 27 12:36:29 2012 -0500

    Fixed typo reported by Ralph.
    
    I also should have mentioned in the commit message for
    sortm(1) -check/-nocheck that Norm proposed their addition.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 27 12:18:45 2012 -0500

    In test-post-common.sh and test-mhmail, wait for fakesmtp to start
    for up to 40 seconds.  10 seconds wasn't long enough when I leaned
    on my machine.  Also, print out a message if exiting due to that
    timeout.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 27 12:14:01 2012 -0500

    Added -check/-nocheck switches to sortm(1).  Also removed obsolete
    note in the BUGS portion of its man page about how it sorts messages
    that are missing or have an invalid Date: field.  It actually sorts
    them using their file modification times.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 23 19:18:20 2012 -0500

    Fixed typo in Cygwin section of MACHINES.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 23 19:16:56 2012 -0500

    Cyrus SASL 2.1.25 introduced the sasl_callback_ft prototype,
    which has an explicit void parameter list, according to best
    practice.  So we need to cast to avoid compile warnings.
    And provide a sasl_callback_ft prototype for earlier versions.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Oct 21 12:39:43 2012 -0700

    Clarify that manpage references use the .IR macro everywhere.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Oct 21 12:38:40 2012 -0700

    Fix one last missed %nmhdate% substitution.
    
    Remove empty CONTEXT section.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Oct 21 12:37:49 2012 -0700

    Remove %nmhdate% substitution from man.sed.  It's no longer used.

Merge: 9dedfb1 cbaaccc
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Oct 21 12:33:21 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 21 12:02:40 2012 -0500

    Corrected date in sendfiles.man

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 21 09:52:46 2012 -0500

    Updated sendfiles(1):
    1) Added -from switch.
    2) sendfiles will now construct a From address, using the sender's
       localmbox, if the user does not specify it with -from or the PERSON
       environment variable.
    3) Added support for bzip2, lzma, and zip compression methods.  Added
       a new switch to select the method:  -compress <method>.  Because
       support for the old -compress with was broken (it did not use
       -c with compress/uncompress) and it was undocumented, it has
       been replaced.  Retained old -gzip and -none switches for backward
       compatibility even though they were undocumented.
    4) Allow the recipient argument to be preceded by the optional -to
       switch iff the subject argument is preceded by the optional
       -subject switch.  Allow the delay value to be specified using the
       optional -delay switch.
    5) Added -version and -help switches.
    6) All switches can now be abbreviated.
    
    /etc/sendfiles no longer needs to be configured.  It's easier to
    support make distcheck by having it figure out its path at runtime.
    
    In viamail, set postproc to post in the same directory as itself, if
    invoked with a full path.  This allows it to support make distcheck.
    viamail does not read the profile so its postproc is otherwise
    hard-coded at compile time.
    
    Added test-sendfiles.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Oct 20 16:51:01 2012 -0700

    Update the manpage style guide.

Merge: d1cb667 a69289c
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Oct 20 15:02:16 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Oct 20 14:42:32 2012 -0700

    Rationalize .TH manpage macro invocations.
    
    This patch addresses the following issues with .TH macro usage:
    
      .TH COMP %manext1% "%nmhdate%" MH.6.8 [%nmhverion%]
    
    1) "MH.6.8" is no longer relevant.
    
    2) %nmhdate% is a hardwired value that only gets updated along with
       %nmhversion% and is therefore redundant.
    
    This patch nukes the MH.6.8 tag, and replaces the hardwired
    %nmhdate% field with the latest date the associated manpage has
    been updated.  I pulled the dates - as best I could - from the
    git logs.
    
    Going forward, it is incumbent on developers to update the
    manpage date stamps as they update the pages themselves.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 20 16:40:06 2012 -0500

    Cleaned up a couple of shell variables.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 20 16:39:25 2012 -0500

    Fixed the trap to work with posh.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 20 10:41:43 2012 -0500

    Fixed printf's in test suite.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 20 07:44:34 2012 -0500

    Fixed the trap in mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Fri Oct 19 14:23:17 2012 -0500

    Cleaned up uip/mhmail.  Added chmod +x of spost in configure.ac.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 20:18:03 2012 -0700

    Manpage cross-reference cleanups:  convert '.BR cmd (section)' to '.IR cmd (section)'
    throughout the text.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 19:48:02 2012 -0700

    A couple more manpage typo cleanups.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 19:45:38 2012 -0700

    Typo.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 19:39:37 2012 -0700

    Manpage SEE ALSO cleanup.
    
    Convert to '.IR cmd (section)' format for manpage references.
    
    Fixed a couple of inline '.BR cmd (section)' instances as well.
    
    Removed HISTORY from new(1); this stuff doesn't belong in manpages.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 18:20:18 2012 -0700

    Elide spurious empty lines in manpage source files.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 17:29:30 2012 -0700

    Ensure the .TH macro is the first line of the manpage source files. Some
    versions of man(1) get upset if .TH doesn't come first.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 17:08:17 2012 -0700

    Update the manpage authors guide, primarily for .TP, but also fixes
    a couple of other incorrect style recommendations.
    
    These updates are incomplete ... more to follow.

Merge: 956ddac e2d655d
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 16:40:17 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 16:32:48 2012 -0700

    Incorporate Paul Fox's changes that group the commands by functional groups.
    
    Move the "generated code" warning comment below the .TH macro to work around some buggy
    man(1) implementations.
    
    Removed all the .RS/.RE indenting and replaced the use of .fc and tab indenting
    with .TP macros.
    
    Move the BUGS section below SEE ALSO to follow the usual section ordering convention.
    
    Fixed up some italic vs. bold usage.
    
    Use '.IR foo (section)' in the SEE ALSO section.
    
    Removed some irrelevant text, along with a small amount of word-smithing.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 16 14:53:04 2012 -0500

    Unset PAGER in test/common.sh so that make distcheck passes.

Merge: a7b486a 342e355
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 12:39:59 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 12:36:30 2012 -0700

    Add new make targets 'man' and 'cleanman' to build and clean just
    the man/ sub-directory.  I also removed the '@' supressors for the
    internal manpage targets.  There's no net benefit to hiding this stuff.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 16 13:27:32 2012 -0500

    Cleaned up some printf's.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 16 13:23:43 2012 -0500

    Updated sendfiles(1) man page to reflect upcoming code update.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Oct 16 11:12:27 2012 -0700

    Some version of man(1) barf if the first line of the manpage is not
    the .TH macro.  Re-order the generated mh-chart.man so that the 'auto-generated'
    comment appears after the .TH macro.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Oct 15 17:08:29 2012 -0700

    Slightly reformat the FINDCOMP macro to quell a clang warning about
    an empty for()-loop body.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Oct 15 17:06:40 2012 -0700

    automake 1.12 generates some (apparently) harmless warnings, but the build
    fails becuase we invoke automake with -Werror.  Remove -Werror from the
    automake options until the autotools gurus can patch things up.

Merge: 5548c9a 47dca82
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Oct 15 15:22:39 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Oct 15 15:21:48 2012 -0700

    Allow $PAGER to override the compiled-in default pager command.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 14 21:13:05 2012 -0500

    Removed unused function seek_home().

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 14 19:27:17 2012 -0500

    The first alias contained in a blind list is now expanded.  The
    mh-alias(5) man page was updated to show that blind lists must not
    be terminated with, or contain, a trailing semicolon [Bug #15604].

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 14 19:02:43 2012 -0500

    Changed error message to say that blind lists aren't
    compatible with sendmail/pipe.

Author: Ralph Corderoy <ralph@inputplus.co.uk>
Date:   Sun Oct 14 18:59:06 2012 -0500

    Fixed "mark -sequence cur -delete all" to work for cur as
    well as any other sequence, to allow clearing of the current
    message indication.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 13 18:00:39 2012 -0500

    Don't allow blind aliases with sendmail/pipe mts.  Before this change,
    they would be fed to sendmail, which would reject them anyway.  This
    change catches that in post and presents a more helpful error message
    to the user (at the "What now?" prompt, if used).
    
    A possible future enhancement might be, with sendmail/pipe, to expand
    out blind aliases and put the addresses in Bcc: header fields, but
    then the recipients would get messages with the Blind-Carbon-Copy
    indication.  (Note that Dcc isn't supported with sendmail/pipe,
    either.)
    
    Just for information:  old spost fed the addresses of blind aliases to
    sendmail, making them visible to all recipients.  Oops.

Author: David Levine <levinedl@acm.org>
Date:   Sat Oct 13 09:56:08 2012 -0500

    Removed potential buffer overflow in ali.c by replacing array of
    hard-coded maximum size with dynamically-sized array.

Author: David Levine <levinedl@acm.org>
Date:   Thu Oct 11 23:00:43 2012 -0500

    Fixed sortm(1) verbose message and man page to reflect that with
    -limit 0, the sort is only on the text field.

Author: David Levine <levinedl@acm.org>
Date:   Thu Oct 11 21:48:42 2012 -0500

    Added -noall/-all switches to sortm(1).

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 7 22:55:33 2012 -0500

    Fixed typo in mh-alias man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 7 11:25:01 2012 -0500

    Added newline to "send" that's piped to dist.  Old 2.6 Linux
    needs it.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 7 10:31:12 2012 -0500

    Added test-anno, test-dist, test-msgchk, and test-rcvtty.

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 7 10:27:31 2012 -0500

    Changed nmh-fcc to fcc.  See etc/forwcomps.  Another catch by the
    test suite!

Author: David Levine <levinedl@acm.org>
Date:   Sun Oct 7 10:18:54 2012 -0500

    Updates to test/common.sh.in:
    1) Added function check_for_hard_links.  Moved this code out of
       test-refile so that other tests can use it.
    2) Added mmdfldir and mmdflfil settings to the mts.conf for tests, to
       support test-msgchk.

Author: David Levine <levinedl@acm.org>
Date:   Sun Sep 23 09:02:18 2012 -0500

    Removed double quotes around case arguments in test scripts.

Author: David Levine <levinedl@acm.org>
Date:   Sun Sep 23 09:00:11 2012 -0500

    When determining the path of the script inside mhmail, handle case
    where $0 is just the script name, without any directory.  Bourne
    shell does that if the script is found using PATH.

Author: David Levine <levinedl@acm.org>
Date:   Tue Sep 18 22:18:21 2012 -0500

    Disabled echo of rm -f lines in Makefile to quiet builds and
    installs a bit.

Author: David Levine <levinedl@acm.org>
Date:   Tue Sep 18 22:00:00 2012 -0500

    Replaced spost with script that exec's post -mts sendmail/pipe.

Author: David Levine <levinedl@acm.org>
Date:   Mon Sep 17 19:42:27 2012 -0500

    Removed mhmail.c because it was no longer needed and could get in
    the way of make if its timestamp was newer than that of the mhmail
    script.  Thanks to Johan Viklund for reporting this.

Author: David Levine <levinedl@acm.org>
Date:   Sun Sep 16 23:12:19 2012 -0500

    For the mhstore -clobber test, cd to the Mail subdirectory so that
    the stored files will get cleaned up by the exit trap in common.sh.

Merge: b471d7a 2b7b705
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Sep 16 14:39:27 2012 -0700

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Sep 16 14:38:54 2012 -0700

    Fix a comment typo.

Author: David Levine <levinedl@acm.org>
Date:   Sun Sep 16 13:54:23 2012 -0500

    With mhstore -clobber auto/suffix, when looking for a new filename,
    actually open(2) the file with O_CREAT | O_EXCL to avoid the race
    condition when figuring out the filename first and opening it later.

Author: David Levine <levinedl@acm.org>
Date:   Sun Sep 16 12:45:12 2012 -0500

    Added "-d --" to invocation of ls when figuring out what files
    to attach in whatnow.

Author: David Levine <levinedl@acm.org>
Date:   Sat Sep 15 21:18:38 2012 -0500

    Fixed description of n with mhstore -clobber auto/suffix.

Author: David Levine <levinedl@acm.org>
Date:   Sat Sep 15 14:07:07 2012 -0500

    Clarified description of clobber -auto/-suffix per Ralph's suggestion.

Author: David Levine <levinedl@acm.org>
Date:   Sat Sep 15 13:40:50 2012 -0500

    Added -clobber switch to mhstore(1) [Bug #11160].

Author: David Levine <levinedl@acm.org>
Date:   Sat Sep 15 13:14:18 2012 -0500

    Changed ; to && in shell command, per Ralph's suggestion.  There
    were two remaining places that still used ";".  Though they
    weren't of consequence, it's the right thing to do.

Author: David Levine <levinedl@acm.org>
Date:   Sat Sep 15 08:24:37 2012 -0500

    Allow whatnow to accept "l" as an abbreviation for "list", instead of
    requiring at lest "li".

Author: David Levine <levinedl@acm.org>
Date:   Fri Sep 14 20:46:02 2012 -0500

    Filter out all Nmh-* headers in post(1).  Do that silently for empty
    ones (no header body), and warn about non-empty ones.

Author: David Levine <levinedl@acm.org>
Date:   Fri Sep 14 17:05:24 2012 -0500

    Added check in send(1) of attach (default Nmh-Attachment) headers to
    ensure that only plain files are attached.  Otherwise, it is a fatal
    error.  Note that whatnow's attach will continue to allow attachment
    of directories because it expands those out to their contents.  It
    doesn't check what the contents are, though.  That's why we needed to
    add this check.
    
    Also added a check to skip attach headers that are empty so that
    they can be put in drafts, per Norm's request.

Author: David Levine <levinedl@acm.org>
Date:   Tue Sep 11 08:44:43 2012 -0500

    Updated docs/README-ATTACHMENTS, mainly to reflect that no setup is
    required with nmh 1.5 and beyond.  And the user documentation is in
    the send(1) and whatnow(1) man pages.

Author: David Levine <levinedl@acm.org>
Date:   Tue Sep 11 08:42:58 2012 -0500

    Added references to the whatnow(1) man page description of its
    attach support to the nmh(7) and send(1) man pages.

Author: Eric Schnoebelen <eric@cirr.com>
Date:   Fri Aug 31 09:49:37 2012 -0400

    Move chdir() call so -recurse option works again.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Aug 31 09:46:03 2012 -0400

    New test for folder -recurse

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Aug 23 10:08:59 2012 -0400

    Change the Bcc: code in post so it includes the From: header from the original
    message.

Author: David Levine <levinedl@acm.org>
Date:   Fri Aug 17 19:31:22 2012 -0500

    Cleaned up message_id().

Author: David Levine <levinedl@acm.org>
Date:   Fri Aug 17 19:29:49 2012 -0500

    Removed chmod of bccfil from make_bcc_file().  It was done before
    bccfil was defined so it had no useful effect.  m_mktemp2() sets
    the umask so it wasn't necessary, anyway.

Author: David Levine <levinedl@acm.org>
Date:   Fri Aug 10 05:20:25 2012 -0500

    Cleaned up test-utf8-body a bit.

Author: David Levine <levinedl@acm.org>
Date:   Fri Aug 10 03:33:38 2012 -0500

    Added mhbuild: -nocontentid to profile used for tests, to simplify
    output checking.

Author: David Levine <levinedl@acm.org>
Date:   Thu Aug 9 17:13:38 2012 -0500

    Added default_content_type argument to
    make_mime_composition_file_entry().  It's used only to force message
    bodies to always use text/plain content type, which allows mhbuild to
    do the right thing with them.  Thanks to Steve Rader for reporting
    that UTF-8 characters in message bodies had previously caused them to
    be encoded as octet-streams (with attachments managed by send), and to
    Ken for coming up with the fix.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 23 18:17:11 2012 -0500

    Removed nmh-from condition from rcvdistcomps.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 22 20:19:19 2012 -0500

    Fixed explanation of why the unset SHELL test is uselessif /bin/sh is bash.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 22 12:04:47 2012 -0500

    Reworked test-rcvdist so that it sees the output of post.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 22 12:03:36 2012 -0500

    Added test of whatnow with SHELL unset to test-ls, though it doesn't
    reveal anything on Linux, at least.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Sun Jul 22 12:01:00 2012 -0500

    whatnow cooks up strings for executing external commands, and then
    feeds these strings to popen or system.  These command strings rely on
    $SHELL being present - and if that is not the case, then we get weird
    error messages ("sh: -c not found" or similar).  (Because both
    system() and popen() start up fine with the std shell, but their arg
    string to parse doesn't include a cmdname/path before the -c.)
    
    As far as i understand the POSIX standard, SHELL is recommended but
    not actually mandatory, so i think it would be good to handle this a
    bit more robustly: by setting SHELL to /bin/sh if not present.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 20:00:14 2012 -0500

    Tidied up for loop in message_id().

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 19:45:48 2012 -0500

    With -messageid random, make the part after the @ more resemble a
    hostname by inserting a couple of dots, and using - and _ instead of
    + and /.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 16:17:41 2012 -0500

    Added -messageid switch to send(1) and post(8).  This allows selection
    of the style to use for generated Message-ID and Content-ID header
    fields.  The default localname style is pid.time@localname, where time
    is in seconds, and matches previous behavior.  The random style
    replaces the localname with some (pseudo)random bytes and uses
    microsecond-resolution time.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 12:42:14 2012 -0500

    Here's a better test of Resent-From: in test-rcvdist:  use the user's
    actual localmbox.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 12:19:18 2012 -0500

    Added check to notpost for presence of Resent-From:.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 12:01:41 2012 -0500

    If post or send fail, exit with their exit status.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jul 21 11:58:57 2012 -0500

    Removed #ifndef RAND/#endif that no longer had any effect.

Author: Harvey Eneman <harvey.eneman@oracle.com>
Date:   Sat Jul 21 11:57:29 2012 -0500

    Fixed the default rcvdistcomps and rcvdistcomps.outbox to to insert
    the Resent-From: header.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 15 13:35:42 2012 -0500

    Removed debugging statement and added comments to the duplicate check
    of readconfig ().

Author: David Levine <levinedl@acm.org>
Date:   Wed Jul 11 21:37:39 2012 -0500

    Added -mts switch to post, send, and whom.  Replaced test-sendmail-pipe
    with test-mts.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 9 22:49:59 2012 -0500

    Removed -m from sendmail invocation with sendmail/pipe.  Modern
    sendmail and postfix, at least, ignore it.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 9 21:25:36 2012 -0500

    Correction to previous commit, 704bdde497da69854846d51d86c440fc980c5489,
    to restore the behavior when using SMTP and with any blind addresses.
    Don't quit the SMTP session between sending the message and bcc's, but
    instead reset it.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 9 19:47:47 2012 -0500

    Removed use of the ONEX sendmail verb.  It is obsolete,
    according to http://smtpfilter.sourceforge.net/esmtp.html.
    And was removed over 10 years ago from sendmail (8.12),
    according to http://www.irbs.net/internet/postfix/0111/2237.html.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jul 9 19:15:13 2012 -0500

    Renamed "sendmail" mts method to "sendmail/smtp", allowing "sendmail"
    as an alias.  Renamed "pipe" to "sendmail/pipe".

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 8 23:17:04 2012 -0500

    spost(8) has been merged into post(8).  Its functionality is
    enabled by selecting the "pipe" mail transport method in
    etc/mts.conf, which in turn can be configured using
    --with-mts=pipe.  The spost -noalias, -backup/-nobackup,
    -push/-nopush, and -remove/-noremove switches are not
    supported by post.  Note that spost did not support -whom or
    Dcc, and neither does post when using mts: pipe.  spost is
    now deprecated.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jul 4 09:57:49 2012 -0500

    Added test-packf.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jul 4 07:27:15 2012 -0500

    test-prompter:  removed an unused input that was piped to the
    program because it sometimes caused printf to complain about a
    write error.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jul 3 20:50:23 2012 -0500

    Filtered out "From " lines when comparing mboxes because their
    timestamps sometimes differed by a second.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 20:20:42 2012 -0500

    Updated pending-release-notes.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 19:24:36 2012 -0500

    Rather than fix the reported bug, backslash in commented lines
    in alias file is interpreted, I documented that behavior in
    the mh-format man page and etc/MailAliases.  This behavior is
    unfortunate, but it is a result of the implementation of nmh's
    vfgets() function.  That function is used by other callers
    that expect the behavior.  [Bug #23553]

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 19:20:22 2012 -0500

    Added test-dp, test-fmtdump, test-prompter, test-rcvstore,
    test-rcvpack, and test-rcvdist.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 16:44:43 2012 -0500

    Applied patch #5571, Propagate Mail-Followup-To.
    
    Also clarified man page:  replgroupcomps won't be used if you
    specify another forms file on the command line or in your profile.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 10:21:22 2012 -0500

    Added note that mhmail does not read context file itself.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 10:09:06 2012 -0500

    Removed unused #ifdef NRTC and reference to its contents in the
    rcvdist man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 09:14:27 2012 -0500

    Updated man page descriptions of Msg-Protect:  it defaults to 0600 and
    is not supported on some filesystems, such as FAT32.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jul 1 08:32:18 2012 -0500

    Wrapped some shell variables with quotes so the tests have a chance of
    running if the current directory has a character such as a space in
    it.  Though the tests themselves need the same help for them to work.
    Also, added mention of Heirloom shell to test/README.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 28 21:59:47 2012 -0500

    Replaced utilities that operate on pbm files with those that operate
    on pnm files, per the bug report referenced below (from Dec 2005!).
    And changed the mhshow-show-image/x-pbm mime type to
    mhshow-show-image/x-pnm.  [Bug #15152]

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 28 21:19:06 2012 -0500

    Removed BUGS section at end of rcvstore(1) man page.  It
    said to not use rcvstore if you use the "Unseen-Sequence"
    profile entry because the context (sequences file, actually)
    could be corrupted if multiple nmh processes tried to update
    it simultaneously.  The locking added by commit
    82a21b6f3cddf8ab048dcb02c080ea9797c73c5a serialized that
    simultaneous update. [Bug #4361]

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 28 21:12:13 2012 -0500

    Removed the one remaining unused #ifdef ISI.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 28 21:11:07 2012 -0500

    Simplified getm() a bit, removing a goto.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 28 20:59:23 2012 -0500

    Fixed ismymbox() to look at Local-Mailbox as well as
    Alternate-Mailboxes.  The problem was that when an alternate
    mailbox was added to the list, the node for the local
    mailbox information was lost.  Added check to test-mymbox.
    Added test-repl, because this is where it was first noticed.
    Also enhanced output with MHWDEBUG set to show the entire
    list, not just each alternate mailbox as it is added to the
    list.  [Bug #36635].

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 25 08:42:14 2012 -0500

    Deprecated mhtest.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 25 08:21:03 2012 -0500

    Removed unused UUCPDIR and UUCPFIL #defines.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 24 22:26:27 2012 -0500

    Added test-sortm.  Also clarified some details in the sortm man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 24 19:03:05 2012 -0500

    Added status to conflict(8) man page to note that it is deprecated.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 23 09:55:01 2012 -0500

    Allow optional -to in front of To: addresses with mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 23 08:04:08 2012 -0500

    Added checks for missing mandatory arguments to mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jun 22 10:45:33 2012 -0500

    Changed -header-field to -headerfield.  And refer to its argument
    as name:value instead of name:body, to avoid the obvious confusion.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Thu Jun 21 11:11:40 2012 -0700

    Default to flock() locking on OpenBSD and Darwin.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 20 19:19:31 2012 -0500

    Refined 48959daf724bb10802ca489654035f69e701efc0 by setting up a
    LN variable in the Makefile that can be used to override the
    link command at install time.  For example, on Cygwin, LN will be
    configured to cp.  If installing on an NTFS filesystem, the user
    could install with make LN=ln to use ln instead of cp.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 20 19:16:18 2012 -0500

    Truncated -help test in test-whom because its output depends on whether
    sasl support was configured in.  It's not configured in by distcheck.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 20 09:09:24 2012 -0500

    For whatever reason, gcov got fooled by test-whom until a test of
    -help was added.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 20 08:13:46 2012 -0500

    Quoted a bunch of shell variables in build_nmh.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 21:30:54 2012 -0500

    Added test-ali.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 20:36:14 2012 -0500

    Added printout to build_nmh to report number of tests not run.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 20:15:18 2012 -0500

    Added a few clarifications and more DEFAULTS to mhmail(1) man page.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 19:54:04 2012 -0500

    Refinement to e30560d793ff5bc704dadc2eab9d31100ad4636b:  don't
    warn about profile components that are null, e.g.,
    
    : This could be a comment.
    
    or just a hash, e.g.,

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 10:29:47 2012 -0500

    Changed permissions from 0755 to 0644 on a few .c files.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 10:25:54 2012 -0500

    Forget to add test/mhmail/attachment.txt to last commit.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 19 10:13:28 2012 -0500

    Added -attach switch to mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 18 21:49:01 2012 -0500

    Moved test-mhmail to its own test directory.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 18 21:30:58 2012 -0500

    Added mention of checkbashims script to test/README.  And fixed
    false positive that it reported for test-mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 18 21:28:26 2012 -0500

    Added -header-field switch to mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 18 18:25:10 2012 -0500

    Added Jerrad Pierce's suggestion to use -editor prompter.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 17 22:56:23 2012 -0500

    Removed possible tmp file leak.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 17 22:51:51 2012 -0500

    mhmail now supports -profile -resend.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 17 20:59:16 2012 -0500

    Here's a better fix that e194fdf11df779597e19039a67454e9b42a77ef0
    for support `mhparam libdir` under "make distcheck":  explicitly
    set libdir in the profile.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 17 15:25:28 2012 -0500

    Replaced mhmail -debug switch with -nosend, and added -send.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 17 14:35:14 2012 -0500

    Added -resent support to mhmail.  It doesn't work with -profile, though.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 16 10:56:53 2012 -0500

    Fixed warning introduced by last change to man/mhmail.man.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 16 10:08:18 2012 -0500

    Removed extra [ from synopsis.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 16 09:24:29 2012 -0500

    Replaced compiled mhmail with script that was formerly named mhmail.in.
    Added test-mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 16 09:16:18 2012 -0500

    Reworked to be as compatible as possible with compiled mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jun 15 21:00:28 2012 -0500

    Added mention of mhmail as a message composition utility.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jun 15 20:53:03 2012 -0500

    Added nmh lib directory to PATH in setup_test ().  This is necessary
    with "make distcheck" for scripts to access the lib directory that it
    installs for testing.  (The distcheck target does not configure them;
    they retain their build configuration.)  If we ever add a test for
    etc/sendfiles, we'll have to deal with its configured %libdir%.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 23:28:05 2012 -0500

    Fixed temporary autoconf workaround by hard-coding nmhbindir.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 23:17:33 2012 -0500

    Add trailing newline to body, if needed.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jun 14 10:36:09 2012 -0400

    Fix test for changes to mhparam.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jun 14 10:33:21 2012 -0400

    Make the base64 encoder endian-agnostic, and remove the function
    set_endian() since it's no longer needed.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 09:10:23 2012 -0500

    Documented mhparam -debug option.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 08:54:35 2012 -0500

    If heirloom shell is in /usr/lib/heirloom/5bin/sh, use it to run tests.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 08:35:14 2012 -0500

    If post/send fail, save the draft in dead.letter, the same as
    compiled mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 14 08:30:30 2012 -0500

    Added etcdir and libdir.  And added mention that component name
    matching is case-insensitive.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Thu Jun 14 07:31:40 2012 -0500

    The base64-decoder doesn't work on 64-bit big-endian architectures:
    mhstore and co. write files of the correct length but which consist
    only of \0s.
    
    The culprit is uip/mhparse.c, which contains a pretty ugly base64
    decoder (in two places). that thing allocates a "long int" as a
    container for the 24 bits that you get from four base-64 chars. the
    container is then accessed both as a single entity and as a byte
    array, which naturally depends on how wide the long int is and in what
    order things end up in there.
    
    The code distinguishes between big- and little-endian systems but
    wrongly assumes that sizeof(long int) == 4, which isn't universally
    true (quel surprise...).
    
    The attached patch fixes the issue, but in the long run we should
    insist on posix and use a64l().

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 23:12:22 2012 -0500

    Support empty message body in mhmail.in the same way as in mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 22:59:05 2012 -0500

    Added support to mhmail.in to read message from stdin.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 22:32:46 2012 -0500

    Removed newline before generated From:.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 22:19:19 2012 -0500

    Added mhmail.in. start of a replacement for compiled mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 22:18:43 2012 -0500

    Removed unnecessary comment.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 22:16:46 2012 -0500

    Removed another faceproc relic.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 13 08:55:19 2012 -0500

    Added BUGS section to mh-tailor man file to note that failure to open
    mts.conf is silently ignored..  And added to its DEFAULTS section.
    Also changed to consistent use of "mail transport configuration file".

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 12 21:36:16 2012 -0500

    Generate a From: header, using localmbox, if the user doesn't provide
    a -from when sending with mhmail.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jun 12 21:16:34 2012 -0500

    Fixed the export of LC_ALL so that it work with old Bourne shell.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Tue Jun 12 21:06:44 2012 -0500

    Occasionally the post tests attempt to talk to fakesmtp before that
    has completly started up.  Inserted a check between starting up
    fakesmtp and talking to it, and delay and retry if necessary, to
    avoid that scenario.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Tue Jun 12 19:11:57 2012 -0500

    Changed remaining uses of MAXPATHLEN to PATH_MAX.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jun 11 22:02:55 2012 -0500

    Can't use -ansi with gcc 4.5.3 on Cygwin, at least through setup
    setup version 2.763, because it disables some features in the
    system system header files.  Added configure check, when using gcc,
    for -ansi (and don't use -pedantic without it).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jun 11 00:26:21 2012 -0400

    Fix typo in gpg command and handle the .sig file properly.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 10 22:50:24 2012 -0500

    Replaced run-time detection of hard-link support with compile- time
    detection.  This way, Cygwin packages can be built on NTFS or other
    filesystems but still bee installed on FAT file systems, which do not
    support hard links.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 10 09:58:52 2012 -0500

    Added section 7 to man pages.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 10 09:53:48 2012 -0500

    Updates to SPECS/build-nmh-cygwin:
    1) Configure with sysconfdir=/etc/nmh so to minimize pollution of /etc.
    2) Disabled install_docs because nmh's make install takes care of it.
       Though it installs in /usr/share/doc/nmh/ instead of
       /usr/share/doc/nmh-<version>/, that seems to be more common on Cygwin
       than using the -<version>.
    3) Added comments (also added to MACHINES) about the packages that would
       be needed to configure with --with-cyrus-sasl and --with-tls.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jun 10 09:51:03 2012 -0500

    Moved nmh and mh-chart man pages from section 1 to section 7.
    Alexander Zangerl noted that Debian already did this, and it
    seems appropriate.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Sun Jun 10 09:20:08 2012 -0500

    Corrected install-mh man page to show that it is installed in section 1, not 8.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Sun Jun 10 09:19:20 2012 -0500

    Ensure that writes to /dev/tty succeed to determine if it is writeable.

Author: Alexander Zangerl <exmh@bin.snafu.priv.at>
Date:   Sun Jun 10 09:18:22 2012 -0500

    Use cat for moreproc in testsuite in case it is run without tty.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jun 9 09:31:19 2012 -0500

    Added warning to all nmh programs for multiple profile entries for the
    same component.  Until now, all but the first were silently ignored.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jun 8 20:59:32 2012 -0500

    Added INSTALL, NEWS, and README to dist_doc_DATA so that they get installed.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 7 22:07:54 2012 -0500

    Changed repl and dist default to -noatfile.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jun 7 11:07:00 2012 -0500

    Removed docs/pending-release-notes-tmp, which was added by mistake.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 6 22:41:29 2012 -0500

    Removed faceproc support, deprecated in nmh 1.5.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 6 22:02:21 2012 -0500

    Removed the following environment variables, deprecated in nmh 1.5:
      MHPOPDEBUG (use -snoop command line switch instead)
      MM_NOASK (use -nolist and -nopause command line switches instead)
      NOMHNPROC (use -nocheckmime command line switch instead)

Author: David Levine <levinedl@acm.org>
Date:   Wed Jun 6 21:08:53 2012 -0500

    Changed exit status of each nmh command's -version and -help switches
    from 1 to 0.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jun 3 15:38:39 2012 -0400

    Fix incorrect documentation about the install process for files in 'etc'.
    Noted by Norm Shapiro.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jun 3 15:29:27 2012 -0400

    One more lowercase for the content-transfer-encoding.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jun 1 10:25:37 2012 -0400

    Fix off-by-one error, noticed by Ralph Corderoy.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Thu May 31 15:15:36 2012 -0400

    Implement the following changes:
    
    - Special #on/#off/#pop directives to control the MIME directive
      processing state
    - A flag (-directives) to control whether or not mhbuild will honor MIME
      directives by default.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu May 31 14:56:47 2012 -0400

    Convert the content-transfer-encoding to lower-case always.

Author: David Levine <levinedl@acm.org>
Date:   Tue May 29 07:57:30 2012 -0500

    Unset MM_CHARSET so it doesn't interfere with test-scan-multibyte.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat May 26 01:55:08 2012 -0400

    Support for handling multibyte encodings in cpstripped(), which
    means that multibyte character encodings should work correctly
    on all systems which support the POSIX wide character functions.

Author: David Levine <levinedl@acm.org>
Date:   Wed May 23 22:16:14 2012 -0500

    Update the current folder and current message and synchronize
    sequences before showing the messages instead of after.  This
    way, the context will be updated even if the user exists while
    viewing the messages.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 21 20:05:19 2012 -0500

    comp and dist cannot take multiple message arguments.  mhbuild does
    not set context.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 21 20:03:57 2012 -0500

    Changed wording to say that the last message selected (not necessarily
    shown) will become the current message.  That's consistent with the
    mhlist and mhstore man pages.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu May 17 08:34:29 2012 -0400

    Minor changes to replyfilter to make it compatible with older versions of Perl.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 12 11:02:21 2012 -0500

    Used this version, renamed nmh-1.5-1.sh, in application for Cygwin package.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 12 09:30:27 2012 -0500

    Allow selection of locking type.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 12 07:44:16 2012 -0500

    SIGNATURE/Local-Mailbox are not used by post, but just by front
    ends (comp, forw, repl, etc.) that read the profile.

Author: David Levine <levinedl@acm.org>
Date:   Thu May 10 21:23:09 2012 -0500

    Don't test with sendmail because it would really send the mail.  If
    configured to use sendmail, change the mts.conf used by the test suite
    to use smtp instead.

Author: David Levine <levinedl@acm.org>
Date:   Wed May 9 22:05:28 2012 -0500

    Wrap local part (username) of address with double quotes if needed.

Author: David Levine <levinedl@acm.org>
Date:   Tue May 8 22:19:29 2012 -0500

    Skip the Cygwin package (.bz2) file when searching for the input (.gz) file.

Author: David Levine <levinedl@acm.org>
Date:   Tue May 8 20:29:57 2012 -0500

    Added test script constructs to avoid.

Author: David Levine <levinedl@acm.org>
Date:   Tue May 8 10:16:46 2012 -0500

    Fixed patch section of prep().

Author: David Levine <levinedl@acm.org>
Date:   Tue May 8 10:16:17 2012 -0500

    Added MACHINES to EXTRA_DIST so that it gets put in the distribution.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 18:35:28 2012 -0500

    Removed locking type selection from build_nmh now that it's in configure.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 18:33:18 2012 -0500

    build-nmh-cygwin no longer needs to DISABLE_SETGID_MAIL now that configure
    uses fcntl on Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 17:25:43 2012 -0500

    Added -ansi -pedantic with gcc.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 16:45:32 2012 -0500

    Added $(TESTS_SHELL) at end of TESTS_ENVIRONMENT.  This lets the
    user run the tests using a shell other than the default /bin/sh
    by using, e.g., make check TESTS_SHELL=/bin/bash.  Thanks to
    Tom Lane <tgl@sss.pgh.pa.us> for suggesting this.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 16:35:16 2012 -0500

    Fixed some more problems caught by gcc -ansi -pedantic.

Author: Tom Lane <tgl@sss.pgh.pa.us>
Date:   Mon May 7 16:14:37 2012 -0500

    Fixed places in the code relying the C99-ism of declarations in the
    midst of a code block.

Author: David Levine <levinedl@acm.org>
Date:   Mon May 7 08:57:38 2012 -0500

    Removed --enable-pop and SETGID_MAIL= from nmh.spec.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon May 7 09:45:38 2012 -0400

    Fix test so it will work on terminal widths other than 80.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 6 21:53:18 2012 -0500

    Default to fcntl locking for AIX, Cygwin, and Linux.  Without it
    on Cygwin, nmh is unusable on FAT32 filesystems.
    
    Default to flock on FreeBSD.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 6 21:52:22 2012 -0500

    Added note about test/inc/test-deb359167 failing because valgrind
    detects use of an uninitialized variable on older Linux distributions.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun May 6 13:41:07 2012 -0400

    Fix the case of the MacOS X dSYM directories.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 6 11:14:49 2012 -0500

    Remove any existing Local-Mailbox: profile component before adding one.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 6 10:59:42 2012 -0500

    Added check for EPERM when checking errno after a failed link(2).
    Cygwin will produce that on FAT32 filesystems.  Must do this at
    runtime rather than configure time because link() succeeds on
    NTFS filesystems.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 5 10:05:36 2012 -0500

    Check for success of hard links of bin files.  If they fail, try sym
    links.  On Cygwin, the choice of ln or ln -s must be made at install
    time, not configure time, because some filesystems (NTFS) support hard
    links but others (FAT32) don't.  Fallback to cp -p, though might not
    be needed, just in case.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 5 10:04:35 2012 -0500

    Customized generic SPECS/build-nmh-cygwin for nmh.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 5 09:54:10 2012 -0500

    Replaced mh_profile man page hard link with new man/mh_profile.man.
    The hard link isn't be supported by SPECS/build-nmh-cygwin.  And it's
    consistent with the handling of other aliased man pages.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 5 09:16:49 2012 -0500

    Added SPECS/build-nmh-cygwin.  This version isn't ready:  it's
    a renamed download of
    http://sourceware.org/cgi-bin/cvsweb.cgi/~checkout~/packaging/templates/generic-build-script?content-type=text/plain&amp;cvsroot=cygwin-apps
    It's committed in its original form so we can easily view changes
    to it.

Author: David Levine <levinedl@acm.org>
Date:   Sat May 5 09:14:48 2012 -0500

    Moved nmh.spec to new SPECS directory.

Author: David Levine <levinedl@acm.org>
Date:   Mon Apr 30 21:56:26 2012 -0500

    Removed documentation of obsolete WHATNOW configuration option and
    built-in FTP client.  Removed some completed and obsolete tasks from
    TODO.

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 28 15:56:36 2012 -0500

    Allow a user to enable setgid of inc when running distcheck with:
      make distcheck DISTCHECK_CONFIGURE_FLAGS=DISABLE_SETGID_MAIL=0
    though that's probably never going to be used.
    (cherry picked from commit b83b264039d4245810cb845a540c024032a45ac4)

Author: David Levine <levinedl@acm.org>
Date:   Sat Apr 28 07:55:16 2012 -0500

    Disable setgid of inc (SETGID_MAIL=1) when running distcheck.
    (cherry picked from commit 9ba93ac9c535b678bb602094997a797ba8b33666)

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Apr 27 18:31:36 2012 -0700

    Formatting cleanup.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 27 20:25:20 2012 -0400

    Updates OS specific notes.

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 26 20:37:59 2012 -0500

    Moved the set +e up to capture one more test in test-pick.  That
    test heirloom-sh to exit.
    (cherry picked from commit f793aa71e4f7375daeb2cc9ef25512172fcb1451)

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 25 20:32:10 2012 -0500

    Use case statement to check for proper result from "mhparam sbackup".
    Also replaced a couple of other uses of grep with case statements.
    (cherry picked from commit 2f4fc229fd6578389b0435b044dc559d9d9bc292)

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 25 20:08:55 2012 -0500

    Removed the mv of the file after running sed on it.
    (cherry picked from commit 214da7bcd1ef52c46d4e77c787517d9403c97046)

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 25 20:08:03 2012 -0500

    Unset all MH environment variables that aren't set below.
    (cherry picked from commit 16dba0d07e94832ef9a077e6524714d0e433a111)

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 25 14:21:42 2012 -0500

    1) With SETGID_MAIL enabled (only with dot locking), if the chgrp of
       inc fails during install, don't attempt to chmod it.  This will
       cause make install to fail, which is good in this case.
    2) Added SETGID_MAIL= to the install by the test suite so that it
       does not attempt the chgrp+chmod.  The test suite didn't need them.
    3) Removed the SETGID_MAIL= from the test suite invocation in build_nmh.
    (cherry picked from commit 721276218bc03d4b0d86306c9b2990fae6f07426)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 25 13:02:33 2012 -0500

    Disable utmpx support for systems that lack getutxent.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Apr 25 17:40:09 2012 +0200

    futher test suite fixes to work on Solaris

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 24 21:04:54 2012 -0500

    Fixed test suite to work with Solaris Bourne shell:
    1) Removed ! (negation) of statuses.
    2) Removed initializations from export statements.
    3) Replaced $() with ``.
    4) Replaced $(()) (and expr) with new function arith_eval ().
    (cherry picked from commit a6af3b6300e02ade9f223f8d91667f590d191dc9)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Apr 24 17:02:38 2012 -0500

    Update info for mh-profile documenting comment format and the
    restriction on blank lines.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 24 14:23:44 2012 -0500

    Fixed to work with Solaris Bourne shell.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 24 14:22:06 2012 -0500

    Added build_nmh to dist_contrib_DATA.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 22 14:47:57 2012 -0500

    The mh-users list at UCI is no longer.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 22 13:30:33 2012 -0500

    Got the hostname for the savannah upload area wrong.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 22 12:59:18 2012 -0500

    Update for post-1.5 release.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 22 09:37:36 2012 -0400

    Clean up help messages a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Apr 22 09:37:24 2012 -0400

    Clean up install documentation a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 20 14:43:16 2012 -0400

    Implment -noatfile in a different way; it turns out my previous change
    broke dist with -noatfile.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 16 10:33:13 2012 -0400

    Change the cscope target slightly so the source code from the historical
    tree isn't found.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 15 10:02:23 2012 -0500

    Added declaration of __srget() on Cygwin.  Used point solution because
    this shouldn't be needed for much longer.

Author: David Levine <levinedl@acm.org>
Date:   Sun Apr 15 10:00:22 2012 -0500

    Added -Wno-sign-compare, if supported, to compile of sbr/dtimep.c.
    It's code generated by flex and some versions produce a
    signed/unsigned mismatch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 13 11:23:20 2012 -0400

    Sigh.  More changes for newer versions of perl.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 12 21:07:57 2012 -0400

    Support -fmtproc -nofmtproc in show.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 12 20:42:52 2012 -0400

    More updates to replyfilter

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Apr 12 11:40:42 2012 -0400

    Clean up fakesmtp and the post tests a bit to hopefully reduce race
    conditions that make the tests fail sometimes.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 11 20:59:57 2012 -0500

    Undid wrapping of setjmp() and sigsetjmp() of
    4548981fb45fbc917cc2c26b7c96b31cf a14bc9b.  What a bad idea.

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 11 20:42:22 2012 -0500

    Tweaked build_nmh to work with Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 10 20:47:46 2012 -0500

    Removed unused Hesiod relic.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 10 20:47:16 2012 -0500

    Added docs/contrib/build_nmh script.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 6 15:55:14 2012 -0400

    Add support for -fmtproc and -nofmtproc switches to repl.

Author: David Levine <levinedl@acm.org>
Date:   Fri Apr 6 13:27:30 2012 -0500

    Changed test-mhparam to allow # sbackup.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 6 13:57:20 2012 -0400

    Fix forw so it respects the -form switch again for non-digests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Apr 6 13:56:03 2012 -0400

    Refere to VERSION via srcdir so this works when doing objdir builds.

Author: David Levine <levinedl@acm.org>
Date:   Fri Apr 6 12:27:22 2012 -0500

    Reworked mhparam tests of components in procs array to depend on
    values set in common.sh, notably $pagerpath.

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 5 20:15:06 2012 -0500

    Added mhparam test of each component in procs array in uip/mhparam.c.

Author: David Levine <levinedl@acm.org>
Date:   Thu Apr 5 17:14:57 2012 -0500

    Fixed install-mh -auto test by specifying HOME.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 4 23:33:40 2012 -0400

    Sigh.  More corner cases to deal with!

Author: David Levine <levinedl@acm.org>
Date:   Wed Apr 4 21:41:39 2012 -0500

    Changed rmm, send, and whatnow man pages to be consistent with the
    refile man page with mention of site-dependent prefix (usually a comma).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 4 15:55:36 2012 -0400

    Fixed some more charset/encoding stuff.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Tue Apr 3 19:07:52 2012 -0700

    This is a test commit to se if the savannah git hub will stop spewing
    source diffs in commit email messages.
    
    In this case, there should be a half-dozen lines of my bable, and
    no context diffs from the one line change I made in this commit.

Author: David Levine <levinedl@acm.org>
Date:   Tue Apr 3 20:47:17 2012 -0500

    Moved nmh.spec and docs/replyfilter to new docs/contrib/ directory.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Apr 3 15:56:41 2012 -0400

    A few more bugs I didn't catch earlier.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Apr 3 13:04:47 2012 -0400

    Fix some bugs in replyfilter.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 2 15:58:12 2012 -0400

    Whoops, fix a typo in my last commit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 2 15:39:00 2012 -0400

    Bring in replyfilter to the docs directory.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Apr 2 15:38:40 2012 -0400

    Implement fix in 59b086daa57105e8fbd8b1e6ba60be6a845faf95 here as well.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 31 11:52:10 2012 -0500

    Added const qualifier to a couple of local pointers to get rid of compile warnings with --with-tls.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 26 21:28:54 2012 -0500

    Removed hostable relics from h/mts.h and sbr/mts.c.

Author: David Levine <levinedl@acm.org>
Date:   Mon Mar 26 20:32:03 2012 -0500

    Removed the hostable option from mts.conf because it's no longer used.
    This allowed removal of mts/smtp/hosts.c.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 25 22:42:36 2012 -0500

    Added test-install-mh.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 24 21:47:31 2012 -0500

    Note that %(myname) truncates the GECOS field at the first comma, if
    it contains one.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 24 22:32:13 2012 -0400

    Add support for %(size).

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 24 21:09:20 2012 -0500

    Removed -realsize from man page because mhshow doesn't support it.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 24 09:22:41 2012 -0500

    Fixed Cygwin notes.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 24 09:13:47 2012 -0500

    Ensure that escape_display_name() can't overrun a buffer.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 24 09:04:34 2012 -0500

    Cleaned up compile warnings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 24 02:15:49 2012 -0400

    Add this support for setting the CT_ADDR flag.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 24 02:08:03 2012 -0400

    Sigh.  Turns out last change broke a few tests, because it trimmed the
    newline on the "body" component.  Ignore that and the text component as
    well for trimming.  Also create some tests for the repl changes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 24 01:16:42 2012 -0400

    Revert commit 255d4c646c0d7aa6b049052fef47fa083b1b1506 and solve
    the problem another way.
    
    The component parser needs to save the newlines so it can combine
    multiple headers properly.  So for us, strip out any trailing newlines
    when we call fmt_scan().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 23 23:21:35 2012 -0400

    Modify the whatnow tests to deal with different versions of readline;
    some echo the input, some do not.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 22 23:34:08 2012 -0400

    If the number of messages in a folder is zero, then don't try to
    clear out the sequence list; this can cause you to run off the
    beginning of the malloc'd buffer.  This can happen when you use
    "comp" with a draft folder, the draft folder is empty, and you have
    a previous sequence set in your .mh_profile.  As far as I can tell
    this has been a problem for nearly forever, but I only ran into it
    recently when adding the readline support.  Go figure.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 22 21:06:47 2012 -0500

    Added function escape_display_name() to double quote, if not already,
    a fullname that contains any of the special characters listed in RFC
    5322, and escape unescaped, embedded double quotes.
    
    With this change, nmh should work with no special configuration on
    Cygwin, even if the user's fullname is of the form server\name.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 22 19:40:17 2012 -0500

    Moved NMH_READLINE to after our setting of CFLAGS, because
    AC_SEARCH_LIBS messes with them.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 21 20:01:06 2012 -0500

    If a pager isn't specified with configure --with-pager, look in order
    for more, less, and most.  Fall back to cat, to avoid catastrophic
    failure of mhshow, et al., if pagerpath is set to "no".
    
    Updated Cygwin section of MACHINES.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 21 15:27:15 2012 -0400

    Support for readline command history, editing, and completion at the
    WhatNow? prompt.  Based on work by Steve Rader.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 21 12:22:16 2012 -0400

    Revert previous change to get rid of MULTIBYTE_SUPPORT ifdef.  It turns out
    this breaks the Plan 9 build.  But include a check for the multibyte functions
    so we get MULTIBYTE_SUPPORT on systems that have it.
    
    This reverts commit bd4fca3a8a15b35a04bdc333503c901d677c12eb.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 20 23:49:17 2012 -0500

    Fixed harmless compile warnings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 20 21:36:37 2012 -0400

    It turns out that as part of POSIXification we got rid of checks for
    wcwidth and mbtowc (because they're part of POSIX) but we didn't turn on
    MULTIBYTE_SUPPORT because configure was testing to see if those functions
    were supported ... and because the tests never ran, it always came back
    as not being supported.  Time to bite the bullet and turn MULTIBYTE_SUPPORT
    on by default.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 20 20:22:19 2012 -0400

    Document formatarg.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 20 19:52:29 2012 -0400

    Use _exit() instead of exit() so our writer process doesn't flush out
    the stdio buffers on exit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 20 19:15:18 2012 -0400

    Basic work to add arguments to formatproc calls.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 19 21:37:14 2012 -0400

    Just for sanity's sake, double check the "inc" results also with "scan".

Merge: e8ed3af 740e258
Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 18 20:59:06 2012 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: Steve Rader <rader@hep.wisc.edu>
Date:   Sun Mar 18 20:57:08 2012 -0500

    Added list of hand picked types initially genereted by...
      cat /etc/mime.types \
        | perl -ane 'if ($F[1] ne "") {print "mhshow-suffix-$F[0]:.$F[1]\n"}'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 18 21:29:39 2012 -0400

    Fix a bug where a message header ending right on the stdio boundary
    would cause the body output in scan to be truncated.
    Also include a test for the aforementioned bug.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 17 23:42:26 2012 -0400

    Fix typo in man page

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 18 10:27:05 2012 -0500

    Added release note that ./@ is obsolete/deprecated.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 18 09:53:31 2012 -0500

    Added test-whom.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 18 09:17:56 2012 -0500

    Added documentation of -sever, -port, -sasl, -saslmech, -snoop, -user,
    -tls, and -notls to whom man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 18 09:15:30 2012 -0500

    Added whom, it's the fifth program referred to in mh-draft man page.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 17 14:33:43 2012 -0500

    In gcov target, added warning if configured with --enable-debug.
    While gcov will work with it, it won't reflect optimizations that
    are disabled with that option.

Merge: 7cc0e99 67c56ba
Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 22:11:09 2012 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh
    
    Conflicts:
    	Makefile.am

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 21:07:52 2012 -0500

    Automated generation of mh-chart.man.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 21:07:52 2012 -0500

    Automated generation of mh-chart.man.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 21:05:21 2012 -0500

    Commmiting last manual update of mh-chart.man before removing it.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 21:02:57 2012 -0500

    Removed some unused code having to do with permissions of symlinks.

Author: David Levine <levinedl@acm.org>
Date:   Fri Mar 16 21:01:30 2012 -0500

    Added mhshow-suffix-text/calendar.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 16 13:21:38 2012 -0400

    Improve the documentation for "send" a bit in terms of how it maps file
    suffixes to MIME types.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 16 13:02:43 2012 -0400

    Make -attach Nmh-Attachment & -attachformat 1 the default.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 16 11:37:31 2012 -0400

    Update for changes to post.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 16 11:32:35 2012 -0400

    Create new switches -atfile and -noatfile to control the creation of the @
    file when repl'ing or dist'ing a message.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Mar 16 00:21:35 2012 -0400

    Update post(8) regarding the New World Order.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 23:14:48 2012 -0400

    Whoops, forgot to put "." before some of the suffixes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 23:09:41 2012 -0400

    Add some more default MIME content suffixes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 23:00:06 2012 -0400

    Call readconfig() on mhn.defaults so we get default entries in for use
    with attach.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 22:23:20 2012 -0400

    A test for the group addressing functionality handled by "post".

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 15:54:02 2012 -0400

    Remove all masquerade support (draft_from is now the default, and the other
    two can be accomplished via the components file).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 13:55:15 2012 -0400

    Clean up prototypes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 13:04:38 2012 -0400

    Fix some warnings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 15 11:55:34 2012 -0400

    I guess the -i option to sed works differently on Linux and MacOS
    X; deal with it.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 14 21:05:16 2012 -0500

    Initialized local format_len.  gcc on 64-bit Linux warned about it.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 14 21:15:54 2012 -0400

    New test suite for "post"; uses fakesmtp to trap the SMTP protocol.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 14 21:15:17 2012 -0400

    Make sure we don't send Envelope-From if we're using spost.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 14 15:51:22 2012 -0400

    A new test program, fakesmtp, to help us test post.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Mar 14 15:47:01 2012 -0400

    Fix the SMTP code so it doesn't end up in a hard loop during a DATA
    command.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 13 22:28:03 2012 -0500

    Disabled the optimization to stop stat'ing directory entries in
    BuildFolderListRecurse() of flist.c under conditions where st_nlink is
    set to 1.  That happens on Cygwin, for example:
      http://cygwin.com/ml/cygwin-apps/2008-08/msg00264.html

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 13 22:01:52 2012 -0500

    Changed output_md5() to output just the checksum.  If the filename
    needs to appear on the same line, the caller needs to add it.  This
    avoids differences due to a leading '*' binary file indicator, even
    for text files, on Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 13 21:20:47 2012 -0500

    Added test/getfqnd.c, a replacement for "hostname" that always
    tries to provide the fully qualified domainname of the host, even
    on Cygwin.  It uses the code that LocalName in sbr/mts.c uses.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 13 19:58:33 2012 -0500

    On some platforms, need to be out of $SPDIR in order to remove it.
    So do that in test/whatnow/test-ls.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 13 19:56:06 2012 -0500

    Promote uid_t value to long and print with %ld to prevent compile
    warning on platforms, such as Cygwin, where it is a long.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 13 15:25:41 2012 -0400

    Modify getfullname so it performs the same processing that
    mts.c:getuserinfo() does.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 13 15:15:42 2012 -0400

    Create proper prototypes for formataddr() and concataddr().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 12 22:52:21 2012 -0400

    New changes: Sender: cannot be blank, Sender: always overrides From:
    for SMTP envelope, and Envelope-From: will cause a Sender: header to be
    output if multiple From: addresses are used.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 11 21:47:04 2012 -0400

    Require From: header in all outgoing messages.
    Allow Sender: header (require if multiple addresses are in From:).
    Support new Envelope-From: header for overriding post's choice of
    SMTP envelope-from address.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Mar 11 18:08:03 2012 -0400

    Add support for a -notls switch, for consistency's sake.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Mar 10 22:55:16 2012 -0500

    Clean up a bunch of unused code and options.  Specifically:
    
    - Remove support for SMTP SEND, SAML, and SOML commands
    - Remove -deliver, -fill-in and -fill-up switch for post (and related code)
    - Document -server and -port switches better in post man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Mar 6 09:25:00 2012 -0500

    SMTPMTS has been the default for over a decade, so it's time to get rid of
    the #ifdefs to clean up the code a bit.

Author: David Levine <levinedl@acm.org>
Date:   Sun Mar 11 19:52:38 2012 -0500

    Fixed mhstore to honor nmh-storage profile entry even with -auto [Bug #35303].

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 10 20:33:24 2012 -0600

    There were two fd leaks in mhparse.c:
    1) In openQuoted(), the decoded contents file was opened twice in
       succession. The second open was added by a patch in March 2000.
    2) openBase64(), openQuoted(), and open7Bit() could open the contents
       file, but it never would be closed. Added code to each to close the
       file if the function opened it.
    [Bug #24004: (debbug 344182)]

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 10 10:45:01 2012 -0600

    Replaced UTC-8 with UTF-8.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 10 10:44:30 2012 -0600

    Removed bash-ism from test-pick.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 8 21:29:28 2012 -0600

    Enabled all groff warnings, with -ww, in manpages test.  Fixed a bunch
    of minor problems that it revealed.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 8 21:09:59 2012 -0600

    Fixed mhlist -verbose to work with all content types [Bug #35219].

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 8 20:19:53 2012 -0600

    1) Removed -noverbose from defaults of mhshow man page.  While it
       accepts -verbose/-noverbose, it ignores them.
    2) Added -verbose/-noverbose to mhlist synopsis.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 7 22:08:03 2012 -0600

    Added test-refile.

Author: David Levine <levinedl@acm.org>
Date:   Wed Mar 7 20:20:13 2012 -0600

    Replaced us-ascii with iso-8859-1 in examples, just because.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 21:57:16 2012 -0600

    Added test-mhparam and test-mhstore.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 19:57:22 2012 -0600

    Removed all traces of rmfproc.  It had been used by bbl but was
    no longer used.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 19:08:21 2012 -0600

    Some of the man pages had mentioned that arguments should be
    double-quoted to protect them from the shell.  Removed "double-"
    because single quoting is fine, too.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 18:52:41 2012 -0600

    Escape spaces in DEFAULTS sections of man pages so they no longer are lost.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 18:51:12 2012 -0600

    Removed ignored -verbose (and -noverbose) options to mhstore, just in the man pages.  The code remains unchanged.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 18:49:27 2012 -0600

    Fixed example to show that mhparam preserves case of component name.

Author: David Levine <levinedl@acm.org>
Date:   Tue Mar 6 18:48:21 2012 -0600

    Initialized local wasdlm to prevent uninitialized use.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 5 13:55:04 2012 -0500

    Finally got a reasonable burst test working.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 5 13:24:41 2012 -0500

    Update with recent fix.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 5 13:21:04 2012 -0500

    Change this to use "uint32_t" for a 32-bit type, otherwise we can get
    wrong MD5 checksums on 64-bit systems.  Score another one for the
    test suite!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Mar 5 12:23:15 2012 -0500

    Fix burst so it actually complies with RFC 934.  This means discarding
    any extra stuff leftover at the end of an encapsulated message.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 1 15:17:43 2012 -0500

    A test for burst; still needs work.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 3 12:23:58 2012 -0600

    Added test-mhlist.

Author: David Levine <levinedl@acm.org>
Date:   Sat Mar 3 12:21:00 2012 -0600

    mhbuild -check would always fail because it tried to build the
    digest for the decoded contents file (cefile), which can be null.
    If it is, use the contents file itself.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 1 18:01:52 2012 -0600

    Brought mh-chart man page up to date.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 1 12:33:19 2012 -0600

    Added documentation of -snoop.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 1 12:32:23 2012 -0600

    Removed RCS sparc object file.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 1 12:29:33 2012 -0600

    Under docs/historical/mh-6.8.5, mh.rf and mh.me were renamed to
    mh-intro.rf and mh-intro.me, respectively, to avoid name clashes with
    other files on case-insensitive file systems.

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 1 12:13:14 2012 -0600

    Removed entire docs/historical/mh-6.8.5/local/ tree.  It had a pair of
    files, Distfile and distfile, with clashing case-insensitive names.
    The rest of it was specific to UCI and LBL.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 1 12:33:42 2012 -0500

    %G isn't actually part of POSIX, so change to %Y.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Mar 1 12:02:29 2012 -0500

    Fixed a problem that caused the test to fail if you ran it on the first
    nine days of the month.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 29 20:33:24 2012 -0600

    Initialized local msgnum to 0.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 29 18:41:14 2012 -0600

    Added all of the MH sources, including RCS files, in
    docs/historical/mh-6.8.5.  Sources for the papers are below papers/.
    Sources for the MH User's Manual are in conf/doc/.

Merge: c7f326f 7565efe
Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 29 16:36:59 2012 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh
    
    Conflicts:
    	docs/historical/README

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 29 13:49:28 2012 -0600

    Removed the sources to the historical documents just added, they're
    in the mh-6.8.5 tarball.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 29 13:49:28 2012 -0600

    Added sources to historical documents downloaded from
    http://stuff.mit.edu/afs/sipb/project/sipb-athena/src/mh/papers/

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 29 08:52:26 2012 -0500

    Fix a segfault that happens when using the -file option.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 29 08:51:27 2012 -0500

    Argh, I didn't mean to commit the distcomps I was using for testing!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 28 15:38:56 2012 -0500

    dist(1) now processes drafts using mh-format!  The last of the programs
    to do so!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 28 15:38:37 2012 -0500

    Fix this man page for the New World Order.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 28 15:29:56 2012 -0500

    Improve these man pages a bit.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 28 14:45:03 2012 -0500

    Add support for %(msg) function working when not using -digest.  I can't
    imagine what someone would use it for but it's cheap to do, so why not?

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 28 10:32:41 2012 -0500

    Part of the patch from bug #4301; clean up our prototypes, a lot.  Still
    plenty of work to do!

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 28 22:05:55 2012 -0600

    Added docs/historical/.  See README for where they were found.

Merge: 56f140c e22a2c8
Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 21:12:22 2012 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 21:10:47 2012 -0600

    Removed blank line after "End of Forwarded Message" lines.  It's
    always bothered me.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 22:11:34 2012 -0500

    Add the note about the burst(1) change to pending-release-notes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 22:05:41 2012 -0500

    Fix bug #1466.  It turns out that RFC 934 specifies that any line starting
    with a "-" but NOT followed by a space is a valid message delimiter.  We
    only supported one type of message delimiter.  Adapt the code so any
    valid delimiter is supported.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 20:56:58 2012 -0600

    Added cast in conditional to prevent signed/unsigned comparison, and wrapped argument to prevent warning about unused argument when built without SASL support.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 20:50:29 2012 -0600

    Changed domains in man page and test examples to use example.com

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 20:42:19 2012 -0600

    Fixed to report failure if getfulname hadn't been built yet.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 27 20:40:15 2012 -0600

    They test with output to a tty didn't work under make distcheck.  Tried to work around it by writing directly to /dev/tty, if that's available.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 20:50:49 2012 -0500

    Add support for -nosasl and -saslmaxssf switches.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 14:13:02 2012 -0500

    Document changes to forw(1).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 14:12:34 2012 -0500

    Clean up some typos in here.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 13:45:37 2012 -0500

    Got the forw -digest test working.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 13:37:09 2012 -0500

    Update digestcomps and forwcomps with comments and better formatting.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 27 12:56:00 2012 -0500

    Make -volume switch actually work (it always got overridden).  As far
    as I can tell, this never worked.  Found by the test suite!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 21:29:44 2012 -0500

    Remove the forw-digest test until we have it working.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 21:29:01 2012 -0500

    A test for forw -digest.  It doesn't quite work yet.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 21:14:04 2012 -0500

    Fix up some of the pick tests:
    
    - Change sed invocation around to get rid of GNU sed extensions
    - Put explicit times in the pick tests (if you don't, it uses the current
      hour/minutes as the timestamp, which means it could work or not work
      depending on what time of day you run the tests).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 13:02:41 2012 -0500

    Update the pending release notes with new features.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 12:45:48 2012 -0500

    Add a new README documenting the changes to the components files.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 12:12:28 2012 -0500

    Beginnings of a test suite for the mh-format support in forw.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 26 10:55:46 2012 -0600

    Added test-pick.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 26 10:32:29 2012 -0600

    Suppress echoing of man page build lines.  One of them says "warning", and it's handy to check that build output doesn't say that.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 26 10:10:35 2012 -0600

    Changed type of a local to unsigned and removed local ncomps to suppress compile warnings.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 26 10:09:35 2012 -0600

    Added gcov and gcov-clean targets.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 26 00:09:52 2012 -0500

    Finally, some support for mh-format when using forw(1).  Still needs some
    tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 23 12:03:09 2012 -0500

    Create a test for the new mh-format processing available in comp(1).

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 22 22:23:05 2012 -0600

    Added test-flist and test-mark sequences tests.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 22 22:21:56 2012 -0600

    Don't list _sysconfdir/ directory in RPM spec.  We don't list any other directories, so now it will be created with the same permissions as all of the others.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 19:35:05 2012 -0600

    Removed reference to mhost.com.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 19:34:33 2012 -0600

    Updated to reflect that all of the lists are on nongnu.org.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 19:31:08 2012 -0600

    With "make rpm", configure all modified files in sysconfdir (etc) to be saved when erasing or upgrading the package.  Also, leave the doc directory whereever "make install" puts it.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 21 15:56:06 2012 -0500

    Add support for a -subject switch to comp.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 21 12:58:50 2012 -0500

    Switch from (me) to (localmbox) to make -cc me work correctly.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 20 22:02:26 2012 -0600

    Migrated a couple more tests to use run_test() in common.sh.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 20 00:31:14 2012 -0500

    Put default From: headers in these component files, and document the
    components file now that we can have comments.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 20 00:31:01 2012 -0500

    Clean up documentation formatting

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 19 22:29:14 2012 -0600

    Removed unused local ncomps because gcc complained about it.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 19 19:59:06 2012 -0500

    Add support for "to", "cc", "from", and "fcc" components via command-line
    switches.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 19 18:03:26 2012 -0500

    Fix a bug leftover from the Automake conversion; the AC_SUBST'd variable
    names are really editorpath and pagerpath, use those instead.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 22:36:50 2012 -0600

    Ken noted that "make check" can be run before installation because the only program in lib that the tests currently use is mhlproc, and we have an mhlproc entry in the test .mh_profile for that.  Added showproc and postproc entries in case they're ever needed.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 17:32:15 2012 -0600

    Moved "make check" to after "make install".

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 17:31:37 2012 -0600

    gcc was warning about unused arguments to main, so added use of them in a usage check.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 17:30:47 2012 -0600

    Consolidated runtest and check_string test functions.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 11:21:28 2012 -0600

    Have each test clean up after itself if it completes successfully.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 09:42:04 2012 -0600

    Added mhpath test.  Updated mhpath man page to reflect actual behavior for a message number greater than that of the highest existing message in a folder.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 08:03:21 2012 -0600

    The test check() function now removes the expected and actual output files if they're the same, by default.  Added check-string() function.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 17 19:10:08 2012 -0600

    Initialized local "in" to suppress gcc warning about possible uninitialized use.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 17 19:08:42 2012 -0600

    Enclosed program name and directory in double quotes so that they can contain whitespace.

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 17 18:44:35 2012 -0600

    Here's the proper fix instead of the hack of d28ce569fe233141f86fe516878361da01c9f9cb.  Use ${srcdir} in to refer to extra files in tests, as before.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 17 15:56:08 2012 -0500

    Beginning support for mh-format support in comp(1).  Includes changes to
    default component file.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 17 15:10:06 2012 -0500

    Sigh.  Looks like we need a function after all; create a new function
    called %(localmbox).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 17 14:02:44 2012 -0500

    Switch to including h/mts.h for getusername() prototype.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 16 22:56:02 2012 -0600

    Added a couple of NMH_UNUSED's to suppress warnings when building without Cyrus SASL.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 16 22:49:03 2012 -0600

    Hacked to work with make distcheck.  Maybe not the best way but it works for now.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 16 22:02:21 2012 -0600

    Moved check() function from individual tests to common.sh.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 16 21:30:43 2012 -0600

    Rearranged test suite environment variables so that individual tests
    can now be run standalone (outside of make).  But see WARNING in
    test/README about how it's better to use "make check" because that
    ensures that the current code in your workspace is tested.  Also, the
    clean script no longer needs to call setup_test.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 16 11:46:16 2012 -0500

    Report an error when the width used by putaddr is less than the label width.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 16 00:17:49 2012 -0500

    Hopefully made the format documentation a little bit clearer.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 21:45:13 2012 -0500

    Fix typo in repl man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 15:54:47 2012 -0500

    Create test cases for the new format functions for local address writing.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 15:53:26 2012 -0500

    Make it so we do NOT check our address against the "local" userid and
    hostname if Local-Mailbox is set.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 15:46:28 2012 -0500

    Sigh.  Turns out the first entry in the list isn't actually checked, so
    we need to make sure that our Local-Mailbox entry starts second.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 14:55:25 2012 -0500

    Hm, it turns out we need to make sure we call getname() until we get
    a NULL, otherwise the next set of calls to it will be working from the
    "old" search string.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 11:36:36 2012 -0500

    Beginning of support for the Local-Mailbox profile entry.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Feb 15 10:48:52 2012 -0500

    Support getting the "fullname" out of the Signature profile setting.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 14 20:47:06 2012 -0600

    Updated documentation of environment variables in mh-profile man page.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Feb 14 20:24:43 2012 -0500

    Add two new format functions: %(myhost) and %(myname).

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 13 19:55:53 2012 -0600

    Changed "make test" to "make check".

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 13 19:54:41 2012 -0600

    Fixed progress indicator.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 11 23:28:10 2012 -0500

    Another problem discovered by the test suite.
    
    With multiple sequence arguments on the command line you might end
    up with garbage in the sequence[] array (it needs the last argument
    to be a NULL.  So do two things: make the first two arguments NULL, and
    as we add arguments to sequence[] make sure the list has a NULL on the
    end.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sat Feb 11 13:06:47 2012 -0500

    correct the maximum number of sequences in the mark(1) man page
    
    also add a note explaining the somewhat low limit.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sat Feb 11 12:41:30 2012 -0500

    mhshow: suppress pause actions if stdout isn't a tty
    
    previously, "mhshow | cat" would both print a "Press return" prompt
    to, and attempt to read from, its piped output fd.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 23:38:40 2012 -0500

    Fix this so it works when valgrind is installed.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 23:27:36 2012 -0500

    Switch over to using the template files out of our inst directory.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 23:22:12 2012 -0500

    Switch to using the "inst" version of mhl for tests.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 23:09:03 2012 -0500

    Re-work the test suite so it now works with Automake (via "make check").

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 20:59:21 2012 -0500

    Fix typo in alternate mts.conf location support.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 15:11:05 2012 -0500

    Make the test suite work on systems other than Linux.  Still needs work.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 10 09:50:48 2012 -0500

    With the fixing of the bug that caused CPPFLAGS to get tromped on, remove
    support for OURDEFS and direct people to use CPPFLAGS instead.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 9 23:43:30 2012 -0500

    Fix typo in variable test.

Author: David Levine <levinedl@acm.org>
Date:   Thu Feb 9 20:38:22 2012 -0600

    Show assignment of configure variables using VAR=VALUE instead of in the shell environment.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 8 22:29:59 2012 -0600

    Updated INSTALL and MACHINES documentation a bit.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 8 21:42:46 2012 -0600

    Added mhshow subpart test.

Author: David Levine <levinedl@acm.org>
Date:   Wed Feb 8 21:41:48 2012 -0600

    Always run setup-test from make test/runalltests, just in case the test build directory (test/testbuild) isn't up to date.  It might be nice to replace all the copies in the test build directory with symlinks, then make could keep the test build up to date.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 7 21:43:26 2012 -0600

    Added OURDEFS to DEFS in Makefile.am, to restore it in the Makefile.  Updated documentation in INSTALL.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 7 21:23:37 2012 -0600

    Removed use of tzset()/tzname in dtimezone().  They caused the returned timezone string to be for the user's current timezone, but the function is supposed to return the string representation of the timezone of its argument.  That will be numeric, e.g., +0100, now because we no longer have timezone name support.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 7 21:17:00 2012 -0600

    Reverted TZ hack to tests, 9ea2daf5e74e3ff03043cfa6fb68033aea0da52a.  A code fix is on its way

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 6 22:35:21 2012 -0600

    Another one caught by the test suite:  an indented line was too long in the slocal man page.  Center it instead.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 6 22:25:25 2012 -0600

    Some tests failed because they displayed the user's local
    time zone but expected GMT.  So, set TZ in runtest to fool
    them.
    
    Though I wonder if we're failing to correct for local time zone.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 6 21:47:52 2012 -0600

    Caught by the test suite:  sequences[0] needs to be initialized to NULL at the beginning of the program.  That explains why it seg faulted when invoked with a sequence argument.

Author: David Levine <levinedl@acm.org>
Date:   Mon Feb 6 21:19:57 2012 -0600

    Reworked test suite to copy the configuration used in the main
    nmh directory.  Added test target to Makefile.  Not all the tests
    pass at this point.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 6 14:12:00 2012 -0500

    Still more autoconf cleanup (quoting & more use of M4sh).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 6 11:31:18 2012 -0500

    Patch from Harvey Eneman: fixes problem on some systems where a free()
    would be called on non-malloc'd memory (only would happen if you had more
    than one entry in the server: line in mts.conf).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 6 10:27:43 2012 -0500

    Update the developer documentation with the changes to the release
    process.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 6 09:08:19 2012 -0500

    More configure cleanup to modern constructs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Feb 5 17:17:41 2012 -0500

    Autoconf cleanup to suggested practice (AS_IF & AC_MSG_FAILURE).  More to do.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 5 15:26:16 2012 -0600

    Added error message if the file is source directly, rather than through bash-completion.

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 5 14:13:07 2012 -0600

    Exit with error message if no library could be found with tgetent.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Feb 4 00:11:27 2012 -0500

    Whoops, used "buffer" when I meant "buf".

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 23:43:53 2012 -0500

    Change LocalName() to take an argument (about whether or not to use
    local hostname versus entry in mts.conf).

Merge: 24ccfac 196f981
Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 3 17:10:49 2012 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Fri Feb 3 17:10:44 2012 -0600

    Use more up-to-date web page links of Jerry Peek's book sections at rand-mh.sourceforge.net instead of oreilly.com.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 15:38:49 2012 -0500

    Convert from the poorly-named and confusing adrsprintf() to getlocaladdr().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 15:03:00 2012 -0500

    Make the upload target phony.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 15:01:50 2012 -0500

    Beginnings of an upload Makefile target.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 13:50:19 2012 -0500

    Update with new features.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Feb 3 13:49:46 2012 -0500

    Document the formatproc entry.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Feb 2 22:13:57 2012 -0500

    Move the eval statements inside of AC_CONFIG_COMMANDS_POST macro, otherwise
    the stuff we output might not be correct.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 31 23:17:33 2012 -0600

    Added #includes to pick up declaration of waitpid()

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 31 13:20:40 2012 -0500

    Whoops, I need to make sure the buffer I pass to putcomp() is NULL-terminated.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 31 12:58:04 2012 -0500

    Add support for calling an external format program inside of mhl.

Merge: abf5b4f c8206d4
Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 28 14:12:05 2012 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 28 13:52:59 2012 -0600

    Made ChangeLog target phony so it will always get regenerated.  But don't try to regenerate if git repository is not present.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 28 13:52:59 2012 -0600

    Made ChangeLog phony so it will always get regenerated.  But don't try to regenerated if git repository is not present.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 28 12:45:15 2012 -0600

    The www.ics.uci.edu/~mh/ links are dead, so replaced them with corresponding oreilly.com links.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 28 12:33:27 2012 -0600

    Replaced static ChangeLog with one generated by git log.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sat Jan 28 00:29:13 2012 -0500

    Create "nowrap" flag to turn off all line wrapping.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 27 20:30:58 2012 -0600

    Organized .gitignore to show which objects are deleted by the various Makefile clean targets.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 27 19:56:50 2012 -0600

    Added superclean Makefile target.  Added a.out.DSYM's to clean target.  Added .PHONY indication of rpm target.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 27 19:40:48 2012 -0600

    Removed config.guess and config.sub because they're generated by autoreconf -i.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 27 19:39:47 2012 -0600

    Updated to latest config.guess and config.sub before removing them from the repo, just in case someone needs them and can't generate them.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 27 19:36:14 2012 -0600

    Changed a variable to unsigned and noted an argument as unused to silence compile warnings in uip/popsbr.c

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 27 13:47:14 2012 -0500

    Fix long-standing problem with getans(); handle the case if we get
    an interrupted by a signal during a character read and return an
    EINTR.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 27 13:34:17 2012 -0500

    Convert to the use of siglongjmp()

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 27 12:30:52 2012 -0500

    Make POP support always be turned on.

Merge: da6bfd3 d5c47f7
Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Jan 27 08:16:57 2012 -0800

    Merge branch 'master' of ssh://git.sv.gnu.org/srv/git/nmh

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Fri Jan 27 08:16:36 2012 -0800

    Typo fix.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 26 22:36:17 2012 -0600

    Added clean-local target to remove RPM directory.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 26 20:05:30 2012 -0600

    Added uip/*.exe, for Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 26 20:04:33 2012 -0600

    Removed slash in front of $(man5dir) of install-data-hook rule so that it now works on Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 25 22:22:02 2012 -0600

    Fixed rpm target now that nmhdist is gone.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 25 20:48:55 2012 -0600

    Updated config test to add -Wextra to be consistent with others.  So, it's back!

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 25 19:44:30 2012 -0600

    If using gcc, use -Wno-unused-macros when compiling sbr/dtime.o.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 25 19:38:49 2012 -0600

    Removed unused local bp.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 25 19:33:17 2012 -0600

    Undid most of 3ef341abe440ece07f8deed59fb026ab020e805 because FreeBSD needs the HAVE_STRUCT_TM_TM_GMTOFF test.  It has a timezone() function, not a timezone global variable (that's visible with our default configuration.

Author: lyndon <lyndon@treebeard.orthanc.ca>
Date:   Wed Jan 25 20:10:52 2012 -0800

    Remove hardlink target before attempting new link.

Author: lyndon <lyndon@treebeard.orthanc.ca>
Date:   Wed Jan 25 18:15:47 2012 -0800

    uip/termsbr.c: remove references to PC and ospeed().
    
    These are no longer referenced by the code base now that vmh has been
    removed.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 24 12:56:45 2012 -0500

    Create a "cscope" target that creates the necessary files to use cscope.

Author: lyndon <lyndon@treebeard.orthanc.ca>
Date:   Mon Jan 23 22:48:24 2012 -0800

    cscope.files was missing mts/smtp/*.

Author: lyndon <lyndon@treebeard.orthanc.ca>
Date:   Sun Jan 22 23:21:03 2012 -0800

    Ignore cscope.out.

Author: lyndon <lyndon@treebeard.orthanc.ca>
Date:   Sun Jan 22 23:08:02 2012 -0800

    Add a default configuration file for cscope(1).
    
    I generated the file list by hand.  While it might be possible to generate it
    from the Makefile, it was much simpler to just
    
      ls */*.[cl]|grep -v sbr/dtimep.c
    
    If source files are added or removed down the road, cscope.files will
    need a hand edit to keep it in sync.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 22 01:15:40 2012 -0500

    Make sigmsg.h NOT depend on the Makefile.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 22 01:14:34 2012 -0500

    Clean up DESTDIR usage.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Jan 22 01:12:18 2012 -0500

    Add the rule to install inc setgid if requested.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 20 23:39:14 2012 -0500

    Fix some problems that the Automake migration caused.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 20 14:05:26 2012 -0500

    Convert the build system over to the use of Automake.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 17 17:33:29 2012 -0600

    Well the wrap of vfork() calls didn't work:  its semantics don't allow that.  So removed the wrapper and added -Wno-clobbered to gcc -Wextra.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 17 14:27:06 2012 -0500

    Convert from our use of aclocal.m4 to a subdirectory with autoconf macros
    in it.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 17 14:15:32 2012 -0500

    Change the name of AC_CHECK_NETLIBS, since it's not a macro distributed
    by Autoconf.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 17 10:58:40 2012 -0500

    Update .gitignore with .DS_Store (seen occasionally on MacOS X systems).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 17 10:57:54 2012 -0500

    Convert from utmp functions to utmpx functions (which are in POSIX).

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 16 20:58:15 2012 -0600

    Wrapped setjmp(), sigsetjmp(), and vfork() calls to silence gcc -Wclobbered for good.  Undid ca34fbd0a5204d47ad019f64ef03d21ebd3397fd, which added volatile qualifiers but was not general.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 16 18:35:21 2012 -0600

    Removed HAVE_STRUCT_TM_TM_GMTOFF support because it didn't work on Cygwin and isn't needed:  timezone, tzname, and tzset() are all POSIX.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 16 18:33:57 2012 -0600

    Pass int instead of char to iscntrl() and isspace() because that's what they require, and gcc on Cygwin warns about it.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 16 18:30:40 2012 -0600

    Added EXEEXT support, for Cygwin.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 16 09:50:10 2012 -0600

    Fixed build on Cygwin by adding configure check for ncurses/termcap.h.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 15:33:39 2012 -0600

    Argument to alrmser is unused.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 15:28:25 2012 -0600

    Fixed warnings from gcc -Wclobbered by adding volatile qualifiers.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 15:04:54 2012 -0600

    Cleaned up gcc warnings when CYRUS_SASL is not enabled.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 14:56:16 2012 -0600

    Added -Wextra with gcc, if supported.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 14:49:57 2012 -0600

    Changed types and added casts so that build is clean with gcc -Wsign-compare.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 09:21:32 2012 -0600

    gcc -Wmissing-field-initializers noticed several struct initializations
    that didn't explicitly list all fields.  Most were of no consequence because
    they were for static data, so they were all initialized properly.  However,
    the two in mhlsbr.c were missing an initialization of other than their last
    field, and they contained some subsequent values other than zero.  So, those
    later fields were initialized incorrectly.  Also, changed the initialization
    of global.c_ovtxt from "" to NULL because free_queue () freed it if non-NULL,
    though I think the "" was always overwritten.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 09:19:49 2012 -0600

    configure.ac and aclocal.m4 instead of configure.in and acconfig.h.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 14 09:16:16 2012 -0600

    Documented support of OURDEFS to pass compile flags to configure.

Merge: c3ed95b 3a84d81
Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 13 12:05:13 2012 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 13 12:04:13 2012 -0500

    Add some comments to the format compiler and engine.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 13 09:30:03 2012 -0500

    Update README.developers with the correct version of autoconf we need.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 12 22:19:24 2012 -0600

    Added NMH_UNUSED macro for suppressing warnings about unused parameters
    with gcc -Wunused-parameter

Merge: b70215d 162f2a7
Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 12 22:17:54 2012 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 12 22:14:59 2012 -0600

    Added -Wunused-macros with gcc, if supported.  Added -Wno-unused-macros,
    if supported, to compile of sbr/dtimep.o with gcc because it uses
    generated code that would be too much trouble to clean up.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 12 21:07:33 2012 -0500

    Create two new mh-format functions: %(putlit) and %(concataddr).
    
    %(putlit) outputs a string without any space compression or control character
    conversion
    
    %(concataddr) is just like %(formataddr), except that inside of repl there
    will not be any duplicate address supression.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 22:38:35 2012 -0600

    Enabled support for tls switch.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 22:36:20 2012 -0600

    Removed unsupported format and check switches, and commented out unused macro HMNG.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 22:33:45 2012 -0600

    Removed, or added use of, unused macros to prevent warnings from gcc -Wunused-macros.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 17:06:44 2012 -0600

    Removed or protected some unused macros.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 16:52:17 2012 -0600

    Removed unused global zones and local z form dtimezone ().

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 11 16:45:53 2012 -0600

    Added #include <grp.h>.  It's needed on Linux, should be harmless on others.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 11 15:04:39 2012 -0500

    Completely remove the use of TIME_WITH_SYS_TIME (I removed the autoconf
    test but never removed the code, and this caused some problems on systems
    that needed some prototypes in <time.h>).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 11 14:52:23 2012 -0500

    Ignore a.out.DSYM (this file sometims shows up when using the debugger)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 11 14:48:45 2012 -0500

    Fix two errors in the conversion to m_mktemp2():
    
    - There was an off-by-one error that prevented the temporary file
      from being created in the same directory as the message it was being
      linked to.
    - When using "dist", the assumption was that the temporary file would not
      exist when m_scratch was called (it wanted to link() to the name).  This
      was solved by simply unlink()ing the temporary file after it was created.

Merge: c2191f6 a2469f5
Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 15:52:34 2012 -0500

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 15:51:57 2012 -0500

    Remove OS-specific defines.  As part of it, remove scary longjmp() inside
    signal handlers that was part of the code under #ifdef BSD42.

Author: David Levine <levinedl@acm.org>
Date:   Mon Jan 9 14:08:38 2012 -0600

    Removed a remaining RETSIGTYPE.  Also change a few locals from int to unsigned to prevent signed-unsigned comparison mismatch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 14:43:35 2012 -0500

    Clean up time handling; always assume we have tzset() and that the right
    prototypes are in time.h (both are valid in POSIX).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 14:07:37 2012 -0500

    Garbage collect autoconf support for checking for the header file for initgroups
    and snprintf() prototypes.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 13:56:30 2012 -0500

    We are making POSIX signal support a requirement; remove all support for
    other signal interfaces.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 13:38:02 2012 -0500

    Finally able to get rid of acconfig.h!  Since we're doing slightly better
    in the autoconf universe, rename configure.in to configure.ac, the "more
    correct" name for the configure script template.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jan 9 13:26:59 2012 -0500

    Switch from using RETSIGTYPE via autoconf to void, since POSIX says that's
    type to use for a signal handler.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 8 17:58:11 2012 -0600

    Removed unused bcmp, bcopy, bcpy, and bzero #defines.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 8 13:46:47 2012 -0600

    gcc -Wempty-body warned that the check of the result from the call to parse_mime() was ignored.  It has been that way since the beginning of history and was probably of no consequence, but fixed anyway.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 8 10:51:05 2012 -0600

    Removed traces of bboards and bbc from mh-profile and msh man pages.  Added see also of msh to packf man page.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 8 10:34:31 2012 -0600

    Wrapped #include of config.h with #ifdef HAVE_CONFIG_H, just in case someone ever wants to build without using configure.

Author: David Levine <levinedl@acm.org>
Date:   Sun Jan 8 10:27:15 2012 -0600

    Removed hard-coded -I.. and -I../.. from INCLUDES, it was redundant given -I$(top_srcdir).

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 7 10:03:35 2012 -0600

    Added Content-Description header with the filename of the attachment, with attachformats 1 and 2. This seems to be common practice now and gives mhlist something useful to display.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 7 09:53:36 2012 -0600

    Added note about fileproc and mhlproc mh-profile entries.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 7 09:19:59 2012 -0600

    Added removal of autom4te.cache directory to mostlyclean-local.

Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 7 09:17:34 2012 -0600

    Quoted argument to AC_LINK_IFELSE to silence authoheader warnings.

Merge: d2e40bd 0d56141
Author: David Levine <levinedl@acm.org>
Date:   Sat Jan 7 08:22:24 2012 -0600

    Merge branch 'fileproc_mhlproc_to_post'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 14:40:31 2012 -0500

    Move definition of LINK to mh header file, and garbage collect ATTVIBUG code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 14:18:46 2012 -0500

    Hardcode the defaults for Msg-Protect and Folder-Protect.  Also fix the
    documentation (had the wrong value for the default for Msg-Protect).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 14:12:13 2012 -0500

    Huh, apparantly I got rid of any support for POPSERVICE over a year
    ago!  Good riddance, I say.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:48:03 2012 -0500

    Garbage collect all of the builtin ftp client support.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:37:38 2012 -0500

    Garbage-collect MHRC (and make it the default).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:36:21 2012 -0500

    Garbage-collect SLOCAL_MBOX (and make it the default).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:35:16 2012 -0500

    Garbage-collect RPATHS support.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:29:35 2012 -0500

    Huh, turns out this define hasn't worked in forever ... the original
    changes were made to the lexer output, and silently vanished a decade
    ago when code was reorganized from zotnet to sbr!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:22:44 2012 -0500

    Remove last vestiges of #ifdef BANG

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 6 10:21:17 2012 -0500

    Remove DBMPWD, make it the default.

Author: David Levine <levinedl@acm.org>
Date:   Fri Jan 6 08:55:39 2012 -0600

    Added datarootdir definitions to silence warnings from configure.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 5 21:36:51 2012 -0600

    Fixed trivial compile warnings.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 5 22:13:08 2012 -0500

    Not sure why we're checking for st_blksize; it's required by POSIX and
    we're not even using the define!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 5 22:08:23 2012 -0500

    Switch the use of LOCKDIR in acconfig.h to --enable-lockdir.

Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 5 21:00:58 2012 -0600

    Merge branch 'master', remote-tracking branch 'origin'

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 5 13:39:47 2012 -0500

    Garbage collect all of the old UCI #ifdef'd code.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 5 12:26:48 2012 -0500

    Update this with mh-e changes.

Merge: 220dcd2 edc8d46
Author: David Levine <levinedl@acm.org>
Date:   Thu Jan 5 11:14:56 2012 -0600

    Feed fileproc and mhlproc from rcvdist, send, and whatnow to post.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 4 21:05:45 2012 -0600

    Feed fileproc and mhlproc from rcvdist, send, and whatnow to post.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Jan 5 12:05:43 2012 -0500

    Bring in all of the mh-e support that is actually used to be compiled by
    default, and garbage collect the stuff that is not used.

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 4 21:05:45 2012 -0600

    Feed fileproc and mhlproc from rcvdist, send, whatnow, and whom to post.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 22:28:44 2012 -0500

    Whoops, for right now we do need those signal function checks.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 22:21:07 2012 -0500

    Switch to standard autoconf macro for checking d_type field in struct dirent.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Mon Dec 26 09:19:35 2011 -0800

    Remove #ifdef around use of sigsetjmp().

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 19:17:58 2011 -0800

    Remove overrides for 'broken' stat macros.
    Remove redundant SEEK_* macro definitions.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 17:20:26 2011 -0800

    Include <stdio.h> for snprintf() prototype.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 12:23:41 2011 -0800

    Nuke directory processing conditionals; use dirent.h.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 12:16:08 2011 -0800

    Add back missing include of <sys/wait.h>

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 12:09:21 2011 -0800

    Clean up process wait to use POSIX waitpid() interface.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 22:01:07 2012 -0500

    No longer check for the mkstemp() function in the mkstemp library.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 11:58:38 2011 -0800

    Make use of mkstemp() unconditional (vs. mktemp().
    
    This patch also removes the m_scratch() and m_tmpfil() functions.
    They have been deprecated for a while, and are no longer used in any of
    the code base.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sun Dec 25 11:28:07 2011 -0800

    Remove compatibility functions that are always provided by the
    POSIX host environment.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 21:54:07 2012 -0500

    Get rid of checking for vfork(), since we no longer use.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 18:18:22 2011 -0800

    Replace <arpa/ftp.h> with "h/arpa_ftp.h".

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 18:17:10 2011 -0800

    Import non-Posix <arpa/ftp.h> for uip/ftpsbr.c.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 18:15:06 2011 -0800

    Remove HAVE_ARPA_FTP_H and arpa/ftp.h references.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 21:38:07 2012 -0500

    Remove autoconf ospeed checks

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 16:38:47 2011 -0800

    Ignore OSPEED/ospeed in termcap. Nothing current should need this.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 21:12:11 2012 -0500

    No longer check for termio.h or termios.h

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 16:15:22 2011 -0800

    Collapse termio/termios/sgtty terminal interface code down to
    the Posix termios interface.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 21:06:45 2012 -0500

    Update configure file for removal of POSIX-mandated header files.

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 15:40:48 2011 -0800

    Eliminate '#ifdef HAVE_FOO' for Posix-mandated FOOs.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 20:27:45 2012 -0500

    No longer need to check for the existance of sys/utsname.h

Author: Lyndon Nerenberg <lyndon@orthanc.ca>
Date:   Sat Dec 24 15:30:53 2011 -0800

    Deprecate uname() in favour of (Posix) gethostname().

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 20:20:26 2012 -0500

    Sigh.  I put the documentation about the -tls switch in the long description,
    but not in the command summary.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 16:30:50 2012 -0500

    Updated pending-release-notes

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 3 15:16:29 2012 -0600

    Added note about cpio failing to unpack an nmh tarball.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 15:17:54 2012 -0500

    Switch to using buffered I/O when doing TLS (but only for output).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jan 3 10:36:14 2012 -0500

    Updated these files since we've finally got 1.4 out the door.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 27 22:41:24 2011 -0600

    Moved #endif so that lockit () is only declared with DOT_LOCKING, to avoid compile warning without it.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 27 22:38:52 2011 -0600

    Reworked nmh.spec to support rpmbuild from source RPM.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 25 15:00:49 2011 -0600

    Removed unused vmh.c and wmh.c.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 24 20:28:50 2011 -0600

    Changed second argument of calls to part_ok() and type_ok() from
    0 to 1, to match what store_multi() in mhstoresbr.c does.
    
    A test case is below.  Without this fix, the following command:
    
      mhshow -part 1.1 -form mhl.null
    
    produced no output.  mhlist showed a part 1.1:
    
     msg part  type/subtype              size description
    1231       multipart/mixed            276
         1     multipart/related          107
         1.1   text/plain                  29
    
    and "mhstore -part 1.1" properly stored it.  With this
    fix, mhshow behaves properly and shows the part.
    
    Analogous behavior happened with -type text/plain.
    
    test case:
    
    MIME-Version: 1.0
    Content-Type: multipart/mixed; boundary="NextPart_001"
    Content-class: urn:content-classes:message
    Date: Thu, 19 May 2011 00:00:00 -0000
    From: sender@example.com
    To: recipient@example.com
    
    This is a multi-part message in MIME format.
    
    --NextPart_001
    Content-Type: multipart/related;
    	type="multipart/alternative";
    	boundary="NextPart_002"
    
    --NextPart_002
    Content-Type: text/plain;
    	charset="utf-8"
    
    This is the text/plain part.
    
    --NextPart_002--
    
    --NextPart_001--

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 24 19:36:32 2011 -0600

    Replaced cvs with git references.  I'm not sure about the cgit
    URL at the very end.  Also removed mention of source directories
    that were deprecated and removed long ago.

Author: David Levine <levinedl@acm.org>
Date:   Sat Dec 24 09:59:45 2011 -0600

    Added --with-rpmdir configure option so that user can set location of RPM build root.

Author: David Levine <levinedl@acm.org>
Date:   Tue Dec 13 18:33:07 2011 -0600

    Added comments about source of description, etc.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 12 22:50:06 2011 -0600

    Replaced use of GNU make shell function with backticks.  These were
    for the rpm target, which would most likely only be build on Linux.
    So they probably would have been OK, but just in case.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 12 22:25:52 2011 -0600

    The docs/Makefile install target didn't do anything before.  Added
    the files that go into doc to it, and removed them from nmh.spec.
    nmh.spec should now require zero maintenance.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 12 21:45:17 2011 -0600

    Added RPM/ so that git status doesn't mention that it's an untracked file.

Merge: d7f7173 bc20acd
Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 12 21:37:47 2011 -0600

    Merge branch 'master' of git.sv.nongnu.org:/srv/git/nmh

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 12 21:35:52 2011 -0600

    Moved version number from nmh.spec to Makefile.in, to minimize
    maintenance for nmh.spec.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Dec 12 12:59:42 2011 -0500

    Make sure to not reset hghnum (in the Maildir code) if we are incorporating
    mail from a POP mailbox.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 11 17:03:56 2011 -0600

    Added first cut at nmh.spec, along with rpm: target in Makefile.in.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 11 13:44:50 2011 -0600

    Removed netdb.h because we no longer distribute it.

Author: David Levine <levinedl@acm.org>
Date:   Sun Dec 11 10:24:20 2011 -0600

    Removed unused local variables to eliminate warnings from gcc 4.6.2.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 7 12:00:26 2011 -0500

    Make sure to ignore the nmh dist file.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Dec 7 11:36:53 2011 -0500

    Since we're now moving past 1.4, bump this.

Author: David Malone <dwmalone@maths.tcd.ie>
Date:   Wed Dec 7 10:19:40 2011 -0500

    Add support to inc for incorporting email from Maildir dropboxes.
    
    Add missing #include for <sys/socket.h> to bring in definitions of PF_UNSPEC.
    
    Signed-off-by: Ken Hornstein <kenh@pobox.com>

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Apr 13 10:50:49 2011 -0400

    Whoops, user & port were in the wrong order so msgchk didn't work for POP
    connections.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Feb 21 20:44:30 2011 -0500

    Updated the developer README with a few notes about the git conversion.
    
    Signed-off-by: Ken Hornstein <kenh@pobox.com>

Author: Paul Vixie <vixie@vix.com>
Date:   Mon Feb 7 14:13:54 2011 -0500

    Signed-off-by: Ken Hornstein <kenh@pobox.com>
    
    More documentation about the hooks support.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Dec 21 16:50:24 2010 +0000

    Clean up code in inc.c
    
    Clean up the confusing use of a variable 'i' in inc.c.
    The case where it was being used as 'an error occurred
    which means we should not truncate the mailspool' is now
    called 'incerr' and merged with the equivalent 'p' variable
    used in the POP-specific code. Cases where it was being
    used as a random temporary are still called 'i' but now
    declared with a much more restricted scope.
    This fixes a compilation warning for some compilers.
    
    Signed-off-by: Peter Maydell <peter.maydell@linaro.org>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 21:13:32 2010 +0000

    Suppress tsort diagnostic waffle
    
    tsort produces waffle to standard error if it detects loops in its input.
    For our purposes in ordering object files this is harmless, so just send
    it all to /dev/null.
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 21:13:32 2010 +0000

    Fix unused-function warnings in lex output
    
    Fix the unused-function warnings in the output of lex. In particular, we
    silence a warning about yyunput being static but unused by exposing it as
    a global function. This costs us a few hundred bytes in the binary but
    the other available solutions are flex-specific or more complicated.
    YY_NO_UNPUT used to silence this but no longer works in recent flex.
    On the other hand YY_NO_INPUT does work to silence warnings about input().
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 21:13:32 2010 +0000

    Fix used-uninitialised warning in fmt_rfc2047.c
    
    Fix a used-uninitialised warning in fmt_rfc2047.c.
    I don't think it can actually be used uninitialised, but the
    code is too complicated for the compiler to realise this.
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 21:13:32 2010 +0000

    Fix used-uninitialised warning in new.c
    
    Fix a used-uninitialised warning in new.c by having the check_folders()
    routine return first=last=NULL for empty folder lists. This is a more
    sensible API anyway. (It would not actually have been possible for
    the code to try to use last while it was uninitialised, as it happens.)
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 21:13:32 2010 +0000

    Fix crash if fnext/fprev are given an empty folder list
    
    Add a check for a NULL pointer, which stops fnext/fprev
    from segfaulting if given an empty folder list (for example
    via 'fnext -folders emptyfile').
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Dec 20 19:54:43 2010 +0000

    Fix warning in sbr/folder_addmsg.c by code cleanup
    
    Clean up some rather oddly written code in folder_addmsg()
    so it is easier to understand for both humans and for the
    compiler (and the compiler thus stops complaining about an
    uninitialised variable).
    
    Signed-off-by: Peter Maydell <pmaydell@chiark.greenend.org.uk>

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 16 13:20:31 2010 -0500

    Fix so this compiles without SASL support.
    
    Damn you, Oliver Kiddle, for finding all of the bugs I add to nmh!

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 16 13:11:17 2010 -0500

    All of the arguments to AC_ARG_ENABLE need to be quoted, otherwise the
    last action doesn't make it into the configure script.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 16 13:02:32 2010 -0500

    Make sure we ignore config.h.in~

Author: Markus Schnalke <meillo@marmaro.de>
Date:   Thu Dec 16 01:36:43 2010 +0100

    fix typo and clarify two sentences in mhpath man page

Author: Markus Schnalke <meillo@marmaro.de>
Date:   Thu Dec 16 01:25:11 2010 +0100

    improve mhparam man page

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Thu Dec 16 01:23:16 2010 +0100

    fix badly formatted code found by Markus Schnalke

Author: Scott Snyder <snyder@bnl.gov>
Date:   Wed Dec 15 22:17:52 2010 +0100

    propagate and check return status of close() in slocal

Author: Markus Schnalke <meillo@marmaro.de>
Date:   Wed Dec 15 22:02:30 2010 +0100

    document msg parameter to folder

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Dec 14 18:04:01 2010 +0100

    switches need to be renumbered following removal of some switches so,
    e.g. inc -version was not working

Author: Ken Hornstein <kenh@pobox.com>
Date:   Thu Dec 9 15:29:29 2010 -0500

    Massive garbage collection.  Remove functionality for APOP, RPOP,
    all NNTP support (including bboards) and MPOP.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 8 14:36:36 2010 -0600

    	* uip/whatnowsbr.c: enforce requirement of at least one file
    	  argument to attach command.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 8 10:47:03 2010 -0600

    man/send.man: added name= portion to Content-Type
    headers to reflect 2006-10-24 change to uip/sendsbr.c.
    That change allowed mhstore to use the (file)name when
    extracting attachments.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Dec 3 15:23:11 2010 -0500

    Remove RCS keywords, since they no longer work after git migration.

Author: Ken Hornstein <kenh@cmf.nrl.navy.mil>
Date:   Thu Dec 2 21:04:30 2010 -0500

    Whoops, forgot to bracket the calls for TLS shutdown with a #ifdef TLS_SUPPORT

Author: Ken Hornstein <kenh@cmf.nrl.navy.mil>
Date:   Thu Dec 2 20:37:54 2010 -0500

    Update for git conversions (and cleanup of autogen.sh to use autoreconf)

Author: Ken Hornstein <kenh@cmf.nrl.navy.mil>
Date:   Thu Dec 2 18:03:22 2010 -0500

    Change configure.in to emit a warning when an argument is given to
    --with-cyrus-sasl.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Sun Nov 21 22:19:51 2010 +0000

    Fix the test for sasl.h to look in the correct place.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Nov 19 20:13:39 2010 +0000

    (Minor) cleanup of some of the autoconf code with respect to the handling
    of compiler flags for SASL, and also rototill (and simplify) the autoconf
    handling for the same.
    
    Add TLS support for the SMTP MTA.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Fri Nov 12 23:28:26 2010 +0000

    man/slocal.man: fix formatting error that meant a subsection heading
    wasn't displayed as such. Followon cleanup: since the new heading is too
    wide to fit in the margin, tidy the margin to 4 characters wide so we
    are consistent with how all the headings are displayed.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed Nov 10 22:26:07 2010 +0000

    configure.in: add a level of expansion for mandir when printing the
    end-of-configure install path summary.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Nov 9 21:33:22 2010 +0000

    man/rmm.man: fix error in synopsis: the option is [no]unlink, not [no]link.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Fri Nov 5 22:06:10 2010 +0000

    Silence a (harmless) uninitialized variable warning.

Author: David Levine <levinedl@acm.org>
Date:   Tue Aug 31 15:00:53 2010 +0000

    	* uip/.cvsignore:  added "new".

Author: Earl Hood <earl@earlhood.com>
Date:   Sat Feb 6 07:47:38 2010 +0000

    #ifdef AI_ADDRCONFIG since older IPv4-only systems may not define this flag,
    causing files that use to not compile.

Author: Earl Hood <earl@earlhood.com>
Date:   Sat Feb 6 07:45:47 2010 +0000

    Fixed variable declaration so older compilers will not complain.
    I.e. Older compilers may not support C99, so variables must be
    declared at the beginning of a block.

Author: Earl Hood <earl@earlhood.com>
Date:   Thu Feb 4 01:39:21 2010 +0000

    * Bug #15213, #18635: The use of the insecure m_scratch() and
      m_tmpfil() functions have been replaced by m_mktemp()
      or m_mktemp2() functions (defined in sbr/m_mktemp.c).
      The new functions use mkstemp() to securely create
      temporary files to avoid the numerous race conditions
      that exist with the old functions.  This does assume
      that mkstemp() is available.  Unsure if we need to
      create an alternative implementation if mkstemp() is
      not available.  More information about new temp file
      functions in m_mktemp.c, including the support for
      MHTMPDIR, TMPDIR, and TMP envvars.
    
    NOTE: The files sbr/m_scratch.c and sbr/m_tmpfil.c should be removed.
    Until more testing verifies changes to support new functions have not
    broken functionality, the files are be left in the tree, but comments
    have been added stating the functions in them should not be called.

Author: Earl Hood <earl@earlhood.com>
Date:   Wed Feb 3 05:56:56 2010 +0000

    * mts/smtp/smtp.c: added SASL support if mts configuration
      setting is set to "sendmail".  This is useful if sendmail
      conf option is to a custom script that creates a proxy
      connection to an smtp server.
    
    * sbr/mts.c: added support for MHMTSCONF and MHMTSUSERCONF
      envvars.  The former specifies an alternative system
      mts.conf to use.  The later specifies a user-specific
      mts.conf to use.  This one will be read after the system
      conf, so the user's conf only needs to set options they
      want to override.  The MHMTSUSERCONF allows a user to set
      personal alternative mail submission methods w/o affecting
      other users on the system.
    
    * uip/whom.c: added SASL-based options so address checking
      can work against a server that requires SASL.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 30 01:42:45 2009 +0000

    	* uip/mhlistsbr.c, uip/mhlsbr.c, uip/picksbr.c: cast
    	pointers to unsigned long before casting to unsigned int
    	to avoid warnings on 64-bit about casting from pointer
    	to int of different size.

Author: David Levine <levinedl@acm.org>
Date:   Wed Dec 30 01:41:47 2009 +0000

    	* uip/new.c: cast folder_len to int to avoid warning on
    	64-bit about passing a size_t to an int conversion specifier.

Author: David Levine <levinedl@acm.org>
Date:   Fri Dec 25 14:47:39 2009 +0000

    	* uip/inc.c: gcc 4.4.1 noticed that maildir could have been
    	used before initialization.  In fact, if that code was ever
    	reached, maildir would never have been initialized.  It's in
    	an adios call, so replaced with NULL.

Author: David Levine <levinedl@acm.org>
Date:   Mon Dec 21 17:18:04 2009 +0000

    * mts/smtp/smtp.c: In sm_auth_sasl (), removed zeroing of
    sasl_inbuffer because it could be used in sm_fget ().  Also,
    removed allocation of sasl_inbuffer because that was done in
    either smtp_init () or sendmail_init ().

Author: Josh Bressers <josh@bress.net>
Date:   Mon Jan 26 13:38:13 2009 +0000

    Remove duplicate sm_fgetc() declaration

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jan 21 19:38:36 2009 +0000

    Fix warning in getaddrinfo() call.
    Add missing support for -port in whatnow.
    Make sure the SASL input buffer is allocated when using the sendmail mts.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Sun Jan 18 04:48:42 2009 +0000

    	* etc/mhn.defaults.sh: Never try to make mhshow start xterm.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Sat Jan 17 16:53:07 2009 +0000

    Note 'new' commands.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Sat Jan 17 16:47:29 2009 +0000

    	* test/runtest, test/tests/inc/test-deb359167,
    	test/tests/inc/test-eom-align, test/tests/manpages/test-manpages:
    	Load common.sh via absolute path, otherwise some /bin/sh
    	(e.g. dash) can't load it.
    
    	* uip/Makefile.in, uip/new.c, test/tests/new/test-basic: Add new
    	program, and fn/fp/unseen symlinks.
    
    	* test/{runtest,setup-test}: Move MH profile under Mail directory
    	so each test script will have its own to muck with, if needed.
    
    	* h/Makefile.in, h/crawl_folders.h, sbr/Makefile.in,
    	sbr/crawl_folders.c, uip/folder.c: Extract the folder crawling
    	code from folder.c into new crawl_folders function, using a
    	callback to assemble the folder info in folder.c.  Drop compare
    	function and use strcmp instead.  Rename addfold and addir to
    	add_folder and add_children (add dir vs. add folder?
    	confusing names).

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 16 15:48:09 2009 +0000

    Move freeaddrinfo() to inside of our loop; this prevents a memory leak
    and also prevents it from being called with a NULL pointer.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Jan 16 02:28:54 2009 +0000

    Massive overhaul of networking code.  Changes:
    
    - All networking interfaces now converted to new APIs (getaddrinfo() and
      the like).  All networking now supports IPv6 (with the exception of
      the built-in FTP client).
    - SASL security layers are now supported for SMTP.
    - Command-line and profile-based selection of the SMTP server and port.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Fri Dec 26 21:54:19 2008 +0000

    * sbr/m_getfld.c: fix two bugs which could cause us to walk off
    the beginning of the stdio or prefix-string buffer when checking
    for presence of the end-of-message delimiter in some situations.
    This might cause inc to dump core if you were unlucky. (This was
    Debian bug 359167.)
    * test/tests/inc/{md5sums,msgheader.txt,test-deb359167,
    test-eom-align,fromline.txt,filler.txt,deb359167.mbox}: new tests
    both for the specific problem and to try to check various alignments
    of the eom string with the stdio buffer ending.
    * test/common.sh: Added some functions for doing progress indicators.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Fri Dec 26 16:32:07 2008 +0000

    test/common.sh: new file for common utility functions for the test scripts.
    Moved findprog out of manpage test script into this new file.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu Dec 25 23:30:33 2008 +0000

    test/runtest: automatically run setup-test if it hasn't already
    been done. Improve error handling in test script with 'set -e'.

Author: David Levine <levinedl@acm.org>
Date:   Thu Oct 23 18:38:22 2008 +0000

    	* h/mh.h: raised NAMESZ from 128 to 999.  RFC 2822 limits line
    	lengths to 998 characters, so a header name can be at most that long.
    	m_getfld limits header names to 2 less than NAMESZ, which is fine,
    	because header names must be followed by a colon.  Add one for
    	terminating NULL.

Author: David Levine <levinedl@acm.org>
Date:   Thu Oct 23 18:14:52 2008 +0000

    	* sbr/m_getfld.c: in warning message, use NAMESZ-2 instead of
    	NAMESZ-1 bytes because the message says "exceeds", not
    	"is greater than or equal to".

Author: David Levine <levinedl@acm.org>
Date:   Thu Oct 23 16:45:36 2008 +0000

    	* docs/MAIL.FILTERING: added note on removing procmail -f or
    	-r options to try to suppress generation of a "From " line on
    	incoming messages.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Tue Aug 19 04:36:42 2008 +0000

    +mhn.defaults.sh.cfg

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 19:47:29 2008 +0000

    	* test/setup-test: Don't run autogen.sh unless needed.  Build in a
    	blddir under the temporary directory so as not to interfere with
    	whatever the developer may be doing in the source directory.
    	If the temporary directory already exists, rebuild and install it.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 06:19:08 2008 +0000

    This is what happens with last-minute "safe" improvements: actually point
    chset to something in the new merged InitText!

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 01:50:45 2008 +0000

    	* sbr/ambigsw.c: Send print_sw output to stderr.  This avoids
    	strange problems with scan `pick -bogus`, not to mention being
    	nicer anyway.
    
    	* sbr/getans.c, sbr/print_help.c, uip/msh.c: Send print_sw output
    	to stdout.
    
    	* h/prototypes.h, sbr/print_sw.c (print_sw): Add FILE * argument
    	and send output there rather than to stdout.
    
    	* test/tests/pick/test-stderr: Add test that error messages don't
    	end up going to stdout.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 01:31:11 2008 +0000

    	* uip/pick.c: Ensure valid sequence name as soon as we parse it from
    	command, instead of searching the messages first.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 01:28:56 2008 +0000

    	* uip/pick.c: Print matching messages immediately, instead of
    	waiting until the very end to print anything.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 01:11:12 2008 +0000

    	* uip/Makefile.in, uip/popi.c: Remove popi.c, which has been dead
    	since PatchSet 257 (2000/06/12 11:07:34 UTC).

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Thu Aug 14 00:56:38 2008 +0000

    	* h/mhparse.h: Move interfaces also used by mhbuildsbr.c here
    	from mhparse.c.
    
    	* uip/Makefile.in (mhbuild): Build with mhparse.o.
    
    	* uip/mhbuildsbr.c: Drop the duplication of mhparse.c.
    
    	* uip/mhbuild.c, uip/mhlist.c, uip/mhn.c, uip/mhshow.c,
    	uip/mhstore.c, uip/mhtest.c: Drop check swdeclaration, which is
    	now in mhparse.h.
    
    	* uip/mhparse.c: Move some declarations to mhparse.h, and remove
    	'static' from the definitions here.
    	(get_ctinfo): Take magic mhbuild support from mhbuildsbr.c's copy,
    	and adapt callers.
    	(incl_name_value, extract_name_value): Move from mhbuildsbr.c to
    	support get_ctinfo change).
    	(get_content, open7Bit): Add Content-Disposition support, added to
    	mhbuildsbr.c's copy in mhbuildsbr.c r1.12 (PatchSet 549).
    	(InitText): Default to CHARSET_UNSPECIFIED instead of "US-ASCII",
    	as mhbuildsbr.c's copy did.  Explain termproc.
    	(openBase64, openQuoted, open7Bit): Fix comment from r1.5:
    	suffixes, not prefixes.
    	(openMail): Explain showproc.
    
    	* test/tests/mhshow/test-cte-binary: Add test for
    	Content-Transfer-Encoding: binary (Debian #136976).
    
    	* test/tests/mhbuild/test-forw: Add an mhbuild test, testing forw
    	with and without RFC-934 mode.  More mhbuild tests would be nice.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Wed Aug 13 23:59:56 2008 +0000

    Oops, meant to use $failed (number of failed checks) as the exit code.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Wed Aug 13 23:32:03 2008 +0000

    Add descriptive headers, as other tests have.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Wed Aug 13 18:27:36 2008 +0000

    	* test/tests/bad-input/test-header: Add test for it.
    
    	* sbr/m_getfld.c: If we reach the end of the line without finding
    	a ':' when parsing a header field, treat that line as the
    	beginning of the body rather than blowing up.  These messages are
    	usually spam, but it's nice to be able to at least scan them.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Wed Aug 13 01:01:12 2008 +0000

    	* test/tests/mhshow/test-qp: Test various valid and invalid
    	escape sequences.
    
    	* uip/mhparse.c (openQuoted): Simplify the decode-or-show for loop by
    	peeking ahead to the next byte(s) when encountering '=', and just let
    	invalid escape sequences through as literals (fixes bug #15245).

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Wed Aug 13 01:00:20 2008 +0000

    Ignore test-temp-dir.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Tue Aug 12 21:01:30 2008 +0000

    add one more hint for developers, to explicitly point at docs/README.developers

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Aug 12 18:04:29 2008 +0000

    autogen.sh (new file): add script for running the GNU autotools in the
    right order. Mention and use new script in the appropriate places.

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Fri Aug 8 23:45:24 2008 +0000

    	* sbr/discard.c, sbr/m_getfld.c, uip/scansbr.c: Add support for
    	DragonFlyBSD stdio (from NetBSD pkgsrc).

Author: Eric Gillespie <epg@pretzelnet.org>
Date:   Fri Aug 8 04:45:05 2008 +0000

    s/ls/cd/ in comment (probably pasted from test-ls)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Aug 5 21:06:00 2008 +0000

    uip/folder.c: chdir(nmhdir) in main rather than in dodir, which
    is called many times.  Drop the chdir in get_folder_info, which
    served no purpose at all.  If struct stat has d_type (BSD), use
    that to skip processing (strcmp, stat, and so on) of message
    files, mostly undoing the slow-down from the last change.
    Plus autoconf machinery to detect d_type field. Patch from Eric Gillespie.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Aug 5 19:09:03 2008 +0000

    Dump hacky overoptimisation in addir -- it doesn't actually get the case
    of symlinks to directories right. Patch from Eric Gillespie.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Aug 5 19:05:23 2008 +0000

    Simplify dodir/addir/addfold (patch from Eric Gillespie)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 18:47:56 2008 +0000

    bug #23319: rework the way we handle the working directory when invoking
    the user's shell, so that we don't have	issues when the cwd contains a
    space or shell special character.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 18:45:34 2008 +0000

    test/setup-test: use 'set -e' so we stop on compile failure.
    Configure --enable-debug for convenience in debugging.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 15:19:53 2008 +0000

    Add protective 'do { ... } while (0)' wrappers to multistatement macros

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 15:14:23 2008 +0000

    Bug #23436: fix some minor manpage syntax errors and add a test which runs
    groff over them and checks that no warnings are emitted.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 15:13:34 2008 +0000

    Allow tests to indicate that they have been skipped by printing their
    own message and returning with exit status 120.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 13:59:19 2008 +0000

    Ignore editor backup files

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 13:54:37 2008 +0000

    etc/replcomps, etc/replgroupcomps: Trim trailing whitespace from
    Subject field (patch from Eric Gillespie)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Aug 3 13:32:17 2008 +0000

    When doing an if-test on the result of a function which returns a string
    result, check whether the string is non-empty (as the documentation says we
    do). Previously we were always testing the integer 'value'.

Author: Josh Bressers <josh@bress.net>
Date:   Fri Jul 25 01:07:39 2008 +0000

    * test/setup-test: Run 'make clean' before building

Author: Josh Bressers <josh@bress.net>
Date:   Fri Jul 25 00:11:53 2008 +0000

    * test/runtest: cat test-temp-dir only once.  Destroy and create
    test Mail hierarchy here, so each test has its own independent
    test data.
    
    * test/setup-test: Drop needless pushd/popd, which don't exist in
    sh anyway.  Don't use aclocal, which is part of automake.
    Don't create Mail hierarchy here (see test/runtest).
    
    * test/tests/folder/test-create, tests/folder/test-total: Drop
    unused BINDIR.
    
    * tests/pick/test-pick: Remove failing no-op test.
    
    * test/tests/scan/test-scan: Write expected and actual output to
    files and diff them.  This way, if the output differs, diff
    provides the FAILing exit code and shows the differences.

Author: Josh Bressers <josh@bress.net>
Date:   Fri Jun 13 00:11:49 2008 +0000

    * man/repl.man, etc/mhl.reply:
    Add an attribution line when replying to messages.

Author: Josh Bressers <josh@bress.net>
Date:   Thu Jun 12 23:29:16 2008 +0000

    Remove an accidentally committed file

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Jun 2 22:37:01 2008 +0000

    When building on gcc, use noreturn attribute on adios and the various done
    functions.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Jun 2 22:05:11 2008 +0000

    Back out previous, completely broken, change (due to a foulup I was
    compiling a different tree to the one I was committing to CVS).

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Jun 2 21:49:07 2008 +0000

    If we're compiling with gcc, mark adios() as never returning (better code
    and fewer spurious 'uninitialized variable) warnings)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Jun 1 16:50:22 2008 +0000

    Update bit of docs about release announcements.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu May 22 10:37:55 2008 +0000

    Don't use MB_CUR_MAX if we aren't compiled with multibyte support.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu May 22 10:21:48 2008 +0000

    Factor out common code for writing ls shell command. Rework its length
    checking so it doesn't rely on the return value of sprintf(), for the
    benefit of SunOS 4.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed May 21 18:05:49 2008 +0000

    Don't rely on realloc() to follow POSIX in handling a NULL pointer

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed May 21 17:16:44 2008 +0000

    Add some table size declarations for the benefit of elderly lexes with
    small defaults (eg SunOS 4)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue May 20 19:04:57 2008 +0000

    Update comment now we don't use lex -o.

Author: David Levine <levinedl@acm.org>
Date:   Sun May 18 13:56:58 2008 +0000

    * sbr/addrsbr.c: removed "err" from conditional, because gcc
    correctly warned that it would always evaluate as true.  It's
    the address of a static array.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Fri May 16 15:31:26 2008 +0000

    don't use $< in target rules in makefiles, as POSIX says it's only defined
    in inference rules

Author: David Levine <levinedl@acm.org>
Date:   Tue May 13 02:39:04 2008 +0000

    * configure.in, INSTALL: if --enable-masquerade is not
    specified to configure, enable all supported masquerade forms.
    This allows users to masquerade with the default
    configuration.	That seems to be more worthwhile now than
    trying to prevent users from using it, especially with
    single-user installations or those where a user can edit
    etc/mts.conf.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun May 4 20:58:35 2008 +0000

    bug #23167: sbr/ruserpass.c (ruserpass): make bad permissions on .netrc be
    an instantly fatal error. Previously we returned an error value; however, no
    caller was checking it. So now ruserpass() has a void return type.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun May 4 16:09:08 2008 +0000

    * bug #23163: various minor fixes for the benefit of older Unixes
    (specifically SunOS 4): reintroduce strerror() substitute implementation;
    provide memmove() substitute implementation
    * bug #23163: fix broken 'build outside source directory' feature
    * bug #23162: sbr/dtime.c: fix stray HAVE_TM_GMTOFF that wasn't updated
    to the new macro name.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed Apr 30 18:47:02 2008 +0000

    Provide SASL_CB_AUTHNAME callback (avoids problem with wrong username
    being sent in some situations)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Apr 29 21:05:30 2008 +0000

    Correct various places in smtp.c where the reply string might not have been
    correctly NUL-terminated. Includes a fix for a particularly nasty and long
    standing screwup where the buffer length counting in smhear() was totally
    broken for continued lines from the server.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Apr 29 20:59:04 2008 +0000

    Fix SASL issue properly, by making sm_rrecord() and thus sm_hear() set
    the length of the reply string correctly (the SASL libraries now care
    if you pass in the wrong length).

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Apr 29 20:53:33 2008 +0000

    Revert previous SASL fix (wrong approach)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Tue Apr 29 17:04:38 2008 +0000

    Cope with sasl_decode64() returning SASL_CONTINUE as well as SASL_OK.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Apr 28 21:13:53 2008 +0000

    Add remark about how to update the homepage.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 27 20:58:50 2008 +0000

    Update some of the 'how to do a release' documentation

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 27 20:55:28 2008 +0000

    Up version string to 1.3-dev for the CVS trunk.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 27 19:54:37 2008 +0000

    Use hyphen, not plus (corresponding to previous RCx naming convention)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 27 19:44:58 2008 +0000

    Bump version number, date for release of 1.3 RC1

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Fri Apr 11 14:12:54 2008 +0000

    move most remaining macros out of acconfig.h which is an obsolete feature of
    autoconf

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Apr 5 19:04:41 2008 +0000

    * bug #18655: fix use of admonish() for a fatal error (should
    be adios(); only actual effect would be wrong exit code).
    Thanks to Craig Leres for spotting this.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Apr 5 18:41:37 2008 +0000

    Bug #20028 (Debian bug 399271): fix code assuming that pointer
    differences were 32 bits -- thanks to Dean Gaudet for the patch.

Author: Josh Bressers <josh@bress.net>
Date:   Fri Jan 25 21:00:42 2008 +0000

    * uip/mhshowsbr.c (show_all_messages): Be more generous when parsing
        multipart messages.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Thu Nov 8 02:28:38 2007 +0000

    Insert types for args of some function pointers to improve type checking.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Nov 4 11:54:32 2007 +0000

    Return type of (*done)() changed to void. default_done() replaced by
    exit(). All dead code "return 1" lines removed from *_done()s and replaced
    by explicit "return 1" following done() calls in main()s (they should
    never be reached). This should make cleaning up program termination
    structures easier.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Nov 4 08:52:17 2007 +0000

    Refactor cts pointer and free()ing on abnormal exit of associated list
    into mhfree.c, eliminating duplication.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Nov 4 04:47:17 2007 +0000

    Change link-time overriding of done() to run-time reassigning of equivalent
    (*done)(). This should make changing the return type of done and the
    rationalisation of exit code easier.

Author: Bill Wohler <wohler@newt.com>
Date:   Mon Sep 24 07:02:03 2007 +0000

      The MH web site is now http://rand-mh.sourceforge.net/ and the MH
      book is now at http://rand-mh.sourceforge.net/book/.
    
    			  Changed Questions
    
    1.02 ...current version?	mailutils 1.2
    1.03 Where can I get MH?	Debian 4.0 nmh 1.1-RC4, update links, mu 1.2
    1.04 ...references for MH?	Refer to SourceForge
    1.06 How...print a MH manual?	Refer to SourceForge
    2.17 How...build MH on a Mac?	Use fink
    4.05 ...tools to archive MH?	Mention swish++, mairix, and namazu

Author: Josh Bressers <josh@bress.net>
Date:   Tue Aug 21 21:19:39 2007 +0000

    * Red Hat Bug #253342: inc.c, utils.c, utils.h: When inc is run with the
    -silent flag, don't exit(1) for no apparent reason.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 22:57:36 2007 +0000

    Rename functions to avoid clash with C library exp2().

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 22:34:04 2007 +0000

    Suppress 'uninitialised variable' warning.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 22:05:02 2007 +0000

    On Linux, define _GNU_SOURCE so that GNU libc exposes the wcwidth()
    prototype in wchar.h.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 22:01:04 2007 +0000

    Change name of internal function to avoid potential conflicts with GNU
    libc's getline() function.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 20:49:32 2007 +0000

    Minor rearrangement so variables/functions used only if !HAVE_LIBLOCKFILE
    are also declared only in that case.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Apr 29 19:36:14 2007 +0000

    For gcc, make the default CFLAGS include -Wno-pointer-sign if the compiler
    recognises it. gcc 4 now by default produces a large volume of these
    warnings, which I believe are probably spurious and definitely a lot of
    work to go through and fix. So we suppress them for now so that the other
    warnings are more easily visible.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 17 04:53:54 2007 +0000

    buffer is compared with cp, and so needs to be changed to unsigned too.

Author: Josh Bressers <josh@bress.net>
Date:   Tue Apr 17 01:02:08 2007 +0000

    Initial checkin of a testsuite

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Fri Apr 13 11:53:08 2007 +0000

    Change all chars being passed to the ctype macros (isalph(), etc.) to
    be unsigned chars, following through to change any other types as
    necessary (e.g. comparison between two pointers). Not all chars have
    been changed to unsigned chars; just those that were in danger of being
    sign extended when passed to the int-taking ctype macros.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 10 22:12:26 2007 +0000

    We're not using the .Bu macro anymore.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 10 06:13:27 2007 +0000

    Fix for bug #11139: mhl -form mhl.reply omits '> ' on some lines.
    
    putcomp() was assuming only the first call on the body had the buffer
    beginning at the start of a line.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 10 03:32:48 2007 +0000

    Application of patch #5218: patch for bug #9742. Fixes a typo in the
    size arg of snprintf(). mhlist output which used to have incorrect lines
    such as
         1.2   multipart/mixed            772
         1.21  text/plain                   9
         1.22  multipart/mixed            162
    now have the correct
         1.2   multipart/mixed            772
         1.2.1 text/plain                   9
         1.2.2 multipart/mixed            162

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed Mar 21 00:21:10 2007 +0000

    bug #18630, #18631, #18632, #18634: various patches from Craig Leres
    fixing error message argument problems.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed Mar 21 00:18:19 2007 +0000

    bug #15212: remove configure test for broken AT&T vi. This test was broken
    and unfixable. Support for manually defining ATTVIBUG remains.

Author: Josh Bressers <josh@bress.net>
Date:   Tue Jan 16 02:08:10 2007 +0000

    Add a missing header file

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Nov 5 13:20:46 2006 +0000

    Changed bold "-all" to unbolded "all". It's a reserved msgs word, not a flag.

Author: David Levine <levinedl@acm.org>
Date:   Tue Oct 24 14:31:40 2006 +0000

    * uip/sendsbr.c: with attachformat values of 1 or 2, add
    name= portion to Content-Type header.  This makes them
    consistent with attachformat value 0.  And it allows mhstore
    to use that (file)name when extracting attachments.

Author: Josh Bressers <josh@bress.net>
Date:   Sun Aug 27 01:19:39 2006 +0000

    * configure.in: If we're not using dotlocking, there is no need to set inc
    sgid.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Jun 4 08:37:24 2006 +0000

    Fixed bug introduced when changing from check_folder() to new
    create_folder() function. The folder name needed to be expanded to an
    absolute path first. Similar things may have happened with other
    conversions.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Thu Apr 27 12:00:28 2006 +0000

    Created pluspath function to check for '+' prefix and change flag for
    path() appropriately. This eliminates some duplicate prefix processing,
    but not all. The path functions need to be restructed; this is the first
    step.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Mon Apr 24 07:10:03 2006 +0000

    ssequal() does not check for a substring, but for a prefix, so added a
    comment to this effect. If this is sufficient, the function body should
    remain unchanged but the name and comments should be modified. If not,
    then the function needs to be corrected.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Sat Apr 22 16:33:48 2006 +0000

    fixes case where a very long character-class range (128 or
    more characters) causes negative indexing into pattern string.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Apr 16 06:47:59 2006 +0000

    Fixed a typo.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Fri Apr 14 14:10:15 2006 +0000

    Created function open_form() to open form file or fallback to default
    components file, with error handling. Replaced duplicated code with call
    to this function.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Fri Apr 14 08:42:04 2006 +0000

    Fixed a couple of typos.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Fri Apr 14 08:21:35 2006 +0000

    Sanitised some dodgy homedir finding code, but it still might not make
    sense.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Fri Apr 14 07:54:26 2006 +0000

    Get rid of some trivial warnings; unused variables, ambiguous if-else,
    missing headers.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Thu Apr 13 14:24:41 2006 +0000

    Make print_aka() and print_usr() static. They're not used outside ali.c.

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 11 14:09:11 2006 +0000

    Created app_msgarg() (append message arg) and a simple resizable array
    struct to go with it that do almost exactly what the code they've replaced
    was doing.
    Replaced this (duplicated) code in many files with a call to app_msgarg().

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Tue Apr 11 05:48:43 2006 +0000

    Completing the .cvsignore list(s).

Author: Joel Reicher <jjr@panacea.null.org>
Date:   Sun Apr 9 14:06:31 2006 +0000

    Fixed a small typo.

Author: Paul Fox <pgf@foxharp.boston.ma.us>
Date:   Fri Mar 31 15:14:49 2006 +0000

    this commit:
        - adds range support to character classes
        - fixes out-of-bounds references to the case-folding array
            when doing case comparisons for 8-bit message text
        - makes character classes as case tolerant as the rest
            of the pick regexp machine.  (where lowercase chars in
            patterns should match uppercase in the text.)
        - fixes an uninitialized pointer warning, which might actually have
            been a real bug

Author: David Levine <levinedl@acm.org>
Date:   Thu Mar 30 22:19:50 2006 +0000

    * uip/sendsbr.c: with attachformat values of 1 or 2, only
    generate Content-Disposition headers for MIME attachments, not
    for the message contents themselves.  Microsoft Outlook Build
    10.0.6626, at least, doesn't show the message contents if they
    have Content-Disposition.

Author: Bill Wohler <wohler@newt.com>
Date:   Fri Mar 10 09:00:20 2006 +0000

    			  Changed Questions
    
    1.03 Where can I get MH?	nmh 1.2

Author: Bill Wohler <wohler@newt.com>
Date:   Fri Mar 10 06:58:28 2006 +0000

    Since faqs.org appears to be moribund, I'm now using my site as the
    official location of the MH FAQ. I added some missing quotes in
    various places, so now Emacs highlighting works better.
    
    			    New Questions
    
    5.26 How do I fix a bogus In-Reply-To or missing References field?
    
    			  Changed Questions
    
    1.02 current version?		nmh 1.2
    1.04 references for MH?		New FAQ official site. MH-E manual URL
    5.15 make sense of replcomps?	Use 1.1 version

Author: Josh Bressers <josh@bress.net>
Date:   Thu Mar 9 19:51:13 2006 +0000

    * sbr/fmt_rfc2047.c (decode_rfc2047): Don't close the iconv descriptor if
      it isn't valid.

Author: Josh Bressers <josh@bress.net>
Date:   Wed Mar 8 12:14:15 2006 +0000

    * (mh_strcasecmp): Rename the private strcasecmp function to mh_strcasecmp.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Sun Mar 5 14:48:05 2006 +0000

    and close iconv handle if encoded block empty

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Sun Mar 5 14:38:23 2006 +0000

    don't try to malloc 0 bytes if an RFC2047 encoded block is empty

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Mar 4 22:14:18 2006 +0000

    Install scripts with INSTALL_SCRIPT so INSTALL_PROGRAM can be set to
    'install -s' without it causing the installation of the scripts to fail.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 25 14:14:06 2006 +0000

    * uip/sendsbr.c: replaced st_mtim with st_mtime, that's what
      it should have been.  Added #include of h/tws.h to pick up
      dtime() prototype.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 04:13:06 2006 +0000

    Replaced second line of Content-Tyhpe of -attachformat 0 example.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 03:58:31 2006 +0000

    * h/mh.h, h/prototypes.h, uip/mhbuildsbr.c, uip/send.c,
      uip/sendsbr.c, uip/viamail.c, uip/whatnowsbr.c, man/send.man:
      added -attachformat switch to send, to support alternate MIME
      header contents when using -attach.  See send man page for
      description.

Author: David Levine <levinedl@acm.org>
Date:   Tue Feb 21 03:51:53 2006 +0000

    * man/mhbuild.man: wrapped one appearance of "Content-Disposition"
      with quotes, to be consistent with others.

Author: Josh Bressers <josh@bress.net>
Date:   Tue Feb 21 01:11:51 2006 +0000

    * h/utils.h, sbr/utils.c, uip/flist.c, uip/folder.c: Move duplicate
      function num_digits into utils.c

Author: Josh Bressers <josh@bress.net>
Date:   Tue Feb 21 01:05:24 2006 +0000

    Add missing create_folder prototype.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Feb 20 03:09:07 2006 +0000

    * sbr/m_draft.c, sbr/utils.c, uip/folder.c, uip/inc.c, uip/mhstoresbr.c,
    uip/popi.c, uip/refile.c: Add create_folder() function, replacing duplicate
    code during folder creation.

Author: David Levine <levinedl@acm.org>
Date:   Sat Feb 18 16:26:37 2006 +0000

    Added support for optional Content_Disposition header in mhbuild directive.s

Author: David Levine <levinedl@acm.org>
Date:   Sun Feb 12 18:06:44 2006 +0000

    Added RFC2183 to reference of RFC1806 for Content-Disposition header.

Author: David Levine <levinedl@acm.org>
Date:   Tue Jan 31 02:50:57 2006 +0000

    Added -nocontentid (and -contentid, for symmetry) switch to mhbuild.  This allows users to disable generation of the Content-ID: header in MIME messages, in order to placate broken version(s) of Outlook.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Sun Jan 29 19:34:42 2006 +0000

    remove trailing newlines from components to fix bug with spaces at the end of
    Subject/References in replies

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Jan 18 18:08:16 2006 +0000

    use AS_HELP_STRING for formatting help messages

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Jan 18 17:07:28 2006 +0000

    add autoconf magic to support old systems that don't support multibyte charsets

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Jan 18 16:43:27 2006 +0000

    fix bug with insertion of newline being wrong if the num function was used at
    the end of the format buffer

Author: David Levine <levinedl@acm.org>
Date:   Wed Jan 18 00:09:00 2006 +0000

    Fixed make_bcc_file () to use contents of From: in draft, if draft_from masquerade flag is enabled.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Jan 17 18:06:58 2006 +0000

    more robust multi-byte/column support for field widths
    restore right justification feature

Author: Josh Bressers <josh@bress.net>
Date:   Mon Jan 16 17:07:14 2006 +0000

    * uip/post.c, uip/spost.c: Move the uptolow macro from spost.c to post.c
      where it is needed.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Jan 16 12:42:11 2006 +0000

    * sbr/fmt_scan.c: Add the missing wchar.h include

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Mon Jan 16 10:40:32 2006 +0000

    *** empty log message ***

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Mon Jan 16 10:00:46 2006 +0000

    remove remnants of code for MMDF

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Mon Jan 16 09:55:24 2006 +0000

    multiply buffer size by MB_CUR_MAX so multi-byte chars fit

Author: Josh Bressers <josh@bress.net>
Date:   Sun Jan 15 02:52:12 2006 +0000

    * sbr/fmt_scan.c:PUTSF() Fix an off by one formatting issue.

Author: Josh Bressers <josh@bress.net>
Date:   Sun Jan 15 02:29:38 2006 +0000

    * sbr/fmt_scan.c: Turn the PUTSF macro into a function capable of handling
    multi column characters.

Author: Josh Bressers <josh@bress.net>
Date:   Sat Jan 7 15:22:19 2006 +0000

    * Remove sbr/strerror.c -- strerror(3) is defined in C89.

Author: Josh Bressers <josh@bress.net>
Date:   Fri Jan 6 21:51:43 2006 +0000

    * patch #3968: Move the add() function from its own file (add.c) and
      into utils.c. There was also a duplicate add() function in mf.c which
      has been removed.

Author: Josh Bressers <josh@bress.net>
Date:   Wed Jan 4 02:10:25 2006 +0000

    * mh_xmalloc(), mh_xrealloc(), pwd(): Add comments describing the purpose
      of the function.

Author: Josh Bressers <josh@bress.net>
Date:   Tue Jan 3 01:08:33 2006 +0000

    Remove sbr/pwd.c file, moving the pwd() function into sbr/utils.c.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Jan 2 03:25:18 2006 +0000

    * patch #3967: Create a mh_xrealloc function to prevent mistakes when
    calling realloc.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Jan 2 03:17:41 2006 +0000

    * patch #3966: Create a mh_xmalloc function to prevent mistakes when
    calling malloc.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Dec 24 17:53:26 2005 +0000

    Avoid non-portable use of $< outside an inference rule.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Dec 24 17:17:38 2005 +0000

    Rework detection and handling of ndbm: we now check for a working
    (library,header) combination, and configure defines variables for each
    which the makefile and C file just use, rather than a bunch of HAVE_foo
    switches. As a bonus, we no longer unnecessarily link every binary with
    the ndbm library even though only slocal uses it. Also you can now tell
    configure where to get the header/library so even if we guess wrong you
    can overrule us.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu Dec 22 10:38:32 2005 +0000

    Fix stupid accidental dependence on a bash quirk in previous
    configure script change.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Dec 20 04:39:51 2005 +0000

    Rolled release.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu Dec 15 00:45:36 2005 +0000

    Improve the checks for where to find ndbm (dbm_open etc); should now
    work on systems with new gdbm and libdb4.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Thu Dec 15 00:12:52 2005 +0000

    Change some non-standard formatting in a previous log entry so it matches
    the conventions used in other entries.

Author: Josh Bressers <josh@bress.net>
Date:   Wed Dec 14 01:48:24 2005 +0000

    * Fedora Bug #163760: sbr/context_read.c (context_read): Ensure that the
    context is only read once.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Mon Dec 12 22:30:44 2005 +0000

    Fixed annotate call for new delete argument values.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Dec 12 20:26:53 2005 +0000

    * uip/sendsbr.c (annoaux): Fix the call to annotate()

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Thu Dec 8 15:57:34 2005 +0000

    *** empty log message ***

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Wed Dec 7 21:25:46 2005 +0000

    Fixed a bug where anno -append put the headers in the wrong place
    if applied to a message that didn't contain any headers.
    
    Added a special value of "all" to the -number option that causes
    anno -delete to delete all matching components instead of just
    the first one.
    
    Added new -preserve and -nopreserve options.  Using -preserve
    retains the original last accessed and last modified times on
    annotated messages.

Author: Josh Bressers <josh@bress.net>
Date:   Mon Dec 5 13:38:41 2005 +0000

    Fix the AC_PATH_PROG default when vi isn't found during build.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Sat Dec 3 23:41:39 2005 +0000

    Rolled version.  Should have done it last time!

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Nov 19 16:32:34 2005 +0000

    Make it clearer that lower-case envariables aren't supposed to be set
    by the user.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sat Nov 19 16:04:25 2005 +0000

    Special-case an MHCONTEXT of "/dev/null" and don't try to lock it -- some
    user scripts may use this to suppress modification of context.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Mon Nov 14 00:18:24 2005 +0000

    [bug #9813] Don't crash after removing the folder if the context file
    has no Current-Folder entry.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 13 23:57:49 2005 +0000

    Pass some globals into sm_init() so that it uses SASL if necessary.
    [NB that as I do not have a SASL setup I am relying on (a) the patch
    being obviously correct and (b) the original submitter having tested!]

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 13 23:56:30 2005 +0000

    Forgot to quote the bug number in the changelog comment.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 13 23:51:18 2005 +0000

    Use context/ctxpath==NULL to indicate that no context file should be read,
    to avoid inadvertently trying to lock /dev/null (takes 30secs+ with some
    locking methods).

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 13 22:36:07 2005 +0000

    Fix buffer overrun in address parsing code (would only show up if
    scan was run with -width 16536 or similar)

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Sun Nov 13 19:38:32 2005 +0000

    remove link to install-mh that caused problems on some systems

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Sun Nov 13 19:27:37 2005 +0000

    bug #739: install target now depends on all to avoid problem on
    case-insensitive file systems with the INSTALL file

Author: Josh Bressers <josh@bress.net>
Date:   Thu Nov 10 21:37:10 2005 +0000

    Fix the AC_PATH_PROG default when sendmail isn't found during build.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Wed Nov 9 22:56:35 2005 +0000

    Fix a non-ANSI prototype.

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Nov 8 20:22:33 2005 +0000

    Simon Burge: fix to handle getutent() on NetBSD

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Nov 8 17:18:09 2005 +0000

    update most references to the web page and mailing list locations

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Nov 8 16:58:08 2005 +0000

    prepend DESTDIR to install locations

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue Nov 8 16:51:34 2005 +0000

    replace obsolete autoconf macros

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 6 21:54:40 2005 +0000

    Fix various buffer overruns in fmt_scan.c; the bulk of this is passing
    buffer length through to decode_rfc2047() and having that function do
    sufficient bookkeeping to avoid running off the end of the buffer.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 6 00:34:56 2005 +0000

    Fix a compile error if building nmh with --enable-apop.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 6 00:32:20 2005 +0000

    Don't fclose() the file twice in error-exit paths from get_content()
    (was causing crashes on multipart mails with invalid Content-Type headers)

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 6 00:28:12 2005 +0000

    Remove space between -o and output filename so it works on older versions
    of flex as well as newer ones.

Author: Peter Maydell <pmaydell@chiark.greenend.org.uk>
Date:   Sun Nov 6 00:23:48 2005 +0000

    Add an AC_PREREQ so we don't just fail with an obscure error message if
    using old 2.13 era autoconf (or an autoconf-version-guessing wrapper).

Author: Josh Bressers <josh@bress.net>
Date:   Fri Nov 4 22:07:48 2005 +0000

    Update the instructions for subscribing to the nmh-workers list

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Nov 2 17:43:21 2005 +0000

    fail when kpop connection attempted without KPOP support compiled in

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Nov 2 17:29:50 2005 +0000

    fix for newer version of flex and remove autogenerated file from cvs

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Nov 2 17:22:27 2005 +0000

    speed up flist by skipping stat on files with numbers as names

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Nov 2 17:16:39 2005 +0000

    include new files in distribution

Author: Bill Wohler <wohler@newt.com>
Date:   Tue Oct 11 01:52:45 2005 +0000

      A couple of questions from nmh's original FAQ were folded into
      the MH FAQ which is now a part of nmh.
    
    			    New Questions
    
    1.09 What is the copyright status of nmh?
    3.23 Why do folder and flist overlook some of my sub-folders?
    
    			  Changed Questions
    
    1.02 current version?		nmh history update, nmh 1.1-RC4, mailutils 0.6

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Oct 5 10:05:24 2005 +0000

    Harald Geyer: back out fork/vfork workaround and handle the issue directly

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 13:45:03 2005 +0000

    use fork instead of vfork on Linux

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 13:27:44 2005 +0000

    test/report error writing to stdout

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 13:24:14 2005 +0000

    correct SASL include file locations

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 13:16:21 2005 +0000

    add bash completion definitions from Debian

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 12:57:40 2005 +0000

    fix a bug affecting AFS where nmh was setting the READONLY flag for a
    folder even when you do have write access to the folder

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed May 18 12:50:45 2005 +0000

    Carl Mummert: add unquote() function for removing quotes from RFC-2822 headers

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Tue May 17 16:30:15 2005 +0000

    fill in a few of the missing ChangeLog entries

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Feb 23 16:20:47 2005 +0000

    use iconv to convert RFC-2047 encoded headers to the character set used
    by the current locale

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Feb 23 14:07:52 2005 +0000

    fix Debian bug #202667: crash when a message's filename overflows an int
    when converted

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Wed Feb 23 11:55:25 2005 +0000

    Updated config.guess and config.sub to the most recent versions
    (from automake 1.9.5)

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Mon Feb 21 16:31:58 2005 +0000

    fix bug where inc crashed on failing to reopen the terminal

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Thu Jan 27 16:43:03 2005 +0000

    acknowledge that my change was based on an older patch from Michael Richardson

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Thu Jan 27 16:39:56 2005 +0000

    Added -proxy option to inc and msgchk

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Thu Jan 27 16:34:20 2005 +0000

    Added -proxy option to inc and msgchk

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Thu Jan 27 16:26:24 2005 +0000

    On systems where it is available, use nl_langinfo to get the character
    set if MM_CHARSET is unset

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Fri Jan 21 19:25:44 2005 +0000

    US-ASCII is a subset of UTF-8 so can be handled directly when UTF-8 is
    being used

Author: Oliver Kiddle <okiddle@yahoo.co.uk>
Date:   Fri Dec 17 15:16:04 2004 +0000

    Fix -part option to mhshow/mhlist/mhstore to find sub-parts of the specified
    part

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Fri Nov 19 05:06:16 2004 +0000

    Added mail directory argument to folder_addmsg in order to make it possible
    to provide a path to the ext_hook call that is mailpath-based.  A problem
    existed when a folder was a symbolic link and the pwd call would return
    the path relative to the filesystem, not to mailpath.  A new argument was
    needed because there was otherwise no reasonable way to get that path.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 16 18:14:34 2004 +0000

    Fixed problem where the refile hook was being called after a message was
    renamed so that it wasn't around for the hook.  The hook is now called
    before the message file is renamed.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 16 18:08:07 2004 +0000

    Fixed typo in comment.
    Fixed problem with refile hook when refiling across filesystems.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 16 17:37:41 2004 +0000

    Removed unnecessary code.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 16 17:28:33 2004 +0000

    Fixed wrong directory for hook when refiling with -src option.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Fri Oct 15 17:10:58 2004 +0000

    Fixed calling of external hooks.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Oct 12 21:14:02 2004 +0000

    Fixed another weird bug caused by the static mailpath being overwritten.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Oct 12 20:41:34 2004 +0000

    Fixed bug that caused anno to mangle headers.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Oct 12 20:40:25 2004 +0000

    Fixed strange bug that prevented a lock from ever being obtained if getting
    it failed the first time.  The problem was that the string of XXXXXX that
    is required by mkstemp() was overwritten the first time through, and so
    all subsequent times failed because mkstemp() failed.  The fix
    reinitializes the tmp file string.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Oct 12 20:38:10 2004 +0000

    Fixed bug in which the static maildir was overwritted if a format string
    was read from the profile.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Oct 12 20:31:14 2004 +0000

    Fixed bug that was producing an incorrect path for the external hook.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Oct 6 20:11:39 2003 +0000

    db configuration fix for Debian; yet another location for ndbm.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 19:55:12 2003 +0000

    restored use of PUTDF() macro; was broken in versions 1.10-1.12;
    replacement implementation filled on right instead of on left.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 16:57:26 2003 +0000

    [bug #4302] errno is not always an extern int
    The errno declaration is best left to errno.h; several systems use
    #define errno (*(___errno()))
    or similar

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 16:22:54 2003 +0000

    corrected termination condition for fill character introduced in last version

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 16:19:12 2003 +0000

    [bug #4296] PUTD() macro can't hack 10 digit values
    Once the number exceeded 1000000000, the conversion would fail.  An execution of
     dp -format "%(clock{text})" "Tue, 01 Jul 2003 21:38:05 +0700" would erroneously print
    749660476, instead of 1057070285.
    
    The macros PUTD() and PUTDF() have been replaced by snprintf() calls;  These macros
    should never have been written in the first place, when system functions exist to do the
    work.
    
    (prev version 1.10 was erroneously comitted).

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 16:07:49 2003 +0000

    [bug #4296] PUTD() macro can't hack 10 digit values
    Once the number exceeded 1000000000, the conversion would fail.  An execution of
     dp -format "%(clock{text})" "Tue, 01 Jul 2003 21:38:05 +0700" would erroneously print
    749660476, instead of 1057070285.
    
    The macros PUTD() and PUTDF() have been replaced by snprintf() calls;  These macros
    should never have been written in the first place, when system functions exist to do the
    work.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 14:36:04 2003 +0000

    [bug #4297] The strlen mh-format function can crash if 'str' is null.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 14:30:36 2003 +0000

    note recent changes

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 30 14:19:20 2003 +0000

    fix handling of "-list" and "-seq" options, so behavior is orthoganal.
    Previously, "pick -list -seq seqname" meant "pick -nolist -seq seqname".
    Now "pick -list -seq seqname" and "pick -seq seqname -list" do the same thing.
    Thanks to Robert Elz.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 28 14:27:34 2003 +0000

    update 'mp->lowmsg' from 0 to 1 during regular 'inc' from mail spool;
    avoids failure of 'folder_realloc()' for case of no messages in
    folder, and more than 100 messages to incorporate.  Initially,
    'folder_read()' will initialize 'mp->lowmsg' to 0, and 'mp->lowoff'
    to 1.  So the call would be folder_realloc(mp, 1, 200), and the
    comparison 'if (mp->nummsg > 0 && lo > mp->lowmsg)' will fail.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Sep 22 16:03:22 2003 +0000

    Removed space between command name and man section number (e.g.,
    "show (1)" --> "show(1)", so xemacs can recognize them as links to other
    man pages.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Sep 22 01:04:04 2003 +0000

    make 'spost' handling of "masquerade:" line of mts.conf containing
    'draft_from' same as for 'post'.  Debian bug report 144098, filed by
    Terran Melconian.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Sep 22 00:43:09 2003 +0000

    status of action wasn't saved for use by 'N' result, so when 'N' was
    used slocal could perform the action even if the previous
    action failed.  Debian bug report #149745, filed by Daniel Mller.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 21 18:08:35 2003 +0000

    Increase timeouts to comply with RFC 1123; Debian bug report #152728 by Ian Jackson

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 21 17:34:31 2003 +0000

    added cross references

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 21 17:09:31 2003 +0000

    fixed typo:  example for scan.default didn't include proper terminating
    %> for "%<{date} %|*%>"; reported as Debian bug #143427 by Peter Maydell

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 21 15:43:00 2003 +0000

    Apply bug fix reported to Debian (#136976) by Peter Maydell; allows
    messages with "Content-Transfer-Encoding: binary" to be
    displayed, per RFC 2045 section 6.2 paragraph 4

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Sep 21 02:39:58 2003 +0000

    corrected typo for nroff directive

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Tue Sep 16 14:27:55 2003 +0000

    add command to remove $(libdir)/install-mh prior to creating the link

Author: Jeffrey C Honig <jch@honig.net>
Date:   Sun Sep 14 13:25:55 2003 +0000

    The first ``inc'' into an empty folder would not update the unseen
    sequence.  This is because seq_list() will return NULL if mp->nummsg
    is zero.  Insure that mp->nummsg is incremented.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Sep 8 18:41:10 2003 +0000

    Man page fix from Igor Sobrado

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sat Sep 6 17:27:55 2003 +0000

    Added documentation of "Dcc", per recent discussion on mailing list
    (main contributors Jerry Peek and Robert Elz)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Sep 5 21:07:49 2003 +0000

    Merge in changes from the 1.1 branch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Sep 5 19:10:21 2003 +0000

    Fix from branch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Sep 5 18:37:47 2003 +0000

    Quiet lock warning.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Fri Sep 5 18:36:36 2003 +0000

    Merge in locking fixes into the main line.

Author: Jeffrey C Honig <jch@honig.net>
Date:   Mon Aug 11 01:20:52 2003 +0000

    When compiling format strings, nmh attempts to avoid multiple parsing
    of address and date fields by only inserting calls to the parse
    functions (FT_PARSEADDR and FT_PARSEDATE) for a given component once.
    The problem with this method is that the initial invocation may
    actually be on a code path that is conditionally executed.  This can
    result cached copies of data from the fields in previous messages to
    be used.
    
    My solution is to move this optimization from compile time to run time.
    Address and Date parsing calls (FT_PARSEADDR and FT_PARSEDATE) will
    always be included.  Run time flags are used to prevent these functions
    from being run more than once per component per message.
    
    The c_flags field has being converted from a boolean to a bit-field to
    facilitate maintenance of the new CT_PARSED value.  The result value
    that used to be in this field is now the bit CF_TRUE and the
    overloaded use of this field by scan() is now the CT_DATEFAB bit.
    
    Some unneeded flags (CT_ADDRPARSE, CT_MYMBOX) have also been removed.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Fri Jul 4 16:15:02 2003 +0000

    more detail for bugs fixed, so reader doesn't need to go to Bugzilla

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Fri Jul 4 15:55:55 2003 +0000

    update

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Wed Jul 2 02:24:19 2003 +0000

    restored use of %manext5% for man section, which was lost
    in version 1.4

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Wed Jul 2 02:03:19 2003 +0000

    Updated description of default template to reflect current
    change to In-Reply-To, and Fcc:

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Wed Jul 2 02:01:50 2003 +0000

    Default templates for 'comp', 'forw', 'dist', 'repl' now include
    Fcc: +outbox

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 30 19:43:26 2003 +0000

    use symbols for date and version so values are
    automatically updated during build.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 30 19:40:05 2003 +0000

    bump date so everything gets a new timestamp for 1.1

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 30 18:58:07 2003 +0000

    fix bug #1393, "sortm core dumps", using patch provided by
    Robert Elz, kre@munnari.oz.au.  The core dump occurred
    when "Subject:" was immediately followed by an
    alphanumeric, and "-textfield subject" were used
    as arguments.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 30 16:48:50 2003 +0000

    Re-write for clarity, using major contributions from
    Bart Massey, and Jerry Peek.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 30 16:40:09 2003 +0000

    made RFC 2822 compliant, using an "In-reply-to:" format
    supplied by Jerry Peek.

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Fri Jun 27 17:02:13 2003 +0000

    prevent double free of 'ce->cd_file' or later use of invalid data

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Thu Jun 26 01:30:36 2003 +0000

    fix for bug #578 repl leaks umask; there are several other
    places in the code where the umask value is not restored,
    so there might be other similar bugs

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Mon Jun 23 00:44:28 2003 +0000

    Changed use of GNU "simply expanded variables" for MAN1, MAN5, MAN8, so
    one makefile will work with SysV make (e.g., Solaris) and GNU make

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Jun 22 23:59:16 2003 +0000

    allow gdbm/ndbm.h in addition to db1/ndbm.h; needs corresponding change in
    configure.in

Author: Glenn Burkhardt <glenn@aoi.ultranet.com>
Date:   Sun Jun 22 23:58:07 2003 +0000

    Allowed gdbm as substitute for Berkeley db1/ndbm.h libdb1 (check for
    gdbm/ndbm.h, libgdbm now); send only stdout to /dev/null when checking for
    'broken vi', this allows 'vim' on Solaris to work, since 'vim' closes stdin
    and uses stderr for input when running a script.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Thu Jan 2 04:07:49 2003 +0000

    Fix detection of non-mime messages when the charset is not enclosed
    in double quotes.  (Not perfect yet, but 97% effective.)

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Thu Nov 21 21:22:24 2002 +0000

    Fixed a typo in the SRCS definition; had a .o where it should have been a .c

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Wed Nov 20 19:57:19 2002 +0000

    Fixed a bug in the waitpid version where it would return incorrectly if a
    child process was interrupted.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 19 20:39:21 2002 +0000

    Removed the reference to the library directory since this now goes in bin.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Tue Nov 19 20:37:50 2002 +0000

    Changed to move install-mh to the bin directory instead of the lib
    directory.  A link is made from the lib to the bin just in case.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Mon Nov 18 18:25:00 2002 +0000

    The file README-ATTACHMENTS was removed - it has been moved to the docs
    subdirectory.  I thought that this had already been done but I guess not.
    It's unrelated to the rest of these changes.
    
    The remainder of these changes affect the way that nmh is installed.  Nmh
    has historically prompted the user for installation when any nmh command
    is invoked if it doesn't think that it's installed.  This is a problem for
    programs that want to, for example, interact with nmh programs via pipes.
    
    These changes alter this behavior.  Now, when an nmh program thinks that
    nmh isn't installed, it tells the user to run install-mh to install it.
    A -check option has been added to install-mh that allows the existence of
    an installation to be silently checked and indicated via the exit status.
    
    The bulk of this change is in sbr/read_context.c.  In the process of making
    these changes, I noticed a fair amount of useless code that I removed.  In
    particular:
    
    1.	The program started with a test for whether or not defpath had already
    	been set.  This could only happen if context_read() was called more
    	than once, which it isn't.  This check also existed and was removed
    	from the following places:
    		sbr/context_del.c
    		sbr/context_find.c
    		sbr/context_replace.c
    		sbr/seq_read.c
    		sbr/seq_save.c
    		uip/flist.c
    		uip/folder.c
    		uip/rmf.c
    
    2.	A similar test for mypath was removed.  No need to test it since it
    	doesn't happen.  I'm just not a believer that
    
    		a = 1;
    
    		if (a != 1)
    			error();
    
    	is a good way to write code!
    
    3.	I removed the code makes a copy of the $HOME environment variable as
    	returned by getenv().  It's never changed, so it doesn't need copying.
    
    4.	I removed code that copied the pw_dir member of the passwd structure
    	returned by getpwuid() if $HOME isn't set.  Yes, the returned structure
    	is static, but since the function is never called again the returned
    	values stay valid and don't need copying.
    
    5.	I removed the test for a NULL pw_dir member in the passwd structure
    	returned by getpwuid() since that never happens.
    
    6.	I removed code that removed a trailing / from mypath if mypath is more
    	than one character long.  Unnecessary as // is interpreted as / anyway.
    	mypath never shows up in an error message, so nobody will ever see it.
    	Besides, this code didn't handle the case of multiple trailing slashes.
    
    7.	I removed code that replaced the MH environment variable contents with
    	an absolute path if it was a relative one.  I'm a bit nervous about this
    	one, only testing will tell.  Any nmh program that's invoked will use
    	the same context_read() code to convert a relative path to an absolute
    	one anyway.  And there's no guarantee (or discussion) of this feature
    	in any of the documentation.
    
    8.	Althout context_read() tested the MH environment variable, install-mh
    	didn't.  This means that the behavior was not consistent between
    	install-mh and all other nmh programs.  I changed install-mh to be
    	consistent with context_read().
    
    9.	install-mh has been installed in the lib directory, not bin.  So a
    	user would be unlikely to find it when prompted to run it.  The
    	installation has been changed to add a link from bin to lib.

Author: Anders Eriksson <aeriksson@fastmail.fm>
Date:   Mon Oct 21 19:32:26 2002 +0000

    Changed scan to always pass the folder argument. This is in line
    with the man page.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Mon Sep 9 14:30:16 2002 +0000

    New routine that provides interface to external programs.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Fri Aug 23 20:37:01 2002 +0000

    Added external program hooks.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Thu Aug 22 22:06:18 2002 +0000

    Moved this file here from the root directory.

Author: Jon Steinhart <jon@fourwinds.com>
Date:   Mon Aug 19 20:50:41 2002 +0000

    Added an improved user interface for sending messages with attachments.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Mon Jul 8 19:29:24 2002 +0000

    Remove this file on the head as well.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jul 3 14:49:24 2002 +0000

    Bring these changes over from the branch.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Wed Jul 3 14:08:11 2002 +0000

    Remove these undefines (why were they in there?)

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jul 2 22:10:55 2002 +0000

    Update for new version.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jul 2 22:09:12 2002 +0000

    Add/update copyright notice in all source code files.

Author: Ken Hornstein <kenh@pobox.com>
Date:   Tue Jul 2 21:46:37 2002 +0000

    Remove autoconf-generated files (and note such files in .cvsignore)

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Mar 17 11:28:27 2001 +0000

    Ken Hornstein's configure.in Cyrus SASL checks were doing
    `x"$with_cyrus_sasl" != "no"' instead of `... != x"no"'.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Mar 7 05:26:50 2001 +0000

    Found some historical information about MH in RFC 808.  Supplemented it with
    info from Jerry Peek's MH book and added it to docs/README.about.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Feb 6 20:47:54 2001 +0000

    dtimp timezone fixes

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Feb 6 20:35:40 2001 +0000

    Be more picky about symbolic time zones, and accept either a symbolic
    or numeric time zone, but never both, since a DST offset might be subtracted
    twice. Also, be uniform about assuming that pre-1970 dates are Y2K problems.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 6 04:28:04 2001 +0000

    Say in README.developers to use `\date' in case anyone is like me and
    has `date' aliased in their shell to use a nonstandard (but
    subjectively more readable) format.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 6 04:22:09 2001 +0000

    Regenerated stamp-h.in using my tcsh alias `date', which uses a
    nonstandard format.  Replacing it with the standard format.  I'll
    update README.developers to say to use `\date'.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 6 03:46:27 2001 +0000

    * -L isn't sufficient for specifying the path of the Cyrus SASL
      shared library.  That'll allow us to link successfully, but on
      many/most OSes that won't allow us to find libsasl at runtime.  On
      Solaris, we need to specify the library path with -R as well (or
      else the user will have to use the $LD_LIBRARY_PATH kludge, which
      is considered harmful).  This fix should be extended to other OSes
      as well.
    
    * Print whether we have SASL support in the "nmh configuration"
      summary configure prints out.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jan 25 21:28:30 2001 +0000

    man/mh-chart

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jan 25 21:15:52 2001 +0000

    use %etcdir% for spacing instead of hardcoding

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jan 25 21:14:32 2001 +0000

    compiled mh-chart with synopses of commands

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 23 20:27:57 2001 +0000

    digest

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 23 20:26:15 2001 +0000

    Don't try to force year into a 19xx format

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 23 04:14:08 2001 +0000

    SYNOPSIS formating to prevent filling

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Jan 19 21:32:13 2001 +0000

    manpages finished

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Jan 19 21:22:08 2001 +0000

    don't build vmh.1 since vmh isn't distributed, and we no longer need tmac.h

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Jan 19 21:10:09 2001 +0000

    show-whom

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jan 18 20:27:34 2001 +0000

    prompter-sendfiles

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:55:21 2001 +0000

    delete old files, manpage progress

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:45:26 2001 +0000

    removed deprecated files. sendmail functionality exists in mts/smtp/

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:41:44 2001 +0000

    Add an entry for README.manpages

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:40:12 2001 +0000

    Added popi.c to SRCS, even though it's not being built currently

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:13:55 2001 +0000

    removing mts/generic

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:10:03 2001 +0000

    deleting zotnet/ dir -- parts moved to sbr/

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 9 06:01:19 2001 +0000

    mh_profile-prev

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Jan 6 23:38:12 2001 +0000

    mh_tailor-mhbuild

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jan 4 07:07:41 2001 +0000

    Updating mh_sequence

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed Jan 3 06:29:06 2001 +0000

    mh_mail-mh_profile

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 2 08:10:46 2001 +0000

    mh-format

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 2 07:12:46 2001 +0000

    Modularizing the Makefile caused some variable expansion problems on non-GNU makes

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue Jan 2 06:43:07 2001 +0000

    mh_chart-mh_draft

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Jan 1 10:19:00 2001 +0000

    Updating ali-mh_alias

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 20:58:29 2000 +0000

    add about pointers to shared pages

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 20:55:48 2000 +0000

    Add date to files i missed last time

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 20:55:06 2000 +0000

    docs/README.manpages

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 20:48:50 2000 +0000

    Add manpage style guide

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 09:25:09 2000 +0000

    Updating inc

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 08:19:20 2000 +0000

    Updating comp-forw

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 06:31:42 2000 +0000

    add flists and folders as pointer pages to flist,folder. Modularize Makefile to allow easier addition of manpages

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 02:44:18 2000 +0000

    replace %components% and %distcomps% in man pages with corresponding files

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 31 02:43:34 2000 +0000

    updated ali-flist, with batch edit of others

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Dec 30 23:18:28 2000 +0000

    update ali,anno,ap.burst

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Dec 30 10:01:29 2000 +0000

    Updated man pages to remove dependence on tmac.h and have a more modern look

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Dec 30 10:00:42 2000 +0000

    DATE an manpage updating

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Dec 30 09:51:55 2000 +0000

    Use the DATE file

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sat Dec 30 09:50:13 2000 +0000

    Created DATE that contains a datestamp used in the man pages. It should be updated each release.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 24 10:13:45 2000 +0000

    hesiod and krb5 test changes. add --with-locking to INSTALL

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 24 10:06:30 2000 +0000

    Add documentation for --with-locking option

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 24 10:06:00 2000 +0000

    hesiod and krb5 test fixes

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 24 10:04:58 2000 +0000

    Fixed up the hesiod library test so that the location of res_send
    actually helps to determine whether -lresolv needs to be passed
    as a hesiod lib. Also, fixed the krb5 test to look for
    -lk5crypto if it exists, since that's the new name for -lcrypto.
    The old -lcrypto remains in case the new version isn't found.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Dec 23 06:11:03 2000 +0000

    -apop and -noapop were not documented in msgchk.man.  -snoop was documented but
    didn't appear in the usage SYNOPSIS.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 23:49:08 2000 +0000

    add --with-locking option

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 23:42:16 2000 +0000

    Autoconfing the file locking options

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 19:30:41 2000 +0000

    put both linux entries on one line

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 19:29:40 2000 +0000

    dtimep, MACHINES

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 19:21:29 2000 +0000

    Update to include Mac OS X and Linux 2.4

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 19:18:09 2000 +0000

    When building on Mac OS X, don't set LDFLAGS=-s, since the linker doesn't like the flag

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Dec 22 19:15:02 2000 +0000

    Take out memory hints, since we are assuming flex over lex, so this shouldn't be a problem

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed Dec 20 16:03:36 2000 +0000

    doc/README.developers update, and fixed typo in last ChangeLog entry

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed Dec 20 16:00:46 2000 +0000

    Marked deprecated directories in layout description, and added an entry for docs

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Dec 20 03:30:14 2000 +0000

    Just changed a "can" to a "could" since I don't know if most POP3 servers are
    like qpopper in not allowing people with APOP activated to log in via normal
    POP3.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Dec 20 03:18:33 2000 +0000

    -apop and -noapop were not documented in inc.man.  -snoop was documented but
    didn't appear in the usage SYNOPSIS.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Dec 17 19:52:04 2000 +0000

    Fixed a type from 'his' to 'this'

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Dec 14 14:55:17 2000 +0000

    config.guess/sub update

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Dec 14 14:35:40 2000 +0000

    config update procedure (probably unneccessary)

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Dec 14 14:32:09 2000 +0000

    Updated config.guess and config.sub from most recent version
    from ftp.gnu.org/pub/gnu/config, with timestamp='2000-12-07'.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Dec 14 03:14:08 2000 +0000

    Shantonu did his commit in the wrong order earlier today, making configure get
    re-built due to a "newer" configure.in.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Dec 14 01:38:41 2000 +0000

    Move mts/generic to sbr/

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Dec 14 01:30:43 2000 +0000

    Resolve the circular dependency of libmh on libmts on libmh. The
    files mts/generic/client.c and mts.c are moved to sbr/, and mts/generic/mts.h
    is moved to h/mts.h. Thus, libmh is self-contained. All header includes
    have been appropriately updated, and the Makefiles and configure script
    no longer build mts/generic.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Dec 12 06:19:25 2000 +0000

    When Shantonu made the new libmts.a, he swapped $(MTSLIB) and libmh.a in
    sbr/Makefile.in so that libmh.a comes first, but this causes the build to fail
    on Solaris, because libmts.a has to get ruserpass() out of libmh.a.  Swapping
    them back to the way Ken Hornstein's patch (which I applied on Jul 20) put them,
    with libmh.a correctly coming second.  If there are times when libmts.a needs to
    come second, then it would appear there's a circular dependency and someone
    (Shantonu?) did an mts merge incorrectly.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Sep 8 23:19:37 2000 +0000

    Just fixed a formatting error.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 01:39:10 2000 +0000

    Took out bad zones in dtimep

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 01:36:23 2000 +0000

    Took out incorrect time zones like JST and BST.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:49:32 2000 +0000

    Included code reorg of zotnet/mts

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:37:54 2000 +0000

    Don't make Makefiles in zotnet or mts/mmdf or mts/sendmail

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:36:48 2000 +0000

    Don't generate Makefiles for zotnet, or mts/mmdf and mts/sendmail,
    since they are no longer being compiled.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:34:41 2000 +0000

    Included h/nmh.h, since the MD5 algorithms were missing declarations
    for memcpy and memset (I think), which are indirectly included from
    strings.h

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:34:08 2000 +0000

    Updated #include's to point to new location of mts.h on mts/generic

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:32:47 2000 +0000

    No longer descend into zotnet/

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri Sep 8 00:30:58 2000 +0000

    Moved code from zotnet/mts to mts/generic. Also, unified generic
    mts code and smtp/sendmail into libmts.a as an intermediate, instead
    of having two static libs.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed Sep 6 22:48:43 2000 +0000

    Included changes to dtimep.lex to remove military zone parsing.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed Sep 6 22:40:03 2000 +0000

    Took out parsing of military time, which was causing issues when it
    encountered something like (MET), which it doesn't recognize as a timezone,
    and which was then read as military characters.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Aug 11 20:43:07 2000 +0000

    Further clarified Kimmo's etc/Makefile.in comments at his suggestion.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Aug 10 21:32:33 2000 +0000

    Changed my mind again on scan.MMDDYY and scan.YYYYMMDD.  Put the replied /
    encrypted column back in, because it's useful to "always" (at least when you
    aren't using replied / encrypted) have a space in between the message number and
    date, so you can use awk (with the default field separators) to grab message
    numbers from scan output.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Aug 10 20:33:25 2000 +0000

    Decided that limiting the message number columns to 3 on my scan.MMDDYY and
    scan.YYYYMMDD (to try to regain space taken by extra date info) was
    ill-conceived.  It's not that tough to get past 999 messages, though I imagine
    it's rather rare to exceed 9999.  Changed these to 4.  I had already removed the
    "replied / encrypted" column in YYYYMMDD, but this time I removed it on MMDDYY
    as well (I've never seen it used...).

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Mon Aug 7 18:42:20 2000 +0000

    Modify umask set by mhshow to enable user execute bit, so that viewers that
    create temporary directories (e.g., lynx) will be able to access them.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Aug 5 16:00:49 2000 +0000

    Kimmo's etc/Makefile.in change note implied that install was previously
    completely broken.  Not the case.  I asked Kimmo about it and he clarified that
    it failed when building outside the source tree.  Fixed the entry to reflect.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Aug 4 00:15:52 2000 +0000

    TODO: Allow multiple simultaneous differing contexts, probably each tied to a
    parent (terminal) process.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Tue Aug 1 14:55:53 2000 +0000

    Make "make install" work in etc/Makefile.in

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Jul 24 23:24:22 2000 +0000

    Renamed DSTXXX as ADJUST_NUMERIC_ONLY_TZ_OFFSETS_WRT_DST and added an
    explanatory comment by its #definition.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Jul 24 23:06:42 2000 +0000

    Updated README.developers with the fact that zotnet/tws is going away.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Jul 24 23:03:38 2000 +0000

    When Shantonu wrote the new, more portable dtimep.lex, he left out the #ifdef
    DSTXXX stuff for some reason.  Not a good idea, as that code is required for
    proper printing of numeric-offset timezones that have daylight saving time.
    Without that code, -0700 during DST gets printed as MST instead of PDT.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 03:31:39 2000 +0000

    Fixed warnings from diff on first-time install of nmh.  Also added 'echo's
    clarifying the etc file installation activities.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 02:35:43 2000 +0000

    Applied Kurt J. Lidl <lidl@eng.us.uu.net>'s $MAILHOST patch:
    
        I have a small patch that would be nice to be included -- basically, it
        allows the usage of the "MAILHOST" environment variable, without having to
        have HESIOD turned on.  I need this functionality for my environment, where
        we have identical /usr/local on all my machines (so I cannot just hardcode
        into the mts.conf file), and I have multiple POP mail servers for my users.
    
    Modified inc.man to reflect that along with "pophost:" and -host, $MAILHOST can
    now activate POP mail inclusion as well.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 02:25:59 2000 +0000

    Last pass at README.developers -- Kimmo's 5-step commit was overkill.  You only
    need 3 steps, since configure.in is the only autoconf file with the RCS $Id
    keyword.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 02:11:59 2000 +0000

    Meaningless modification to test autoconf file commit order stuff.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 02:04:37 2000 +0000

    Meaningless change to test autoconf file commit order stuff.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 02:03:23 2000 +0000

    Meaningless change for testing autoconf file commit order stuff.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 01:56:17 2000 +0000

    Meaningless change to test autoconf commit order stuff.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 21 01:43:58 2000 +0000

    People did not preserve my alphabetization of the --with options when they added
    new ones.  Re-alphabetized.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 20 20:49:00 2000 +0000

    Ken Hornstein's SASL patch was not integrated properly with Ruud's new merged
    mts/sendmail code.  Kimmo has since fixed nmh so it compiles, but according to
    Ken, the SASL stuff still does not work.  Integrating a patch from him for this.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 20 20:32:31 2000 +0000

    One more pass at README.developers now that it's clear that my
    previously-suggested one-line autoconf-file commit can cause unnecessary local
    makes and an out-of-sync stamp-h.in file, but would not cause problems for other
    people using the CVS files.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 20 20:14:39 2000 +0000

    Moved Kimmo's new "--with-hash-backup" to be output with the rest of the --with
    options in the configure --help output, rather than being in between two random
    --enable options.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Tue Jul 18 23:39:45 2000 +0000

    Added answer.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jul 18 02:15:03 2000 +0000

    Clarified and made some corrections to Kimmo's README.developers changes (BTW,
    if anyone can explain why the RCS Ids are able to cause problems with the
    dependencies, please fill in the explanation -- I never encountered a problem
    with the old single-commit method).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jul 18 02:07:51 2000 +0000

    I don't understand why Kim's split-up of the autoconf-file cvs commits should be
    necessary, so I left a little note hoping for someone to explain technically why
    that should be the case.  I certainly never ran into any problems with my old
    single-commit version (which I added back in along with an explanation of why it
    supposedly won't always work).
    
    Also Kim's text implied that the _only_ reason for the given order is the RCS
    Ids -- not true -- the timestamps are the main reason a particular order is
    necessary.  Made a couple of other clarifications as well.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 06:18:03 2000 +0000

    Iterating the commit a bit, I think this is how it works without extra
    runs of autoconf, autoheader and make.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 06:05:26 2000 +0000

    Regen.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 06:01:28 2000 +0000

    If $LIBTOOL is empty we should not try to run it.
    This gets rid of the "--version: not found" error.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 05:50:33 2000 +0000

    Got rid of one mktemp.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 05:11:46 2000 +0000

    Complete HAVE_MKSTEMP.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 04:23:50 2000 +0000

    We ignore the fact that the user requested SASL, since the pipe to the
    mailer is secure.  This allows for easier sharing of the MH profile
    across hosts.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 04:03:27 2000 +0000

    Note replacement of GNU-makeism in sbr/Makefile.in with a common statement.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:58:57 2000 +0000

    So I don't think you can commit these all in a single commit.
    README.developers recommends that (with precise ordering) but
    things still get regenerated when I run "make".

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:57:47 2000 +0000

    Keep this working with other makes than GNU.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:56:45 2000 +0000

    Still missed one SASL stuff thing.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:36:42 2000 +0000

    Changed "--with-backup-prefix" to "--with-hash-backup" because # is too
    difficult for config.status to get right.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:15:17 2000 +0000

    Note "--with-backup-prefix".

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 03:13:25 2000 +0000

    Add "--with-backup-prefix" so it can be set easily.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 02:08:18 2000 +0000

    SASL stuff.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 01:48:37 2000 +0000

    SASL stuff.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sun Jul 16 01:46:50 2000 +0000

    SASL mods.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 13 21:49:45 2000 +0000

    Deleted the timezone on Kim's SASL patch entry.  Ruud has taken to adding the
    timezone even though all previous entries are missing it, and I don't really
    agree with that.  True, on occasion someone in a different timezone will
    commit something later in the day than someone else, and even though the second
    change happens later, the time may be earlier, but that doesn't happen too often
    and isn't really a big deal, IMHO.
    
    Putting textual timezones like "EDT" isn't really the right solution, IMHO,
    since some of those tags are ambiguous.  Either an offset-style timezone should
    be used or all times should be given as UTC.
    
    I'd just as soon stick with local times, though.
    
    Oh, one thing I forgot to mention in my last CVS entry was that I removed "IMAP"
    from the list of protocols supported by Ken's SASL patches -- nmh doesn't have
    any IMAP support!

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 13 21:42:52 2000 +0000

    Modified Kimmo's entry for the application of Ken Hornstein's SASL patches to
    clarify that it wasn't Ken applying them himself, and clarified what SASL
    support actually means.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jul 13 21:41:42 2000 +0000

    Kimmo neglected to commit the regenerated versions of these after changing
    configure.in, forcing people using the CVS source to have to have the autoconf
    tools installed.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jul 11 21:20:04 2000 +0000

    Clarified post.man and send.man for those not completely up on SASL terminology.
    "SASL encryption layers are not supported for SMTP" means that encryption is
    supported for the authentication but not for the subsequent data stream.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Sat Jul 8 05:36:58 2000 +0000

    Note SASL commit.

Author: Kimmo Suominen <kimmo@suominen.com>
Date:   Fri Jul 7 03:48:02 2000 +0000

    SASL support from Ken Hornstein <kenh@cmf.nrl.navy.mil>.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Mon Jun 12 18:07:34 2000 +0000

    * Merged mts/sendmail functionality into mts/smtp; switching between
    smtp and sendmail delivery method is now controlled by mts.conf.
    * If tsort cannot deal with loops, in addition to defining tsort as
    cat, also define lorder as echo.
    * Removed uip/popi.c from list of sources.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jun 9 02:45:17 2000 +0000

    New dtimep.lex didn't parse day names properly.  Fixed.  Also clarified
    ambiguous comments preceding day_map[] array (from old dtimep.lex) that probably
    led to the erroneous cp++ being added.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Wed Jun 7 19:06:52 2000 +0000

    * Added one more mkstemp invocation to uip/spost.c (which was in a
    #if 0 block).
    * Applied patch from Peter Maydell to clean up permissions handling
    and error handling in uip/inc.c.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Mon Jun 5 20:13:54 2000 +0000

    Use cat instead of tsort if tsort cannot deal with loops in its
    input (which is the case for tsort from GNU textutils).

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Mon Jun 5 19:20:38 2000 +0000

    If liblockfile is present, and its dotlockfile program is setgid,
    inc does not need to be setgid.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun Jun 4 20:24:39 2000 +0000

    * Added autoconf test for Miquel van Smoorenburg's liblockfile
    library, as found on Debian systems.
    * Added liblockfile support to sbr/lock_file.c.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu Jun 1 06:57:57 2000 +0000

    make clean now removes generated bin files.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed May 31 07:22:43 2000 +0000

    Made dtimep.lex more lex-friendly.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Wed May 31 07:19:30 2000 +0000

    Added back memory options for AIX to increase available memory.
    Took out %option noyywrap, which wasn't understood by AT&T lex, as
    well as the -i case-insensitivity flag.

Author: Doug Morris <doug@mhost.com>
Date:   Wed May 31 05:48:06 2000 +0000

    added lint targets for Makefiles and a configure test to find whether lclint or lint is installed on the system.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 31 02:27:40 2000 +0000

    Applied Alec Wolman <wolman@cs.washington.edu>'s dropsbr.c patch:
    
      In the map_write routine, a call is made to map_open and this call is supposed
      to set the "clear" variable to 0 or 1, depending on whether the map file is
      empty or not.  In mh6.8.3, this worked because map_open would set "clear" by
      calling the mbx_Xopen routine.  In nmh, the code for mbx_Xopen was merged into
      mbx_open, but the interface for mbx_open doesn't support the clear variable,
      so that functionality was lost.  The map_open interface still contains "int
      *clear" in the prototype, but never sets it.
    
      My patch eliminates "clear" from the map_open interface (I checked to make
      sure that map_write is the only client of map_open).  Furthermore, my patch
      also sets the "clear" variable properly at the beginning of map_write by
      calling fstat().  This eliminates the bug in that the value of "clear" being
      used later in the routine was just stack garbage.
    
      Having a bad value of clear causes this next bug to be triggered: The fp file
      pointer was being opened with fdopen, but in two of the three switch cases it
      wasn't being closed.  In certain cases, this was causing packf to run out of
      file descriptors if you attempted to pack a large folder.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 31 02:13:57 2000 +0000

    A couple more tweaks to etc/Makefile.in:
    
        Generated sendfiles script was not a dependency of the `all' target, and was
        incorrectly included in the distribution.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 31 00:53:20 2000 +0000

    INSTALL never documented the etc/*.old thing.  Documented the new etc/*.prev
    thing (including a note to watch for diff output).

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 31 00:28:14 2000 +0000

    Reworded my last entry a bit.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 31 00:22:05 2000 +0000

    etc/Makefile.in was incorrectly installing mts.conf.in and sendfiles.in --
    fixed.  Changed the suffix for the backed-up previous versions of the etc files
    from the ambiguous .old to .prev.  Use diff and only keep the .prev file around
    if different.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 30 22:52:43 2000 +0000

    ChangeLog:  I think we should use a uniform style in this file.  Reformatted
                Ruud's recent entries.
    
    configure:  Weird.  There's some timestamp screwup somewhere, perhaps in the way
                Makefile.in is written, that caused autoconf to get run after I did
                a `cvs update'.  It regenerated configure, and apparently I'm using
                a different version of autoconf, with a different order of awk
                alternatives.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 08:00:33 2000 +0000

    Added entry for new lexing function and moving from zotnet/tws to sbr

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 07:48:14 2000 +0000

    Updating root-level files so that zotnet/tws/Makefile is not generated.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 07:44:51 2000 +0000

    Synchronizing Makefiles that had gotten out of sync with directory
    contents.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 07:43:29 2000 +0000

    Updated sbr functions to include <h/tws.h> instead of <zotnet/tws/tws.h>.
    Also, update Makefile to include new functions dtime.c and dtimep.c

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 07:35:32 2000 +0000

    Updating user programs to use <h/tws> instead of <zotnet/tws/tws.h>

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon May 29 07:29:08 2000 +0000

    Moved date/time functions from zotnet/tws to sbr. More importantly,
    wrote a new lexing function dparsetime (dtimep.lex) which
    plays nicely with flex, needs no "sed hackery". It might work with
    lex, but I haven't tried.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun May 28 16:17:49 2000 +0000

    * Added autoconf check for getutent().
    * Changed uip/rcvtty.c and uip/slocal.c to use getutent() and
      friends.  Since I can only check on Linux, please check if
      this works on other systems.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun May 28 16:15:58 2000 +0000

    Added autoconf check for getutent().

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun May 28 14:42:01 2000 +0000

    * Applied patch from Peter Maydell to uip/scansbr.c for more
      checks for write failures.
    * Unlink temporary file properly in uip/rcvtty.c.
    * Moved viamail from bindir to libdir.
    * Changed sendfiles into sendfiles.in, so that path to viamail
      is patched in.
    * Added gzip support to sendfiles.
    * Added References header to replcomps and replgroupcomps.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun May 28 12:45:53 2000 +0000

    Fixed m_getfld bug which caused segmentation faults when
    incorporating messages which ended in multiple linefeeds crossing
    a buffer boundary.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri May 26 20:35:30 2000 +0000

    msh has been unable to show MIME messages ever since 1.0.  Alec Wolman
    <wolman@cs.washington.edu> tracked down the problem to the -show flag being
    passed to mhshow.  mhshow is equivalent to the old mhn -show, so we don't need
    the -show anymore.  Removed it.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri May 12 05:19:14 2000 +0000

    Moved zotnet/mf to sbr.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri May 12 04:16:46 2000 +0000

    zotnet/bboards no longer built by default.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri May 12 02:55:36 2000 +0000

    zotnet/bboards is no longer built by default.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Fri May 12 02:51:21 2000 +0000

    Removed zotnet/bboards from default build.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu May 11 02:55:11 2000 +0000

    Change to MACHINES to include what platforms nmh *does* compile on.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu May 11 02:53:07 2000 +0000

    Added on whish platforms nmh is known to compile, as polled from
    recent mailings to nmh-workers. Please add liberally.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu May 11 02:24:59 2000 +0000

    Entered minor change to sbr/Makefile.in

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu May 11 02:21:34 2000 +0000

    Removed explicit definition of both SRCS *and* OBJS, and made OBJS simple
    a pattern substitution of SRCS, with suffix .c -> .o

Author: Shantonu Sen <ssen@mit.edu>
Date:   Thu May 11 02:14:21 2000 +0000

    Added my getpass() addition to ChangeLog (after the fact, but at least
    it's in now).

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 10 03:39:46 2000 +0000

    Added mts.conf.5 page per Neil W Rickert <rickert+nmh@cs.niu.edu>'s report:
    
        This happens on solaris:
    
    	     % man mts.conf
    	     windex entry incorrect:  mts.conf(5) not found.
    	     No manual entry for mts.conf.
    
        It is fixed by
    
    	     % echo ".so man5/mh-tailor.5" > mts.conf.5
    
        done in the man5 directory.  We need to add 'mts.conf.5' as a reference
        sourcing mh-tailor.5.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed May 10 00:02:53 2000 +0000

    Prepended "Portions of this code are" to the copyright message in ruserpass.c
    also.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 21:44:15 2000 +0000

    * Changed configure.in to use gcc -Wall even without --enable-debug, to prevent
      developers compiling optimized from introducing warnings, and to give
      end-users a warm, fuzzy feeling as they (hopefully) see no warnings come out
      (except perhaps on the lex output file) even with -Wall.
    
    * Renamed getpass() to nmh_getpass() since the prototype for getpass() varies
      from OS to OS, and we want to _always_ use our version of the function.  Fixed
      all the callers to use nmh_getpass() and added it to prototypes.h.
      Semi-arbitrarily upped MAX_PASSWORD_LEN from 128 to 256.  buf was being
      calloc()'d and the memory leaked -- should have just been declared as static
      char array.  Prepended "Portions of this code are" to the copyright message,
      as this version has been changed significantly from the BSD version.
    
    * Added "nmh-local functions to use in preference to OS versions" section to
      README.developers (currently just says to use nmh_getpass() instead of system
      getpass()).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 19:56:57 2000 +0000

    Oops.  Forgot to commit this when I made configure changes yesterday.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 08:16:18 2000 +0000

    Added steps to README.developers saying to change the version number to
    X.Y.Z+dev.  Did a little rearranging and changed the FTP dir from /home/ftp to
    /var/ftp to reflect Doug's new machine.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 07:55:58 2000 +0000

    Got rid of four warnings in Shantonu's new getpass.c.  Needed to #include
    <stdlib.h> for calloc(), <unistd.h> for ttyname(), and "h/mh.h" for adios().
    Also changed ch from char to int to get rid of "comparison is always 1 due to
    limited range of data type" on EOF.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 07:13:59 2000 +0000

    Alphabetized Shantonu's $pop_kinds output on configure's "pop is enabled" line.
    If POP3 is the only kind of POP enabled, say so, rather than just saying "yes"
    (which is ambiguous).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 06:53:21 2000 +0000

    Shantonu updated the DIFFERENCES file to no longer say that APOP isn't
    supported, but in so doing, he removed the note that RPOP isn't supported.  Put
    it back.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 06:47:50 2000 +0000

    * I had alphabetized the --configure options in the --help output
    awhile back, but Shantonu added --enable-apop just under --enable-pop.  Put it
    in alphabetical order and clarified what --enable-apop does vs. --enable-pop and
    --with-krb4.  Also changed --with-mts help line from "mail transport agent" to
    "mail transport agent/service" so the 's' in "mts" doesn't seem to come out of
    nowhere.
    
    * Added two steps to "releasing nmh" in README.developers.  After
    making the tarball, it's a good idea to diff the tree vs. the CVS tree to make
    sure no files got left out, and then to chown the files so that they're owned by
    root, preventing a Trojaning attack by a malicious remote user with a UID
    matching yours.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue May 9 06:27:38 2000 +0000

    Updated POP capability to include APOP.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue May 9 06:16:52 2000 +0000

    Removed unnecessary comments, such as "*This warning no longer applies*"

Author: Shantonu Sen <ssen@mit.edu>
Date:   Tue May 9 06:09:05 2000 +0000

    Fix some compile-time warnings.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 04:52:55 2000 +0000

    Doug informed me that the way I had restored the "lost" version histories was
    wrong, because `cvs checkout's of old versions of nmh wouldn't work properly.
    It occurs to me that this could be fixed by simply deleting those tags in the
    new-location *,v files, but oh well.  I'm putting everything back to the way
    Doug originally had it.  To get the old version history for a file that used to
    be in the top directory, you'll need to "blindly" do a `cvs log' there (even
    though you won't have a local copy of the file in that directory).  `cvs diff'
    will no longer be able to diff pre-move versions vs. post-move versions --
    you'll have to do a lot of manual gyrations with `cvs checkout' and then use
    `diff'.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 04:08:55 2000 +0000

    Okay, now that the old revisions have been recreated, deleting the file.  The
    new version is in the 'docs' subdirectory.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 04:07:15 2000 +0000

    This is the nmh-1.0.4 version from 2000-03-15 (I see that I was the one that
    originally made this change).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 04:05:46 2000 +0000

    This is the nmh-1.0.3 version from 2000-01-18 (1.0.2 had no changes).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 04:03:55 2000 +0000

    This is the nmh-1.0.1 version from 1999-05-17.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:58:04 2000 +0000

    For reasons explained better elsewhere (e.g. Attic/README.developers), the
    version history for this file got lost.  Recreating it.  This version is from
    1998-05-08 -- it's the original nmh-1.0 version.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:29:37 2000 +0000

    After nmh 1.0.4, moved from top-level 'nmh' directory to 'nmh/docs'.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:27:53 2000 +0000

    Okay.  Removing it now.  New location is in 'docs' subdirectory.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:25:24 2000 +0000

    In the hullaballoo with moving stuff back and forth out of the docs/ directory,
    and trying to figure out the right way to preserve the old version history, this
    file's version history prior to the first move into docs/ got wiped.  I
    introduced this file into the project after 1.0.3 was released, and was the only
    one to modify it until after the 1.0.4 release.  The post-1.0.4 changes have
    survived in docs/README.developers, so I just need to check in the 1.0.4 version
    and tag it as such, then remove it again, to make a `cvs checkout' of nmh 1.0.4
    work again.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:18:50 2000 +0000

    Man, I'm a retard.  Lemme try that again:
    
    Just a silly note 'cause I'm vain -- below where it currently says:
    
        Someone ("ssen" -- looks like Doug forgot to update a chroot() passwd file
    
    It originally said " u i d 6 0 0 0 4 " (or a different number), but minus the
    spaces.  I guess after Doug added ssen into the chroot() passwd, he did a
    search-and-replace for the UID, which changed my comment as well, making it look
    like I had no way of determining who ssen was, which is silly.  ;^>

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 03:12:59 2000 +0000

    Just a silly note 'cause I'm vain --

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 02:43:54 2000 +0000

    After nmh 1.0.4, moved from top-level 'nmh' directory to 'nmh/docs'.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue May 9 02:36:42 2000 +0000

    After nmh 1.0.4, moved from top-level 'nmh' directory to 'nmh/docs'.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun May 7 06:59:15 2000 +0000

    Updated pop instructions and indicated use of standard "./configure"
    instead of "sh configure"

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun May 7 06:16:43 2000 +0000

    An nmh-specific getpass, to remove dependency on system
    getpass()es, which may or may not do what we want (including
    flushing input streams, and taking input from stdin in the
    absence of a controlling tty).

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun May 7 06:14:31 2000 +0000

    Added getpass to SRCS and OBJS.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat May 6 15:53:40 2000 +0000

    Removed "installing nmh" section.  Moved its note about the DIFFERENCES file up
    next to the other MH discussion.  Changed out-of-date "README" title (should
    have been "README.history") to "README.about -- about nmh".  After committing,
    I'll rename the file to README.about inside the CVSROOT.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat May 6 15:29:19 2000 +0000

    Restored lost version histories for those moved files by doing a manual `mv' in
    the CVSROOT on mhost.  CVS badly needs a `cvs mv' command so that you can move
    files (without having physical access to the CVSROOT) without losing versioning.
    Put MACHINES back at the top level as it needs to be read before building.
    Fixed DIST variable in {.,docs}/Makefile.in to reflect that and to add missing
    entry for "INSTALL" file.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat May 6 15:05:02 2000 +0000

    Fixed DIST targets to reflect that INSTALL and MACHINES are back at the top
    level.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat May 6 14:54:25 2000 +0000

    Files that must be read before building nmh should not go in the docs
    directory.  Moved this file back to the top level (and made a couple of
    stylistic and grammar tweaks while I was at it).

Author: Dan Harkless <dan@harkless.org>
Date:   Sat May 6 14:19:23 2000 +0000

    Deleting the versions Doug moved in with `cvs add', erasing the version history,
    in preparation for moving the original versions in the cvsroot.

Author: Doug Morris <doug@mhost.com>
Date:   Sat May 6 11:34:02 2000 +0000

    reorganized documentation to make it bit neater again

Author: uid1005 <uid1005>
Date:   Fri Apr 21 17:36:37 2000 +0000

    Corrected status printout when kpop is enabled

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Apr 18 00:17:50 2000 +0000

    One final tweak to the configure --help output for --enable-masquerade.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 22:49:39 2000 +0000

    APOP supprt: Added info to ChangLog.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 22:09:00 2000 +0000

    The syntax I gave in the --help output for --enable-masquerade incorrectly
    implied that the earlier options were prerequisites for the later options
    (pointed out by Scott Blachowicz).  No compact, non-confusing way to specify the
    real syntax that I can see, so I'll just remove the []s and leave the explaining
    about it being okay to specify a subset to the INSTALL file.
    
    Also added a TODO item to put in proper parsing of the masquerade: line and/or
    --enable-masquerade so if you misspell an option you find out about it, rather
    than just having it silently fail (this weakness was currently only documented
    in comments in the mts.conf-handling code).

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 22:04:33 2000 +0000

    Someone (unfortunately original version history has been lost so I don't know
    who) changed "danh" to "your-id".  That makes my introductory comment "we'll use
    version 1.0.4 and my mhost.com account, danh, as examples here" make no sense,
    though.
    
    If danh is going to be "parameterized", then 1.0.4 should be too.  Doesn't make
    sense to parameterize one of the changing items and not the other one.  If it's
    going to be done, danh should be changed to YOUR-ID or something and 1.0.4 (and
    1_0_4) should be changed to X.Y.Z (and X_Y_Z).  I just thought it'd be clearer
    to use real values and disclaim that fact up front.  Anyhow, putting danh back
    until such time as someone wants to parameterize both items (and change the
    introductory text appropriately).

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 21:25:23 2000 +0000

    I had left out aclocal.m4 on the "use this order" line as I didn't think it'd
    ever need to be changed.  Someone ("ssen" -- looks like Doug forgot to update
    a chroot() passwd file again) added it, but in a separate sentence.  That
    doesn't really make sense -- added it to the main sentence.
    
    Also changed my note that none of the mailing lists require you to be subscribed
    to post -- not true.  As I originally thought, the exmh ones do require that --
    the bounce messages were just slow in coming.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 19:02:11 2000 +0000

    Undeleted all the stuff Doug deleted at the top level for now.  I think it's bad
    to lose the CVS revision history, and I don't agree that all of these files
    should go in the docs/ directory.  Unfortunately Doug made modifications to FAQ
    and README.developers after moving them, and I didn't want to lose his changes,
    so I just mv'd the ones in the new directory to the top level.  This lost the
    old version history for those two files -- I know there wasn't much to lose for
    README.developers (I originated the file and was the only one to make
    modifications to it until Doug's recent change), but I have no idea what
    information was lost in the FAQ's version history.  The right thing to do on
    those two files probably would have been to re-make Doug's changes in the
    undeleted old versions and credit them to him in the CVS log.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 18:48:03 2000 +0000

    Put a note saying that the paths this file refers to (stuff in docs/) are
    currently wrong.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 18:36:59 2000 +0000

    Undeleting everything at the top level for now.  Doug's comment:
    
    Sat Apr 15 10:33:00 2000 Doug Morris <doug@mhost.com>
    
            * moved the documentation into a "docs" subdirectory. The
            top-level directory was becoming messy. I also created another
            file MAILING-LISTS describing the various nmh lists and the
            archival system, and updated the FAQ to refer to it. I also
            created a new README in the top level that is basically a list
            of pointers to the various documentation. The old README I've
            moved to docs/README.history, since that seemed like the right
            thing to call it.
    
    will be lost, but he can put back a modified version when we agree on what
    should really go in docs/.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 18:34:40 2000 +0000

    Undeleting everything at the top level for now.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Apr 17 16:56:57 2000 +0000

    Added note that user questions are acceptable on nmh-workers.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:29:49 2000 +0000

    Added that you should check in aclocal.m4 after acconfig.h, if you change it.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:25:18 2000 +0000

    APOP support: Making the apop option appear after pop in ./configure --help
       and committing in the right order to avoid unnecessary autoconfing.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:12:14 2000 +0000

    Don't try to figure out ruserpass - just use version from sbr/

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:09:46 2000 +0000

    APOP support: Use the ruserpass function in this directory for
        all password prompts, instead of using system functions.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:08:32 2000 +0000

    APOP support: If APOP is enabled, build it into inc and msgchk
        using $(APOPLIB).

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:07:03 2000 +0000

    APOP support: Making APOP a ./configure option with --enable-apop,
       and giving more information about the types of POP support
       in the configuration summary.

Author: Shantonu Sen <ssen@mit.edu>
Date:   Mon Apr 17 05:04:05 2000 +0000

    Adding APOP #defines

Author: Shantonu Sen <ssen@mit.edu>
Date:   Sun Apr 16 13:28:12 2000 +0000

    Changed some string terminations from NULL to \0.

Author: Doug Morris <doug@mhost.com>
Date:   Sat Apr 15 04:28:27 2000 +0000

    Moved most of the documentation into a new "docs" subdirectory. Added a MAILING-LISTS file talking about the lists and archives, and updated the FAQ to refer to it.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Apr 15 02:00:43 2000 +0000

    Added a "releasing nmh" section to README.developers, while the process was
    fresh in my mind.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 14 21:38:37 2000 +0000

    Okay, got that tag stuff straightened out.  Now upping the version to 1.0.4+dev.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 14 21:26:56 2000 +0000

    Oops.  Had a duplicate entry.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 14 21:05:34 2000 +0000

    Oops.  Didn't do a `cvs rtag` before changing the version to 1.0.4+dev.  Putting
    it back.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 14 20:47:32 2000 +0000

    Upped the version number to 1.0.4+dev.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 14 20:40:31 2000 +0000

    * Added new files README.developers, ChangeLog_MH-3_to_MH-6.6, and
    ChangeLog_MH-6.7.0_to_MH-6.8.4.html to DIST target in Makefile.in.
    
    * Released nmh-1.0.4.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Apr 12 00:54:54 2000 +0000

    Just reworded the bit about '%s' being safe not to quote (it's only safe not to
    quote on the -charset- line).

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Apr 12 00:25:23 2000 +0000

    Applied Brian Campbell <bacam@tardis.ed.ac.uk>'s mhn.defaults.sh patch:
    
        It appears that there shouldn't be quotes around the %s in the iso-8859-1
        charset entry; xterm passes the remaining arguments to the program, quoting
        them means that xterm thinks they're part of the program's name.
    
    %s doesn't come from MIME headers, so not quoting it is safe.

Author: Doug Morris <doug@mhost.com>
Date:   Sun Apr 9 07:04:24 2000 +0000

    bug fix - prevents core-dumping on scan -format '1'

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Apr 7 00:42:55 2000 +0000

    Richard Coleman threw out a lot of old MH-specific files in nmh.  Much of the
    stuff, indeed, is not worth saving, but there are nuggets that are very
    worthwhile, and should probably be added back in.  Most important, IMHO, are the
    MH change logs, as they can help answer questions like "Why is this code like
    this?" or "How long has this been broken?" or "What was this ever used for?"
    
    I've added a new file to the nmh tree called ChangeLog_MH-3_to_MH-6.6.  It's
    cobbled together from the mh-6.8.4/papers/mh*/MHCHANGES files.  I've re-ordered
    the entries to go from newest at the top to oldest at the bottom to match the
    ChangeLog convention.  Unfortunately there are no change logs for versions of MH
    prior to 3 in the MH tar files available at <ftp://ftp.ics.uci.edu/pub/mh>.
    Also, it appears to me that there are MH-6.6 changes that aren't documented in
    the logs.
    
    I've also added ChangeLog_MH-6.7.0_to_MH-6.8.4.html.  This is based on
    mh-6.8.4/papers/changes/mh-changes.ms.  The nroff format and its "catman"-type
    output are a pain to deal with, but I was loath to throw away the formatting, so
    I converted the file to HTML.  The only actual markup in the body are the "<B>"
    and "<U>" tags, and "&lt;" and "&gt;" instead of '<' and '>', so it's quite
    doable to view the file in plain ASCII mode as well.  Note that some of the
    changes this file documents as having been made in MH-6.8.4 may not be present
    in nmh -- Richard started with 6.8.3 and later put in certain 6.8.4 stuff.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Apr 6 19:56:35 2000 +0000

    Whoah, this should have been changed a long time ago.  For one thing, Richard
    forgot to update the copyright date when he made modifications in 1999, but more
    significantly, this COPYRIGHT notice hasn't been changed since Richard ceded
    control of nmh development and it became an open-source project.
    
    Changed the COPYRIGHT notice to a BSD License, with a couple of minor wording
    tweaks.  Copyright is assigned to "the authors of nmh", which is anyone who
    writes code, whether they have CVS accounts or not.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Apr 6 00:22:06 2000 +0000

    * Add some way to configure whether you prefer to see text/plain or text/html
      parts of multipart/alternative messages.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Apr 6 00:11:50 2000 +0000

    Applied Eric Schnoebelen <eric@cirr.com>'s mhshowsbr.c patch fixing apparent
    bugs in Dan Winship's new security quoting code:
    
        Since upgrading, I've been getting the following errors while attempting to
        process some MIME messages:
    
            (1) Syntax error: Unterminated quoted string
                exit 2
    
        and:
    
            (2) line 1/10 (END)Segmentation fault (core dumped)
    
        (2) appears to be due to the testing of an unset pointer in
        mhshowsbr.c:show_multi_aux().  (1) appears to be caused by mis-quoting a
        filename being handed to the shell in mhshowsbr.c:show_content_aux().
    
        Resolving the pointer reference issue in mhshowsbr.c:show_multi_aux() turned
        up a similar mis-quoting problem in the routine.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Mar 31 04:25:26 2000 +0000

    Terran Melconian pointed out that my theory as to why -help was printed as
    "-(help)" in the -help output was probably not the most likely scenario.  Added
    his.  ;^>

Author: Doug Morris <doug@mhost.com>
Date:   Tue Mar 28 14:42:36 2000 +0000

    added Todd Miller's packf patch

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Mar 17 20:19:43 2000 +0000

    When I applied Wesley Craig's original KPOP patch, I made a change directly to
    config.h.in.  That's a no-no since that file is automatically generated.  Now
    that I've applied Wesley's second patch that makes things work as I had
    originally documented, I'm re-making the change here, but this time by properly
    modifying acconfig.h and then generating config.h.in from that.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Mar 17 20:11:03 2000 +0000

    wesley.craig@umich.edu did not document his previous KPOP patch, so I did so,
    and asked him to check what I wrote.  Unfortunately he didn't notice my
    misunderstanding of his patch.  I wrote that if you #define POPSERVICE "kpop",
    inc and msgchk will use KPOP exclusively, but if you leave it as "pop3", you can
    use Wesley's new -kpop switch on a given invocation.  Instead, however, -kpop
    turned out to be necessary on every invocation, and a KPOP user complained.
    Applied Wesley's new patch, which makes things work like I thought his original
    patch did.  After that, did one more clarifying pass to the documentation in
    inc.man and msgchk.man.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Mar 16 02:40:42 2000 +0000

    Added a new README.developers file.  From the file:
    
        This file is intended to provide a few tips for anyone doing development on
        nmh.  Developers who learn things "the hard way" about the nmh codebase (as
        opposed to local info best encoded in a comment) are encouraged to share
        their wisdom here.
    
    Currently the topics are "autoconf files" and "directory structure".

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Mar 15 23:37:30 2000 +0000

    When I added my --enable-masquerade option, you'll note that I didn't make it
    --enable-nmh-masquerade.  I find the --enable-nmh-* options too wordy and I'm
    not sure why Richard went that route.  I've renamed them to just --enable-*, but
    the old versions will still work as well (they just aren't advertised).
    
    Added a line to the "nmh configuration" output saying whether POP is enabled.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Mar 15 22:25:16 2000 +0000

    When I fixed the long-standing makedir() bugs in January, I had the code call
    strtoul(..., 0), which I believed to be safe as all modes specified as ASCII
    constants in the nmh code started with a leading zero (signifying octal), which
    I did as it would work if internal constants were ever changed to hex.
    Unfortunately I was unaware of the "Folder-Protect:" .mh_profile entry, which
    mh-profile.man documents as an octal-only constant, with no leading zero
    required.  I've changed the strtoul() call to an atooi() call and removed the
    misleading leading zeroes on the ASCII octal constants in the code and man
    pages.  Also changed the "Folder-Protect:" example in the man page to something
    more interesting than a duplication of the default.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 21:21:28 2000 +0000

    Added:
    	I put Simon's patch under the control of a new #define called
    	FIX_NON_Y2K_COMPLIANT_MUA_DATES.  There's some commentary in
    	acconfig.h about when you might not want to #define it.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 21:15:55 2000 +0000

    Added missing dependency in zotnet/tws/Makefile.in for dtimep.c: dtimep.c-lexed.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 21:07:56 2000 +0000

    Created new dtimep.c-lexed with Simon's change using dtimep.lex lexed on
    Solaris 2.6.
    
    Removed my comment about strdup().  The Solaris 2.6 failure was due to
    failing to do a make distclean after configuring for Ultrix 4.2A.  I'll
    leave the change, though, since it's still a good one (just not worth
    reporting in the ChangeLog).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 20:50:19 2000 +0000

    Changed strdup() in strdup.c to take a _const_ char*.  Don't know why this
    didn't hit anyone before, but I wasn't able to compile on Solaris 2.6 without
    doing this, due to a "previous declaration" error.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 20:40:47 2000 +0000

    Applied Simon Burge <simonb@thistledown.com.au>'s dtimep.lex patch:
    
      It seems that some MUA's didn't handle y2k very well - ELM seems to be one of
      them, and Ultrix's DXmail (based on MH!).  I've got a few emails this month
      that look like:
    
              575   Jan 00  Xxxxxx Xxxx       3603  ...
      and
               22+  Jan 00  Xxx Xxxxx         1771  ...
    
      The first has "15 Jan 100" as the date and the second has "19 Jan 00" as the
      date.  The following works around this so that scan, show, sortm, etc work ok.
    
    Added scan.MMDDYY and scan.YYYYMMDD format files.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 09:20:27 2000 +0000

    * Applied, after some finessing,
    Simon Burge <simonb@thistledown.com.au>'s --with-smtpservers patch:
    
        Here's a patch that allows you to add
    
    	    --with-smtpservers=<some.host.name>
    
        to the ./configure command line to set the "servers: " line in etc/mts.conf.
        Around here, we use "mailhost" so that all machines in the current domain
        just talk to a central machine and nothing else runs an MTA.  Now, I can use
    
    	    --with-smtpservers=mailhost
    
        instead of having to remember to fix this by hand (and often forgetting to
        do so!).
    
    * Inspired by Simon's patch, added an --enable-masquerade option
    to configure.  It will set the "masquerade:" line of mts.conf.  You may specify
    a subset of the three types of masquerading, like
    --enable-masquerade="draft_from mmailid", or leave off explicit arguments to
    enable all three types.
    
    * Alphabetized the --enable and --with options in configure.in and INSTALL and
    added documentation of the two new options to the latter.
    
    * Added new dependency for mts.conf: Makefile.  If this isn't
    done, then when you reconfigure nmh with new values for --enable-masquerade or
    --with-smtpservers, you'll fail to get an updated copy of mts.conf.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 05:24:57 2000 +0000

    Applied Simon Burge <simonb@thistledown.com.au>'s dtime.c patch:
    
      There's a wrap-around problem that affects the implementation of Zeller's
      congruence in dtime.c.  This causes the day-of-week calculations to fail for
      dates after Feb 29, 2000 (probably up until some year far in the future).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 05:05:49 2000 +0000

    Modified username_extension masquerading to only use the extended address on
    generated [Resent-]From: lines and SMTP envelope From:.  With Neil's original
    implementation, nmh's global idea of the username was changed, which would
    result in inc lying and saying you had no new mail because it was looking for a
    mailbox called, for instance, "dan-nmh" (where username was "dan" and
    $USERNAME_EXTENSION was "-nmh").
    
    While in there (adrsprintf()), added checking of snprintf()'s return code and
    added calls to adios() when things are not kosher.  Also simplfied the really
    confusing REALLYDUMB #ifdef'ing, which didn't even jibe with the comment
    explaining REALLYDUMB in acconfig.h.  Now adrsprintf() will always return just
    the username, even if an explicit domain is passed in (which currently doesn't
    happen anywhere in nmh).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 02:39:13 2000 +0000

    Just removed the odd space between the "!" and the "/bin/sh".  I believe some
    OSes might choke on that, and certainly no OS requires it.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Mar 14 02:29:26 2000 +0000

    Applied Sullivan N. Beck <sbeck@cise.ufl.edu>'s mhshow-suffix patch:
    
        With the patch below, you can add lines like:
    
            mhshow-suffix-application/msword: .doc
            mhshow-suffix-application/PostScript: .ps
    
        to the mhn.defaults file to append the given suffix to a scratch file.  This
        allows applications which require a certain suffix to run properly.
    
    Removed -force_html from lynx entry in mhn.defaults.sh (I believe older versions
    of lynx lack that option) and added "mhshow-suffix-text/html: .html".

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Mar 6 20:19:04 2000 +0000

    Applied Neil W Rickert <rickert+nmh@cs.niu.edu>'s msh.c patch:
    
        I finally tracked down the problem in msh that was causing errors
        whenever I tried to examine a 'mmdf' style mailbox.
    
        It turns out that not enough memory was being allocated with
        calloc(), causing memory pointers to be overwritten and corrupted.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Mar 4 00:02:46 2000 +0000

    Changed the new "plussed_user" option to mts.conf's "masquerade:" to
    "username_extension" after getting feedback from qmail users, who use '-' as a
    separator rather than '+'.  Removed checking of $USERPLUS variable.  Now check
    $USERNAME_EXTENSION, which needs to include the appropriate separator for your
    MTA ('-', '+', or whatever) as its first character.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Mar 3 07:30:31 2000 +0000

    Oops.  I was using an older email address for Neil -- now he uses the $USERPLUS
    feature that I'm crediting him for.  ;^>

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Mar 3 07:24:41 2000 +0000

    Added a new "boolean" type to mh.h and TRUE and FALSE constants.
    
    Added a note to DIFFERENCES stating that it's out-of-date (Richard was the last
    one to update it) and that we should consider only documenting incompatibilities
    with MH there.
    
    Implemented (and documented) a third kind of username masquerading: "plussed
    user" masquerading.  This one was suggested by Neil Rickert
    <rickert@cs.niu.edu>.  It's based on sendmail's "plussed user" feature, where
    mail sent to <user>+<string> will be delivered to <user>.  When it's enabled,
    it's controlled by the $USERPLUS environment variable.  How is it enabled?
    Well, that leads me to:
    
    Renamed the "mmailid:" setting in mts.conf to "masquerade:", and changed it so
    that rather than being a boolean, it can be set to any combination of the three
    values "draft_from", "mmailid", and "plussed_user".  Thus it is now possible to
    enable the three types of masquerading individually.
    
    Fixed a bug with "mmailid" masquerading (dating back to MH?)  where if it was
    turned on, ','s would no longer be considered GECOS field delimiters.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Mar 2 08:20:00 2000 +0000

    Oops.  You can't just change comments in configure.in, or configure won't be
    modified (it doesn't contain the comments) and you won't be able to commit it,
    and then the timestamps'll be messed up for everyone and unnecessary autoconf
    calls will occur.  Added some unnecessary (but frequently used in the file)
    trailing 'dnl's on some AC_SUBST()s.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Mar 2 07:56:00 2000 +0000

    Oops.  My last group commit comment failed to mention what I was doing in this
    file.  I was adding:
    
    * Change all man pages to group all the commandline options together in one
      section with each as a separate mini-heading.  Having to dig through prose to
      find what a particular option does is a pain in the nads.
    
    This time, moved it out of the [POSSIBILITIES] section and put it in the [TODO]
    section, as I feel it's very important (and wouldn't be that difficult to do --
    somewhat time-consuming, yes, but not difficult).

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Mar 2 07:52:47 2000 +0000

    Changed the GECOS-field '&' translation behavior to be controlled by the BSD42
    #define rather than GCOS_HACK, since it's apparently always appropriate on OSes
    where BSD42 is #defined, and never appropriate on any other OSes.  Thanks to
    Kimmo Suominen for responding to my "What is this code here for?" comment in
    mts.c and explaining the feature.
    
    Also added ULTRIX 4.2A to the list of OSes that have an initgroups() function
    but no prototype in the system headers.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 29 06:17:58 2000 +0000

    Made a goofy change so that I could produce a new configure because when I
    checked in the last version I did it with "cvs commit ... configure configure.in
    ..." and that apparently gives configure.in a newer timestamp than configure,
    which results in spurious autoconf runs when people download the source.  We
    need to write a little note to developers somewhere saying what in order you
    need to check in those autoconf files and how long you need to wait in between
    each one and such...

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 29 05:59:16 2000 +0000

    Changed "echo > stamp-h.in" in Makefile.in to "date > stamp-h.in" so that
    stamp-h.in will be different each time configure.in and related files are
    changed, making it easier to check it in (which is necessary to prevent
    unnecessary autoconf calls).
    
    My declaration of initgroups() in slocal.c to eliminate the "no prototype"
    warning wasn't portable (FreeBSD 3.[23] choked).  Now use AC_EGREP_HEADER to see
    where initgroups() is declared, if anywhere.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Feb 29 05:16:35 2000 +0000

    Upped the version number to 1.0.3+dev (ideally this should be done by whoever
    makes a release tar file, immediately after doing so).
    
    Applied Paul Fox <pgf-spam@foxharp.boston.ma.us>'s scansbr.c patch, posted to
    comp.mail.mh, which he says prevents loss of mail when inc'ing into a full
    filesystem.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Mon Feb 28 17:09:02 2000 +0000

    	* Fix security hole in mhshowsbr.c which allowed untrusted shell
    	  code to be executed.
    	* Released nmh 1.0.3.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Feb 10 18:50:23 2000 +0000

    Oops.  %-escapes on mhstore lines in mhn.defaults.sh should not be surrounded by
    single quotes, as a shell is not spawned when just saving files, and the
    filenames will end up with literal quotes embedded in them.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Feb 4 20:36:43 2000 +0000

    Removed an item that Richard did without removing its TODO, and removed an item
    that was duplicated in two different priority sections.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Feb 4 20:34:07 2000 +0000

    Whoever originally added the -help switch to all the commands got too cute and
    had the option itself print out as "-(help)" in the -help output.  I guess the
    idea was to make reference to the fact that clearly you know about the -help
    option since you're currently looking at its output.  I think it's a bad idea to
    overload the meaning of the parentheses, however -- they're supposed to indicate
    what abbreviated prefix of the switch you're allowed to specify.  It doesn't
    make sense to show that you're allowed to "abbreviate" the switch to its entire
    length.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Feb 4 20:28:23 2000 +0000

    Whoever originally added the -help switch to all the commands got too cute and
    had the option itself print out as "-(help)" in the -help output.  I guess the
    idea was to make reference to the fact that clearly you know about the -help
    option since you're currently looking at its output.  I think it's a bad idea to
    overload the meaning of the parentheses, however -- they're supposed to indicate
    what abbreviated prefix of the switch you're allowed to specify.  It doesn't
    make sense to show that you're allowed to "abbreviate" the switch to its entire
    length.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Feb 4 01:46:29 2000 +0000

    Modified INSTALL and config.h.in to reflect the new -kpop feature.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Feb 4 01:32:12 2000 +0000

    * Applied wesley.craig@umich.edu's KPOP patches.  According to him:
    
          The following patch fixes a problem with requesting a service key for a
          machine that has multiple 'A' records.  It also makes "-kpop" a command
          line option, for users who would like to use both "kpop" and "pop".
    
      Did no testing of the new features, as I don't have access to a KPOP server.
    
      One tweak I made to the patch he sent to nmh-workers was to move the
      declaration of his new hp2 variable into the #ifdef KPOP section so you don't
      get an "unused variable" warning when compiling without KPOP.
    
    * Modified inc.man and msgchk.man to document Wesley's new -kpop.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Jan 29 01:34:20 2000 +0000

    Added check for lynx to write mhshow-show-text/html line in mhn.defaults.sh.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jan 28 23:29:06 2000 +0000

    Made a couple of minor whitespace changes to test if the latest beta version of
    CVS fixes this bug:
    
        dilvish-dan> cvs commit ../ChangeLog mhn.defaults.sh
        danh@mhost.com's password:
        Warning: Remote host denied X11 forwarding, perhaps xauth program could not be run on the server side.
        cvs: lock.c:179: lock_name: Assertion `*short_repos++ == '/'' failed.
        Terminated with fatal signal 6
        cvs commit: saving log message in /tmp/cvslIx_yb

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jan 28 22:00:33 2000 +0000

    All %-escapes in mhn.defaults that actually expand to something should be
    surrounded by single quotes.  Added quotes to the ones in mhn.defaults.sh that
    were missing them.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jan 27 20:20:01 2000 +0000

    makedir() had multiple bugs dating back to MH.  It passed an octal constant to
    atoi(), which interpreted it as decimal, resulting in directories with no user
    read or execute permissions, making nested directory creation fail.  Also, when
    creating a nested directory, correct permissions were only set on the inner one.
    
    A second `make install' would always fail because the check for whether
    mh_profile.5 existed was written incorrectly.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jan 27 20:14:58 2000 +0000

    Doug's check for whether mh_profile.5 exists was bad -- it looked in the local
    directory rather than the installation directory, so the check would always
    return false and re-installation when mh_profile.5 did exist would bomb out.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Jan 27 20:12:38 2000 +0000

    Fixed multiple bugs in makedir().  First off, when creating nested folders, it
    only set permissions properly on the innermost one.  Secondly, it passwd an
    octal constant to atoi(), which only works on decimal numbers, resulting in
    directories with no user read or execute permission, making creation of nested
    dirs fail.
    
    Also added a comment wondering why we do special processing when euid != uid.
    If no one disagrees with my comments, I'll remove that weird code in the future.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 21:35:43 2000 +0000

    Dan Winship informed me that the right fix when gcc -Wall complains about char
    indexes to arrays is to cast to unsigned char, not int.  You want to prevent
    negative indexes into the array.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 10:16:32 2000 +0000

    Added documentation on both types of masquerading to post's man page.
    
    Also clarified some wording and added a note that the new type of masquerading
    has been implemented only for post, not for the undocumented spost backend.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 10:14:14 2000 +0000

    Expanded the mention of the $SIGNATURE environment variable to talk about the
    three different ways to override "From:" header construction.  Also added
    mh-tailor(5) to the "SEE ALSO" section.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 09:27:59 2000 +0000

    Just added a comment explaining that akvalue() does mh alias substitution.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 09:26:23 2000 +0000

    I had my envelope-From:-setting in the wrong place in the code, before alias
    processing was done.  Put it in the right place, and properly implemented
    Resent-From:-handling, which I had neglected before.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 09:24:15 2000 +0000

    Added a comment bemoaning the lack of aliasing on the From: header and
    explaining why I wasn't going to bother implementing my new draft-From:-based
    email address masquerading right now.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 06:51:50 2000 +0000

    Doug's portability fix of my setgid inc autodetection had a caching bug -- if
    you re-ran configure, uip/Makefile would be corrupted, and installation would
    fail on OSes where inc needs to be setgid.
    
    Implemented a new kind of email address masquerading.  When a user writes a
    custom "From:" header in a draft, nmh uses it rather than generating one.
    However, the user's true address is used in the SMTP envelope "From:" and is
    revealed in the "Sender:" header.  Now, when mmailid is set to non-zero, the
    envelope "From:" uses the address specified in the draft "From:" header, and
    there is no "Sender:" header.  This is useful when sending on behalf of a remote
    POP3 account or when remote mail robots incorrectly use the envelope "From:" in
    preference to the body "From:".

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 06:39:49 2000 +0000

    I'm surprised this didn't hit anyone sooner.  Doug's portability fix of my
    setgid inc autodetection didn't do its caching properly.  It cached the variable
    $nmh_cv_ls_mail_grp (previously $nmh_group_mailspool), but did substitution on
    $MAIL_SPOOL_GRP (previously $MAILGROUP) without setting the latter to the
    former.  That meant that when re-running configure, $MAIL_SPOOL_GRP would be
    NULL, so the $(MAIL_SPOOL_GRP) Make variable would be NULL, and installation
    would fail with the error "install:  2755 does not exist" (since the argument to
    -g was missing).

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 05:40:30 2000 +0000

    Implemented a new type of username masquerading, which is also activated by
    setting mmailid to non-zero in mts.conf.  The new type is based on the From:
    header in the message draft rather than the GECOS field of the passwd file like
    the old type.
    
    With mmailid turned off, when a user specifies a custom From: header in a draft,
    it'll be used, but the user's real address will be revealed in the SMTP envelope
    From: and in the Sender: header.  With mmailid on, this revelation is disabled.
    
    Also copied to here my new comment from mh.h explaining (if I understand it
    correctly) the functionality of struct swit's minchars field.  Also, changed the
    minchars for "help" from 4 to 0.  It doesn't make sense to use a positive
    integer that's the exact length of the option.  That'll make it print out like
    "-(help)".  The parentheses are supposed to go around the minimum part of the
    option you need to specify when abbreviating it.  Perhaps someone thought it
    would be cute to put "help" in parentheses to imply that you know about it
    already as you just specified it be seeing the current output, but I think this
    "overloading" of the meaning of the parentheses is awkward.  I need to go around
    and change "help" to 0 everywhere, but it's getting too late to do it tonight.
    
    Also added some other explanatory comments to existing code.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 05:28:33 2000 +0000

    Updated to reflect that there are now two types of username masquerading
    (GECOS-based, the old one, and draft-From:-based, the new one).  Also clarified
    existing wording.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 05:03:07 2000 +0000

    Documented the minchars field of struct swit to the best of my understanding.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 05:01:06 2000 +0000

    Modified the mmailid comment to reflect that there are now two types of
    masquerading (wouldn't want sysadmins to not realize that by allowing one,
    they're allowing the other).  I also prefer my new wording of "allow" vs. the
    old "turn on" because the latter implied that masquerading would take effect
    just by setting that variable (not the case unless /etc/passwd had been
    previously modified to have the <fakeusername>s).

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 04:57:57 2000 +0000

    Whoever changed all the references to nmh-workers@math.gatech.edu to
    nmh-workers@mhost.com missed this file.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Jan 26 04:54:30 2000 +0000

    Changed Mmailids to an extern so that we can access it from post.c to see if we
    should do the new draft-From:-based masquerading.  Also clarified some comments
    now that there are two different types of masquerading.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 21:06:09 2000 +0000

    Just clarified a couple of points in my last change description.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 07:45:10 2000 +0000

    The prototype I gave for initgroups() which was documented in the AIX 4.1 info
    page conflicted with the real one that comes from grp.h on Solaris 2.6.
    Adjusted it so the local prototype is correct on both (hopefully all)
    platforms.  Also added an include of <unistd.h>, which is where initgroups()
    lives on HP-UX 10.20.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 07:10:25 2000 +0000

    I kept going back and forth checking in new pointless revisions of
    configure[.in], but it now looks like the problem was that stamp-h.in was older
    than configure.in (or maybe there were two problems).  Hopefully this'll get rid
    of the needless auto* calls.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:56:25 2000 +0000

    Shoot.  Apparently it gets the timestamp from the check-in time rather than
    preserving the actual timestamp on the file when you check it in, so the
    timestamp was the same for configure.in and configure, so the Makefile was doing
    an autoconf just in case.  This time I'm checking in configure.in first and
    configure at least a second later.  What a pain.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:46:13 2000 +0000

    Accidentally checked in configure with older date than configure.in, but I
    hadn't made changes to configure.in that would result in a different configure,
    so I can't check one in with the right timestamp.  Therefore, I made a
    meaningless change to configure.in (adding a "dnl" to the end of line that was
    like others that had "dnl" at the end but didn't have one itself) and
    regenerated configure.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:21:38 2000 +0000

    The conditional definition of the "np" variable didn't make any sense.  It was
    only defined if HAVE_GETHOSTBYNAME was defined and only used when
    HAVE_GETHOSTBYNAME wasn't defined.  I'm kind of surprised that never blew up
    anywhere.  Changed the definition conditional to match the usage conditional.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:19:51 2000 +0000

    Got rid of the rest of the warnings that I didn't have time for on 1999-07-15
    (and, it would seem, some new ones people introduced since then).  The primary
    ones were the warnings that default prototypes were being used for [v]snprintf()
    and str[n]casecmp().  As of right now, there are _no_ compilation warnings
    except on the lex output file (at least under AIX 4.1.5 and Solaris 2.6).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:18:54 2000 +0000

    On AIX 4.1, snprintf() is defined in libc.a but there's no prototype in
    <stdio.h> or elsewhere.  Apparently it's not officially supported (though it
    seems to work perfectly and IBM apparently uses it in internal code).  Anyhow,
    if we omit our own snprintf() and vsnprintf() prototypes when we HAVE_SNPRINTF,
    we get a billion warnings at compile time.  Use the C preprocessor to preprocess
    stdio.h and make sure that there's actually a prototype.  Define
    HAVE_SNPRINTF_PROTOTYPE if so, and use that to control our local prototype
    definition.
    
    Also, define strcasecmp() and strncasecmp() here all the time since we define
    our own versions and always use them.  The only way we could get into trouble
    doing this would be if the vendor's versions didn't have the same parameters,
    but I don't see that happening.  If we don't define them here, we get warnings
    all over the place that default prototypes are being used for 'em, and the
    system header to include varies from OS to OS.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:13:38 2000 +0000

    On AIX 4.1, snprintf() is defined in libc.a but there's no prototype in
    <stdio.h> or elsewhere.  Apparently it's not officially supported (though it
    seems to work perfectly and IBM apparently uses it in internal code).  Anyhow,
    if we omit our own snprintf() and vsnprintf() prototypes when we HAVE_SNPRINTF,
    we get a billion warnings at compile time.  Use the C preprocessor to preprocess
    stdio.h and make sure that there's actually a prototype.  Define
    HAVE_SNPRINTF_PROTOTYPE if so, and use that to control our local prototype
    definition.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:06:18 2000 +0000

    Added include of signals.h for SIGNAL() prototype.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:04:29 2000 +0000

    Added include of mh.h for snprintf() prototype.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 06:00:22 2000 +0000

    Added include of mh.h to get snprintf() prototype and changed all references to
    getcpy() to our_getcpy() to prevent conflict with the external one.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 05:58:26 2000 +0000

    Put in a prototype for stdio internal function _filbuf() to get rid of the
    "default prototype" warning (only do this when we didn't #define it to something
    specific due to another #define telling us to do so).

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 05:55:20 2000 +0000

    Put in a prototype for client() to get rid of the "default prototype" warning.
    The prototype should really go in a new client.h file or somewhere, but I don't
    have time right now for that.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 05:53:40 2000 +0000

    Typecast to get rid of warnings that index into cc[] is a char.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 05:52:31 2000 +0000

    Put in prototype for initgroups() to get rid of "default prototype" warning.  On
    AIX 4.1, at least, the function exists in libc.a but doesn't exist in any .h.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Jan 25 05:50:12 2000 +0000

    Typecast to get rid of warnings that array index into types[] is a char.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Thu Jan 6 21:30:07 2000 +0000

    	* Move mhtest from bindir to libdir.
    
    	* Move sendfiles from libdir to bindir.
    
    	* Updated sendfiles manpage to reflect this change.
    
    	* Added documentation for -build and -file switches to repl and
    	  forw manpages (patch from Peter Maydell).
    
    	* Fixed interaction between specifying -cc in profile and -group on
    	  command-line.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu Nov 11 01:01:07 1999 +0000

    * Add command to reverse the action of rmm [-nounlink] -- "urmm"?  "umm"?  "um"?
    * Allow user customization of which kinds of text parts in multipart/alternative
      messages are preferred.  It would be nice if one selectable behavior would be
      to be prompted at runtime for which version to show.
    * Add a new %-escape that makes temp files more permanent than %f, so that you
      can use gnuclient -q or netscape -remote on message parts.  Put netscape
      -remote in mhn.defaults for text/html once this is done.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Nov 2 21:49:47 1999 +0000

    Changed the version number from 1.0.3 to 1.0.2+dev.  There was not unanimous
    support for my proposed even/odd release/developer version number dichotomy.
    1.0.2+dev implies release 1.0.2 plus some development.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Oct 29 20:42:13 1999 +0000

    Upped the version number to 1.0.3.  If we don't do this, then when people report
    bugs against 1.0.2, we won't know "which" 1.0.2 they're talking about (since the
    development source is publically available via CVS).  I think the Linux kernel
    version numbers are a good model, so the next time we roll a tarball, it should
    be version 1.0.4 (or higher -- anyhow, an even-numbered version).

Author: Doug Morris <doug@mhost.com>
Date:   Fri Oct 29 05:10:18 1999 +0000

    updated INSTALL directions

Author: Doug Morris <doug@mhost.com>
Date:   Fri Oct 29 04:49:01 1999 +0000

    release nmh-1.0.2

Author: Doug Morris <doug@mhost.com>
Date:   Fri Oct 29 04:32:50 1999 +0000

    updated the TODO list and bumped the revision to 1.0.2.

Author: Doug Morris <doug@mhost.com>
Date:   Wed Oct 27 05:21:12 1999 +0000

    fixed test in Makefiles for LIBTOOL for the case where it doesn't exist

Author: Doug Morris <doug@mhost.com>
Date:   Tue Oct 26 21:12:36 1999 +0000

    fixed libtool check, sort of...

Author: Doug Morris <doug@mhost.com>
Date:   Thu Oct 21 18:59:35 1999 +0000

    changes to allow building under Mac OS X/Rhapsody

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun Oct 17 17:39:22 1999 +0000

    	* Changed repl defaults to partly revert to MH behaviour:
    	  "-cc all" is now only implied with -group.
    	* The replcomps template includes cc: header again (as in MH).
    	* Updated repl man page to reflect these changes.

Author: Doug Morris <doug@mhost.com>
Date:   Sat Oct 16 00:56:05 1999 +0000

    sunos/solaris modifications

Author: Doug Morris <doug@mhost.com>
Date:   Fri Oct 15 22:38:55 1999 +0000

    replaced the BIND guess (based on BSDishness) with checks for gethostbyname and sethostent

Author: Doug Morris <doug@mhost.com>
Date:   Wed Oct 13 14:56:41 1999 +0000

    fixed bug in mh-profile/mh_profile manpage link - it did not check first

Author: Doug Morris <doug@mhost.com>
Date:   Wed Oct 13 13:58:41 1999 +0000

    updated manpage's Makefile and modified the way configure tests to see whether
    it should define LINUX_STDIO.

Author: Dan Harkless <dan@harkless.org>
Date:   Mon Oct 4 22:23:29 1999 +0000

    Added '-L' to the calls of 'ls' in configure.in -- I have seen multiple machines
    in the past where the mail spool was a symlink to a directory on another device
    with more free space.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Oct 2 06:00:54 1999 +0000

    	* Fixed a portability problem in Doug's fix of a portability
    	problem in my MAILGROUP autoconf support ('ls -l' vs. 'ls -lg').

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Oct 2 06:00:11 1999 +0000

    I didn't like the double use of "MAILGROUP" for two different variables used in
    different languages, with different values.  I renamed Doug's new Makefile
    "MAILGROUP" to MAIL_SPOOL_GRP.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Oct 2 05:57:23 1999 +0000

    Touched because I changed configure.in.

Author: Dan Harkless <dan@harkless.org>
Date:   Sat Oct 2 05:55:54 1999 +0000

    Doug's fix for my MAILGROUP autoconf support on his platform (yep, I was
    ignorant about that "wheel" group) broke it on my platforms (AIX 4.1.5.0.01 and
    Solaris 2.6).  `ls -lg` doesn't do what Doug was expecting on these platforms --
    it displays _only_ the group rather than the user and the group (thus awk
    '{print $4}' did the wrong thing).
    
    Also did some miscellaneous cleanup, like making variables that were intended to
    be cached actually be cached (renamed to nmh_cv_*, etc.), and using the $AWK
    that we've auto-detected rather than relying on the $PATH to find one.

Author: Ruud de Rooij <ruud@ruud.org>
Date:   Sun Sep 26 17:45:55 1999 +0000

    	* Added config.sub and config.guess to the list of files to be
    	distributed.
    
    	* Fixed bug in sbr/fmt_scan.c where an extra newline would be
    	added if a list of addresses was split over several header lines.
    
    	* In mts/smtp/smtp.c, undefine strlen and strcpy if they are
    	macros, regardless of platform.
    
    	* Allow q to quit mhshow, and n to skip to next part.  Patch from
    	Kimmo Suominen <kim@tac.nyc.ny.us>.
    
    	* Modified mhstore to recognize attachments created by sendfiles
    	with x-conversions=gzip.

Author: Doug Morris <doug@mhost.com>
Date:   Mon Sep 13 19:23:29 1999 +0000

    moved canonical guesses back into user config section of config.h

Author: Doug Morris <doug@mhost.com>
Date:   Mon Sep 13 18:20:28 1999 +0000

    updates to post.c and termsbr.c that prevent warnings on OpenBSD

Author: Doug Morris <doug@mhost.com>
Date:   Sun Sep 12 13:50:11 1999 +0000

    Lots of little code cleanups to prevent warnings - mostly making sure
    some function prototypes are available at compile time. Also fixed
    Makefile.in so that make nmhdist will work -- it just blew up after
    COMPLETION-TCSH was added and ZSH-COMPLETION was changed to
    COMPLETION-ZSH.

Author: Doug Morris <doug@mhost.com>
Date:   Sun Sep 12 07:19:40 1999 +0000

    updating changelog, should have been done with last commit

Author: Doug Morris <doug@mhost.com>
Date:   Sun Sep 12 06:44:02 1999 +0000

    fix for configure to find db1/ndbm.h in new linux systems

Author: Doug Morris <doug@mhost.com>
Date:   Fri Sep 10 05:22:40 1999 +0000

    configure, configure.in stamp-h.in, and uip/Makefile.in modified to fix
      MAILGROUP test.
    m_getfld.c - added the patch submitted by Richard Cohen to fix
        crashing when mh_profile has no trailing newline.
    smtp.c, lock_file.c, m_scratch.c, m_tmpfil.c, mhscmds.c, rcvtty.c, and
      spost.c modified to fix mkstemp bugs. Some I've simply commented out
      because the repair requries either creating another new tempfile
      function (there are 3 already) or cleaning up the existing tmpfile
      functions and all the calls to them. I'm opting for the latter but
      it will take a while.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Sep 7 23:45:20 1999 +0000

    Renamed ZSH.COMPLETION to COMPLETION-ZSH and added COMPLETION-TCSH.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Sep 7 23:41:37 1999 +0000

    New file along the lines of the old ZSH.COMPLETION, but for tcsh.  Pretty bare
    right now.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Sep 7 23:34:00 1999 +0000

    Renamed to COMPLETION-ZSH so it'll alphabetize next to new COMPLETION-TCSH.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Sep 7 23:29:14 1999 +0000

    Renamed from ZSH.COMPLETION so it'll alphabetize next to new COMPLETION-TCSH.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Aug 18 00:05:24 1999 +0000

    Crap.  That's what I get for using vi instead of xemacs for a change.  Inserted
    missing newline.

Author: Dan Harkless <dan@harkless.org>
Date:   Wed Aug 18 00:01:28 1999 +0000

    Just adding some text to this file so that cvs will see a difference and let me check it in.  Every time acconfig.h or configure.in are changed (which I just
    did), the timestamp on this file needs to be updated or when people do a make
    an unnecessary `cd . && autoheader` will be done, and not everybody has the
    autoconf tools installed.  The next person to change those two files (or
    aclocal.m4) will need to change this text, maybe just to a message saying which
    dependency files were changed and by whom.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Aug 17 23:31:23 1999 +0000

    Automated #define of MAILGROUP and installation of inc as setgid mail when the
    mail spool directory isn't world-writable.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Aug 17 23:15:31 1999 +0000

    Automated #define of MAILGROUP and installation of inc as setgid mail when the
    mail spool directory isn't world-writable.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Aug 17 23:12:42 1999 +0000

    Just removed some useless whitespace that [X]Emacs' Make mode highlights as
    being semi-bogus.

Author: Dan Harkless <dan@harkless.org>
Date:   Tue Aug 17 23:09:46 1999 +0000

    Automated #define of MAILGROUP and installation of inc as setgid mail when the
    mail spool directory isn't world-writable.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:39:09 1999 +0000

    * slocal -debug used to leave a copy of each message processed in /tmp.
    * Got rid of a ton of compilation warnings output by gcc -Wall.
    * rcvdistcomps no longer has "Resent-Fcc: outbox"; new rcvdistcomps.outbox does.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:30:05 1999 +0000

    Eliminated compilation warnings.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:19:29 1999 +0000

    Eliminated unsued sigset_t variables set and oset.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:16:08 1999 +0000

    Previously contained the code:
    
    		if (numburst == 0)
    		    if (!quietsw)
    			admonish (NULL, "message %d not in digest format",
    				  msgnum);
    		else
    		    adios (NULL, "burst() botch -- you lose big");
    
    If the indentation is to be believed, this is a bug.  I trusted the indentation
    and added {}s around the inner if().

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:13:05 1999 +0000

    Eliminated compilation warnings.  pop_action() and pop_pack() used to return
    garbage.  They now (arbitrarily) return 0.  Dunno if their return values are
    ever used...

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:11:44 1999 +0000

    Eliminated compilation warnings.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:03:34 1999 +0000

    donote() previously was written such that it could return garbage.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 01:01:24 1999 +0000

    err2peer() previously returned garbage.  Now it returns result of callee
    verr2peer().

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:59:36 1999 +0000

    Eliminated compilation warnings.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:53:17 1999 +0000

    Eliminated compilation warnings.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:52:20 1999 +0000

    Eliminated compilation warnings.
    
    slocal -debug left a file in /tmp for every single message it processed!
    Totally unacceptable since some people like to have slocal -debug in their
    .forward files to get better logging.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:50:01 1999 +0000

    Changed done() from returning void to returning int so that main()s who call
    done() at the end can instead return done() at the end to eliminate the
    compilation warning about falling off the end of a non-void function.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:48:59 1999 +0000

    Changed from returning void to returning int so that main()s who call done() at
    the end can instead return done() at the end to eliminate the compilation
    warning about falling off the end of a non-void function.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:47:33 1999 +0000

    Changed call of done() to return of done() to eliminate compilation warning.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:44:40 1999 +0000

    I think it's totally inappropriate for the default rcvdistcomps to save all
    outgoing messages in an "outbox" folder.  I have made a new file called
    rcvdistcomps.outbox which looks like this file used to.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:43:04 1999 +0000

    New $(DIST_FILES) entry: rcvdistcomps.outbox.

Author: Dan Harkless <dan@harkless.org>
Date:   Fri Jul 16 00:40:35 1999 +0000

    I renamed the old rcvdistcomps to rcvdistcomps.outbox and removed the
    "Resent-Fcc: outbox" line from rcvdistcomps.

Author: Doug Morris <doug@mhost.com>
Date:   Sat Jun 12 09:29:45 1999 +0000

    added my name to the change

Author: Doug Morris <doug@mhost.com>
Date:   Sat Jun 12 09:26:50 1999 +0000

    added explanation of change made two nights ago.

Author: Doug Morris <doug@mhost.com>
Date:   Wed Jun 9 20:51:59 1999 +0000

    use mkstemp on systems that have it

Author: Doug Morris <doug@mhost.com>
Date:   Thu May 13 14:42:34 1999 +0000

    Added notes about the configure change.

Author: Doug Morris <doug@mhost.com>
Date:   Thu May 13 14:28:25 1999 +0000

    Modified configure to use config.guess and config.sub to auto-detect
    the system type and correctly set the #defines in config.h.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 03:42:11 1999 +0000

    1.0.1

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:32:53 1999 +0000

    1.0.1 patches

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:31:47 1999 +0000

    Update for the brave new world

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:31:00 1999 +0000

    Use "#include <errno.h>" instead of "extern int errno;". Suggested by
    Stephen Wilson Bailey <swb@nconnect.net>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:28:40 1999 +0000

    add a note about Irix make

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:28:16 1999 +0000

    man page updates from Jerry Peek <jpeek@jpeek.com>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:26:41 1999 +0000

    deal with SIGPIPE so mhl doesn't print "Broken pipe" if you quit out
    of the moreproc

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:25:52 1999 +0000

    Fixed a signal-handling bug that could cause whatnow to sometimes exit
    without prompting the user. Based on a patch by Richard Geiger
    <rmg@netapp.com>.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:24:47 1999 +0000

    Changed configure.in's check for sigsetjmp to properly deal with
    systems like Linux where it is a macro. From <elleron@servtech.com>.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:22:54 1999 +0000

    Added -library switch so it can parse user aliases like post does.
    From Ruud de Rooij <r.c.m.derooij@twi.tudelft.nl>.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:22:03 1999 +0000

    Don't add line breaks in the middle of long addresses when building a
    draft. Fixes a bug where repl would generate invalid headers. From
    Ruud de Rooij <r.c.m.derooij@twi.tudelft.nl>.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:17:23 1999 +0000

    Allow display of 8bit encoded messages. From Kimmo Suominen
    <kim@tac.nyc.ny.us>.

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:16:14 1999 +0000

    Change ordering of a conditional to prevent a bad pointer dereference.
    Fixes a segv in inc (and occasionally other programs). Originally from
    Ruud de Rooij <r.c.m.derooij@twi.tudelft.nl>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:13:58 1999 +0000

    Fix a buffer overrun that caused packf -mbox to mess up on
    Return-Path: lines. From Kimmo Suominen <kim@tac.nyc.ny.us>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:12:12 1999 +0000

    Make whatnow "list" work with "lproc: show" again. From Ruud de Rooij
    <r.c.m.derooij@twi.tudelft.nl>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:10:45 1999 +0000

    add HAVE_LIBM

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:07:15 1999 +0000

    Add check for modf and link with -lm if it's not in libc. Needed for
    at least Digital UNIX. Problem noted by Kevin Oberman <oberman@es.net>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:05:49 1999 +0000

    Fix krb4 code to work with the original krb4 libraries as well as
    the krb5-compat ones. Based on a patch by Assar Westerlund <assar@sics.se>

Author: Dan Harkless <dan@harkless.org>
Date:   Thu May 13 01:03:23 1999 +0000

    Properly deal with relative folder names. Problem noted by Jerry Peek
    <jpeek@jpeek.com>

Author: Doug Morris <doug@mhost.com>
Date:   Fri Apr 30 18:08:34 1999 +0000

    Initial revision
