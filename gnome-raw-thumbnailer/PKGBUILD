# Contributor: Juanma Hern√°ndez <juanmah@gmail.com>

pkgname=gnome-raw-thumbnailer
pkgver=2.0.1
pkgrel=3
pkgdesc="This is a RAW file thumbnailer for GNOME."
url="http://gnome-raw-thumb.sourceforge.net/"
license=('GPL')
arch=('i686' 'x86_64')
depends=('gnome-vfs' 'rarian')
install=gnome-raw-thumbnailer.install
source=(http://downloads.sourceforge.net/gnome-raw-thumb/$pkgname-$pkgver.tar.bz2
	"gnome-raw-thumbnailer.install"
	"schemas.patch")

md5sums=('652336f24d1923e546f9f19868911113'
	 '8124298d1d3bd6436d59bbfb2b0fbce4'
	 '58d70a1d00c6679f4c2ec4c39da997be')
build() {

	patch -Np0 -i $srcdir/schemas.patch || return 1 

	cd $startdir/src/$pkgname-$pkgver
	./configure --prefix=/usr
	make || return 1
	make DESTDIR=$startdir/pkg install || return 1

	mkdir -p $startdir/pkg/usr/share/mime/packages
	install -m644 $startdir/src/$pkgname-$pkgver/gnome-raw-thumbnailer.xml \
	$startdir/pkg/usr/share/mime/packages/

	mkdir -p $startdir/pkg/etc/gconf/schemas
        install -m644 $startdir/src/$pkgname-$pkgver/gnome-raw-thumbnailer.schemas \
        $startdir/pkg/etc/gconf/schemas/
}

