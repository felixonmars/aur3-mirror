# Maintainer: nblock <nblock [/at\] archlinux DOT us>
# Contributor: Frederik Alk√¶rsig (FALKER) <havnelisten AT gmail.com>

pkgname=thinkfan
pkgver=0.8_alpha2
pkgrel=2
pkgdesc="A minimalist fan control program. Supports the sysfs hwmon interface and thinkpad_acpi"
arch=('i686' 'x86_64')
license=('GPL')
source=(http://downloads.sourceforge.net/project/${pkgname}/${pkgname}-${pkgver}.tar.gz
        "thinkfan"
        "thinkfan-allow_newline_in_temp.patch")
url="http://thinkfan.sourceforge.net/"
backup=('etc/thinkfan.conf')
md5sums=('65832674b32d73720d221fbbaede5489'
         '16fc3a83a1468e3ccaeba67e14ab2177'
         'fda0ab68643187cdbcea1f53be017ac4')

build() {
    # Patch to handle newline chars in temp input (https://gist.github.com/2355667)
    # Bug report: http://sourceforge.net/tracker/?func=detail&aid=3487107&group_id=249872&atid=2416828
    patch -p0 -i ${srcdir}/thinkfan-allow_newline_in_temp.patch

    cd ${srcdir}/${pkgname}-${pkgver}
    make
    install -D -m755 ${pkgname} ${pkgdir}/usr/sbin/${pkgname}
    install -D -m755 ${srcdir}/${pkgname} ${pkgdir}/etc/rc.d/${pkgname}
		install -D -m644 README ${pkgdir}/usr/share/doc/${pkgname}/README
}

# vim:set ts=2 sw=2 noet:
