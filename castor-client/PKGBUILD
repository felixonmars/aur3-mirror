# Contributor: Jan Ka≈°par <jan.kaspar at gmail dot com>
pkgname=castor-client
pkgver=2.1.10
pkgrel=1
pkgdesc="Client for CERN Advanced STORage manager."
arch=('i686' 'x86_64')
url="http://castor.web.cern.ch/castor/"
license=('EU DataGrid software license')
depends=()
makedepends=('make' 'imake' 'python2')

source=(
	"http://cern.ch/castor/DIST/CERN/savannah/CASTOR.pkg/$pkgver-*/$pkgver-$pkgrel/castor-$pkgver-$pkgrel.tar.gz"
	"python2_patch"
)

md5sums=(
	'9660521a1f28ef61a85689fe300829aa'
	'f44fe3c58dfc2b0b445cce8b325c2f0b'
)

build()
{
	cd "$srcdir/castor-$pkgver"

	export MAJOR_CASTOR_VERSION=2.1
	export MINOR_CASTOR_VERSION=10.1

	patch -p2 < "../python2_patch"
	
	export LDFLAGS=""
	
	./configure || return 1
	make client || return 2
}

package()
{
	cd "$srcdir/castor-$pkgver"
	#export DESTDIR="$startdir/pkg"
	make DESTDIR="$pkgdir/" LIBDIR="/usr/lib" installclient
}

