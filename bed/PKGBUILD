# Contributor: nofxx <x@nofxx.com>
pkgname=bed
pkgver=0.5
pkgrel=1
pkgdesc="Collection of scripts to test for buffer overflows, format string vulnerabilities."
arch=('i686' 'x86_64')
url="http://snake-basket.de/bed.html"
license=('GPL')
depends=('perl')
provides=(bed)
conflicts=(bed)
install=
source=(http://snake-basket.de/bed/$pkgname-$pkgver.tar.bz2 http://snake-basket.de/bed/time-hires.diff arch-links.patch)
md5sums=('caa0a351f38ce41da21961888b2040f9'
         '047ae828af69d2cdfef78c0cfb437d2f'
	 '19a4ab5f3a3c6109e10004fbb7ad36c6')

build() {
	cd $startdir/src/$pkgname

	patch -Np0 < ../time-hires.diff || return 1
	patch -Np0 < ../arch-links.patch || return 1
	
	install -Dm755 bed.pl $startdir/pkg/usr/share/$pkgname/bed.pl || return 1
        
	for file in bedmod/*.pm; do
		install -Dm644 ${file} ${startdir}/pkg/usr/share/${pkgname}/${file}
	done
	
	for file in docs/*; do
		install -Dm644 ${file} $startdir/pkg/usr/share/${pkgname}/${file} || return 1
	done

	mkdir $startdir/pkg/usr/bin
	ln -sf /usr/share/bed/bed.pl $startdir/pkg/usr/bin/bed || return 1
        
	}
