# Maintainer : Antonio Orefice <xt7player@gmail.com>

pkgname=xt7-player
_realname=xt7-player
pkgver=3.1
pkgrel=1
pkgdesc="Aims to be an 'almost complete' but usable mplayer gui"
arch=('any')
url="http://xt7-player.sourceforge.net/xt7forum/"
source=(http://wpage.unina.it/aorefice/xt7player_dist/xt7-player-src-$pkgver.tar.gz)
license=('custom')

makedepends=('gambas3-devel')

depends=('gambas3-gb-image>=2.90.0' 
    'gambas3-runtime>=3.1.1'
    'gambas3-gb-gui>=3.1.1'
    'gambas3-gb-form>=3.1.1'
	'gambas3-gb-qt4>=3.1.1'
	'gambas3-gb-form>=3.1.1'
	'gambas3-gb-dbus>=3.1.1' 
	'gambas3-gb-desktop>=3.1.1' 
	'gambas3-gb-settings>=3.1.1' 
	'gambas3-gb-form-mdi>=3.1.1' 
	'gambas3-gb-form-dialog>=3.1.1' 
	'gambas3-gb-net>=3.1.1' 
	'gambas3-gb-net-curl>=3.1.1' 
	'gambas3-gb-qt4-ext>=3.1.1' 
	'gambas3-gb-web>=3.1.1' 
	'gambas3-gb-xml>=3.1.1' 
	'gambas3-gb-form-stock>=3.1.1' 
	'gambas3-gb-image>=3.1.1'
	'gambas3-gb-compress'
	'mplayer'
	'taglib'
	'youtube-dl'
	'wget')


makedepends=('gambas3-devel')
optdepends=('python2: for Opensubtitles.org integration' 
			'linuxtv-dvb-apps: for DVB support' 
			'dvbsnoop: DVBT EPG' 
			'xdg-utils: for desktop integration' 
			'xbindkeys: for global hotkeys support' 
			'aria2: for youtube segmented downloads')


source=(http://wpage.unina.it/aorefice/xt7player_dist/xt7-player-src-$pkgver.tar.gz 'license.txt' \
        'xt7-player.desktop' 'xt7-player.png')


md5sums=('d8a0e9f19267d34c5e9df216660b4d9f'
         'b6f1380e33b47d0ed95c7ba1b3f4ec73'
         'c143c13c7bae8ee2c1336bd113c3dbb2'
         '72d6fda0cf12e354c02ffefd9feb68a7')

build() {
  cd ${srcdir}/${_realname}-${pkgver}
  ./configure --prefix=/usr

  make || return 1
}

package() {
  cd ${srcdir}/${_realname}-${pkgver}/${_realname}
  install -d ${pkgdir}/usr/bin
  install -m755 xt7-player.gambas ${pkgdir}/usr/bin/xt7-player
  install -D ../../xt7-player.png \
    ${pkgdir}/usr/share/pixmaps/xt7-player.png
  install -D ../../xt7-player.desktop \
    ${pkgdir}/usr/share/applications/xt7-player.desktop
  install -Dm644 ${srcdir}/license.txt ${pkgdir}/usr/share/licenses/xt7-player/license.txt
}
