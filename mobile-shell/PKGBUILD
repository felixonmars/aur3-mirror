# Maintainer: Thomas Wei√üschuh <thomas_weissschuh lavabit.com>

pkgname=mobile-shell
pkgver=1.1.3
pkgrel=3
pkgdesc='mobile shell (mosh) surviving disconnects with local echo and line editing'
arch=('x86_64' 'i686')
url="http://mosh.mit.edu"
license=('GPL3')
depends=('perl' 'protobuf' 'perl-io-tty')
install="mobile-shell.install"
makedepends=()
source=("${pkgname}-${pkgver}::https://github.com/keithw/mosh/tarball/mosh-${pkgver}"
  "mobile-shell.install")

build() {
  cd $(ls -1dt ${srcdir}/keithw-mosh-* | head -n 1)
  CFLAGS="-Werror ${CFLAGS}"
  ./autogen.sh
  ./configure --prefix=/usr --enable-compile-warnings=error
  make
}

package() {
  cd $(ls -1dt ${srcdir}/keithw-mosh-* | head -n 1)
  make DESTDIR="$pkgdir/" install
}

# vim:set ts=2 sw=2 et:
sha1sums=('011a59ebaf1cd8230ca8320c15b95db0575889f9'
          '958d6c55702fa38c18dccc8823eeb6c36975c6c8')
