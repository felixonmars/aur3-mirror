 
# Maintainer: Jens Staal <staal1978@gmail.com>

pkgname=go-tecla-git
# Shell formerly known as "gosh"
pkgver=20110625
pkgrel=1
pkgdesc="A Go wrapper for libtecla, command-line editing library"
arch=('i686' 'x86_64')
url="https://github.com/michaelmacinnis/go-tecla"
license=('MIT')
depends=('libtecla' 'go')
provides=('go-tecla')
makedepends=('git')
options=(!strip)

_gitroot=('git://github.com/michaelmacinnis/go-tecla.git')
_gitname=('go-tecla')

 if [ ${CARCH}=x86_64 ]
    then
     _arch="amd64"
   else
     _arch="i386"
 fi

build() {
 cd $srcdir

   if [ -d $_gitname ] ; then
    cd $_gitname && git pull $_gitroot
    msg "The local files are updated."
  else
    git clone $_gitroot $_gitname
  fi
  rm -rf $srcdir/build
  cp -ar $srcdir/$_gitname $srcdir/build
  cd $srcdir/build
  make
}

package() {
 cd $srcdir/build
 mkdir -p $pkgdir/usr
 make pkgdir="$pkgdir/usr/lib/go/pkg/linux_$_arch/github.com/michaelmacinnis/" install
 export pkgdir=$startdir/pkg
 mkdir -p $pkgdir/usr/lib/go/src/pkg/$_gitname
 cp -a $srcdir/$_gitname/tecla.go $pkgdir/usr/lib/go/src/pkg/$_gitname/go-tecla.go
 mkdir -p  $pkgdir/usr/share/licenses/$_gitname
 install -m644 $srcdir/$_gitname/LICENSE $pkgdir/usr/share/licenses/$_gitname/LICENSE
}
