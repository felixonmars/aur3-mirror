pkgname=eihort
pkgver=0.3.10
pkgrel=3
pkgdesc='A OpenGL world renderer for minecraft with a really long view distance'
license=('BSD')
url="http://www.minecraftforum.net/topic/438878-/"
arch=('i686' 'x86_64')
case "$CARCH" in
	'x86_64') pkgarch=amd64 ;;
	'i686')   pkgarch=i386  ;;
esac
source=("https://bitbucket.org/lloigor/$pkgname/downloads/${pkgname}_${pkgver}_${pkgarch}.deb"
        'icon.tar.gz'
        "$pkgname"
        "$pkgname.desktop")
sha1sums=('46d3ade02543287e8b032a1a2f078bbe890968b0'
          'ba8443da8ff9ff45f3a29069726afb440aaabf1a'
          '54aca14c3362849a64e0a81bd66652408526095a'
          '5fd5dd65b7c2cbc728d384e482163d3a8bf25a80')

build() {
	cd "$srcdir"
	tar -xf data.tar.gz
	rm {control,data}.tar.gz debian-binary
}

package() {
	cd "$pkgdir"
	
	install -d "usr/share/$pkgname/"
	install "$srcdir/usr/share/games/$pkgname/"* "usr/share/$pkgname/"
	
	for f in "$srcdir/icon/"*.png; do
		s="$(basename $f .png)"
		install -Dm644 "$f" "usr/share/icons/hicolor/${s}x${s}/apps/$pkgname.png"
	done
	
	install -D "$srcdir/$pkgname" "usr/bin/$pkgname"
	install -D "$srcdir/$pkgname.desktop" "usr/share/applications/$pkgname.desktop"
}