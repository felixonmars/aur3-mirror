#Maintained by ivoarch <ivayloarch@gmail.com> 
pkgname=monsterwm-git
pkgver=20111219
pkgrel=2
pkgdesc="Very minimal, lightweight, monsterous, tiny, dynamic tiling window manager"
url="https://github.com/c00kiemon5ter/monsterwm"
arch=('i686' 'x86_64')
license=('MIT/X')
groups=('modified')
depends=('libx11')
makedepends=('git') 
md5sums=('')

_gitroot="git://github.com/c00kiemon5ter/monsterwm.git"
_gitname="monsterwm"
_gitbranch="master"

build() {
  cd ${srcdir}

  msg "Connecting to GIT server..."

  if [ -d ${_gitname} ]; then
    cd ${_gitname} && git pull origin master
    cd ..
    msg "The local files are updated."
  else
    git clone ${_gitroot} ${_gitname}
  fi

  msg "GIT checkout done or server timeout"

  msg "Removing old build directory..."
  rm -Rf ${srcdir}/${_gitname}-build
  msg "Creating build directory..."
  cp -R ${srcdir}/${_gitname} ${srcdir}/${_gitname}-build

  msg "Starting make..."
  msg "If you want to configure monsterwm, copy config.def.h to ${startdir}/config.h and edit it"

  cd ${_gitname}-build

  [[ -e ${startdir}/config.h ]] && msg "Using your config.h" && cp ${startdir}/config.h .

  make PREFIX=/usr DESTDIR="${pkgdir}" install
}