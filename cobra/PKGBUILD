# Maintainer: spider-mario <spidermario@free.fr>
# Contributor: Johannes Krampf <mail@johkra.de>

pkgname=cobra
pkgver=0.9.0
pkgrel=1
epoch=2
pkgdesc="Clean and expressive language for .NET and Mono"
arch=('i686' 'x86_64')
url="http://cobra-language.com/"
license=('custom:MIT')
depends=(mono)
install=cobra.install
source=(http://cobra-language.com/downloads/Cobra-$pkgver.tar.gz install.patch)
md5sums=('df49198068a44e6e61419e9fd78c5786'
         'a1f2114574fc3dc01cb799333a2224d3')

build() {
	cd "$srcdir"/Cobra-$pkgver/Source
	echo "$pkgdir"/opt/cobra > install-directory.text
	patch -p1 < "$srcdir"/install.patch
}

package() {
	cd "$srcdir"/Cobra-$pkgver/Source

	yes | bin/install-from-workspace

	cd "$pkgdir"

	sed -i "s|$pkgdir||" opt/cobra/bin/cobra

	install --directory usr/bin
	ln -s /opt/cobra/bin/cobra usr/bin/cobra

	install --directory usr/share/licenses/$pkgname
	cp "$srcdir"/Cobra-$pkgver/License.text usr/share/licenses/$pkgname/
}
