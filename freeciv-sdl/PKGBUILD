# Maintainer: Ray Griffin <rorgoroth@googlemail.com>
# Contributor: Jonathan Wiersma <arch aur at jonw dot org>

pkgname=freeciv-sdl
_pkgname=freeciv
_realpkgname=Freeciv
pkgver=2.3.2
pkgrel=2
url="http://www.freeciv.org/"
pkgdesc="A multiuser clone of the famous Microprose game of Civilization - SDL Client"
arch=('i686' 'x86_64')
depends=(bzip2 sdl sdl_image sdl_mixer readline freetype2 gtk2 hicolor-icon-theme)
options=('!libtool')
provides=("freeciv=$pkgver")
conflicts=('freeciv' 'freeciv-gtk')
license=('GPL')
install="freeciv.install"
source=("http://downloads.sourceforge.net/$_pkgname/$_pkgname-$pkgver.tar.bz2")
md5sums=('eee143d8fea4cf3c772a560fee066600')

build() {
  cd $srcdir/$_pkgname-$pkgver || return 1
  
  ./configure \
	--prefix=/usr \
	--mandir=/usr/share/man \
	--enable-client=sdl \
	--enable-shared

  make || return 1
  sed -e 's/gtk2/sdl/g' client/freeciv.desktop > client/freeciv-sdl.desktop || return 1
}

package() {
  cd $srcdir/$_pkgname-$pkgver || return 1
  make DESTDIR=$pkgdir install || return 1
  install -m644 client/freeciv-sdl.desktop "$pkgdir/usr/share/applications/freeciv.desktop" || return 1
}

