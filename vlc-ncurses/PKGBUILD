# Maintainer: taylorchu <tailinchu at gmail.com>

pkgname='vlc-ncurses'
pkgver=2.0.4
pkgrel=1
pkgdesc='VLC minus uncommon modules plus love'
arch=('i686' 'x86_64')
url='http://www.videolan.org/vlc/'
license='GPL'

depends=('qt' 'mesa' 'libxv' 'libass' 'xcb-util-keysyms' 'ncurses' 'ffmpeg' 'libxml2')

makedepends=('qt' 'mesa' 'libxv' 'libass' 'xcb-util-keysyms' 'ncurses' 'ffmpeg' 'libxml2')

options='!libtool'
conflicts='vlc'
provides='vlc'

source=("http://download.videolan.org/pub/videolan/vlc/${pkgver}/vlc-${pkgver}.tar.xz")
md5sums=('f36dab8f126922c56b372388b7fade47')

build() {

    cd "${srcdir}/vlc-${pkgver}"
    sed -i -e 's:truetype/freefont:TTF:g' modules/text_renderer/freetype.c
    sed -i -e 's:truetype/ttf-dejavu:TTF:g' modules/visualization/projectm.cpp

    msg 'Generating necessary files...'

    ./bootstrap

    msg 'Generating done.'
    msg 'Configuring VLC...'

#disable all auto and default enabled modules that i dont need
./configure --prefix=/usr \
--sysconfdir=/etc \
--disable-nls \
--disable-rpath \
--disable-non-utf8 \
--disable-dbus-control \
--disable-telepathy \
--disable-debug \
--disable-gprof \
--disable-cprof \
--disable-coverage \
--disable-neon \
--disable-altivec \
--disable-run-as-root \
--disable-sout \
--disable-lua \
--disable-httpd \
--disable-vlm \
--disable-libproxy \
--disable-live555 \
--disable-dc1394 \
--disable-dv \
--disable-linsys \
--disable-dshow \
--disable-bluray \
--disable-opencv \
--disable-smb \
--disable-sftp \
--disable-v4l2 \
--disable-pvr \
--disable-decklink \
--disable-gnomevfs \
--disable-vcdx \
--disable-vcd \
--disable-libcddb \
--disable-screen \
--disable-realrtsp \
--disable-macosx-eyetv \
--disable-macosx-qtkit \
--disable-dvbpsi \
--disable-gme \
--disable-sid \
--disable-ogg \
--disable-mux_ogg \
--disable-shout \
--disable-mkv \
--disable-mod \
--disable-mpc \
--disable-wma-fixed \
--disable-shine \
--disable-omxil \
--disable-iomx \
--disable-crystalhd \
--disable-mad \
--disable-dxva2 \
--disable-switcher \
--disable-postproc \
--disable-faad \
--disable-twolame \
--disable-quicktime \
--disable-real \
--disable-a52 \
--disable-dca \
--disable-flac \
--disable-libmpeg2 \
--disable-vorbis \
--disable-tremor \
--disable-speex \
--disable-opus \
--disable-theora \
--disable-dirac \
--disable-schroedinger \
--disable-png \
--disable-fluidsynth \
--disable-zvbi \
--disable-telx \
--disable-kate \
--disable-tiger \
--disable-egl \
--disable-macosx-vout \
--disable-fribidi \
--disable-macosx-quartztext \
--disable-svg \
--disable-android-surface \
--disable-ios-vout \
--disable-directx \
--disable-direct2d \
--disable-wingdi \
--disable-directfb \
--disable-aa \
--disable-caca \
--disable-kva \
--disable-pulse \
--disable-oss \
--disable-portaudio \
--disable-waveout \
--disable-macosx-audio \
--disable-audioqueue \
--disable-jack \
--disable-opensles \
--disable-samplerate \
--disable-kai \
--disable-skins2 \
--disable-libtar \
--disable-hildon \
--disable-macosx \
--disable-macosx-dialog-provider \
--disable-xosd \
--disable-fbosd \
--disable-lirc \
--disable-visual \
--disable-goom \
--disable-projectm \
--disable-atmo \
--disable-bonjour \
--disable-mtp \
--disable-upnp \
--disable-libgcrypt \
--disable-gnutls \
--disable-taglib \
--disable-update-check \
--disable-growl \
--disable-notify \
--disable-media-library \
--disable-sqlite \
--disable-loader \
--disable-macosx-vlc-app

    msg 'Starting make...'
    make
}

package() {
    cd "${srcdir}/vlc-${pkgver}"
    make DESTDIR="${pkgdir}" install
}
