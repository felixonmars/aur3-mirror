# $Id$
# Maintainer:  Eric BÃ©langer <eric@archlinux.org>
# Contributor: Smith Dhumbumroong <zodmaner@gmail.com>

pkgname=re-alpine-fancythreading
real_pkgname=re-alpine
pkgver=2.02
pkgrel=4
pkgdesc="The continuation of the Alpine email client from University of Washington. Including Enhanced fancy threading patch."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/re-alpine/"
license=('APACHE')
depends=('libldap' 'krb5')
optdepends=('aspell: spell-checking support'
	    'hunspell: spell-checking support')
provides=('pine' 'alpine')
conflicts=('pine' 'alpine' 're-alpine')
replaces=('pine' 'alpine')
options=('!makeflags')
source=(http://downloads.sourceforge.net/project/re-alpine/${real_pkgname}-${pkgver}.tar.bz2 
        maildir.patch
	fancy.patch)
md5sums=('5e75826b15f05674856be8618bdefdfb'
         '8d7a0e8d940e84e978f50266405c7361'
         '656a8cacf5adb5884abd7dbb51e20f5f')
sha1sums=('9c2f13dbc7ca75e7a09f81df607db84694b10fa6'
          'c09a8e42f9dba3e63a3755a9c418af95da721d8d'
          'cac10cf4c92d290e5f3bc0946050649bd9172fb9')

build() {
  cd "${srcdir}/${real_pkgname}-${pkgver}"
  patch -p1 < ../fancy.patch
  patch -p1 < ../maildir.patch
   LIBS+=-lpam ./configure --prefix=/usr --without-passfile --without-tcl \
    --disable-shared --with-system-pinerc=/etc/alpine.d/pine.conf \
    --with-system-fixed-pinerc=/etc/alpine.d/pine.conf.fixed
  make
}

package() {
  cd "${srcdir}/${real_pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
}
