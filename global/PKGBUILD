# Maintainer: Lucas De Marchi <lucas.de.marchi@gmail.com>
# Contributor: Philipp Robbel <robbel@gmail.com>

pkgname=global
pkgver=5.9.4
pkgrel=1
pkgdesc="A source code tag system"
arch=(i686 x86_64)
url="http://www.gnu.org/software/global/"
license=('GPL')
depends=()
optdepends=('idutils' 'perl>=4')
backup=('etc/gtags.conf')
source=(http://tamacom.com/global/$pkgname-$pkgver.tar.gz gtags.conf.patch)

build() {
	cd $startdir/src/$pkgname-$pkgver

	./configure --prefix=/usr
	make || return 1
	make DESTDIR=$startdir/pkg install

	# copy gtags.conf and apply patch
	mkdir -p $startdir/pkg/etc
	cp $startdir/pkg/usr/share/gtags/gtags.conf $startdir/pkg/etc
	patch $startdir/pkg/etc/gtags.conf $startdir/src/gtags.conf.patch

	# symbolic link to gtags.el
	mkdir -p $startdir/pkg/usr/share/emacs/site-lisp
	ln -s /usr/share/gtags/gtags.el $startdir/pkg/usr/share/emacs/site-lisp/gtags.el
}
md5sums=('6f715170a124093a3ac8f45ee286d85a'
         'c6b102c9e0b14d631fd8f7231842f65b')
