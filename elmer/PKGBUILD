# Maintained by: sudokode <sudokode@gmail.com>

pkgname=elmer
pkgver=20111216
pkgrel=1
pkgdesc="Robust frontend to wget and/or curl for various pastebin services"
arch=('any')
url="http://github.com/sudokode/elmer"
license=('custom:SPL')
makedepends=('git')
depends=('perl>=5.10' 'perl-uri')
optdepends=('wget: pasting with wget'
				'curl: pasting with curl (required to upload files)'
				'xclip: reading from and printing to X buffer')
provides=('elmer')

_gitroot="git://github.com/sudokode/elmer.git"
_gitname="elmer"

build() {
	cd ${srcdir}
	
	msg "checking git..."
	if [ -d ${_gitname} ] ; then
		cd ${_gitname} && git pull origin
	else
		git clone ${_gitroot}
	fi
	
	msg "building..."
	rm -rf ${srcdir}/${_gitname}-build
	git clone ${srcdir}/${_gitname} ${srcdir}/${_gitname}-build
	cd ${srcdir}/${_gitname}-build
	
	msg "installing..."
	install -D -m755 ${_gitname} ${pkgdir}/usr/bin/${_gitname} || return 1
	install -D -m755 LICENSE ${pkgdir}/usr/share/licenses/${_gitname}/LICENSE || return 1
}
