# Maintainer: Nikita Nikishin <nnikishi@emich.edu>

pkgname=bindery
pkgver=20111122
pkgrel=1
pkgdesc="Interactive digital document binding tool for post-processed scanned images"

arch=('i686' 'x86_64')
url="http://blender3d.github.com/Bindery/"
license=('GPL')

makedepends=('git')
depends=('python2' 'pyqt' 'djvulibre' 'minidjvu' 'jbig2enc-git')
optdepends=('tesseract: OCR engine'
            'cuneiform: OCR engine')

install='bindery.install'

_gitroot="git://github.com/Blender3D/Bindery.git"
_gitname="bindery"

build() {
  git clone ${_gitroot} ${_gitname}
}

package() {
  mkdir -p $pkgdir/usr/{share,bin}
  mkdir -p $pkgdir/usr/share/{icons,application}
  
  mv ${_gitname} $pkgdir/usr/share/
  cp $pkgdir/usr/share/bindery/ui/icons/logo.png $pkgdir/usr/share/icons/bindery.png 
  cp $pkgdir/usr/share/bindery/distro/linux/arch/bindery.desktop $pkgdir/usr/share/applications/
  
  rm -R ${_gitname}/{tests,distro,bin}
  
  echo "#/bin/bash" > $pkgdir/usr/bin/bindery
  echo "cd /usr/share/bindery/" >> $pkgdir/usr/bin/bindery
  echo "python2 main.py" >> $pkgdir/usr/bin/bindery
  
  chmod +x $pkgdir/usr/bin/bindery
}
