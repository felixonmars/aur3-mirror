# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
pkgname=mingw32-box2d
pkgver=2.1.2
pkgrel=1
pkgdesc="2D rigid body simulation library for games (mingw32)"
url="http://www.box2d.org/"
license=('zlib')
arch=('i686' 'x86_64')
depends=('mingw32-gcc')
makedepends=('cmake')
options=(!strip)
source=(http://box2d.googlecode.com/files/Box2D_v${pkgver}.zip
        cmake-toolchain.cmake)
md5sums=('59d142cd8d4d73e8832c7b67591f590c'
         '9fcb99c1e2504f504b4780c3f503bc3f')

build() {
  cd ${srcdir}/Box2D_v${pkgver}/Box2D/
 
  msg "Starting build"
  [[ -d build ]] && rm -r build
  mkdir build && cd build 

  unset LDFLAGS CFLAGS CXXFLAGS
	cmake .. \
    -DCMAKE_INSTALL_PREFIX=/usr/i486-mingw32 \
    -DCMAKE_TOOLCHAIN_FILE=${srcdir}/cmake-toolchain.cmake \
    -DBOX2D_INSTALL=ON \
    -DBOX2D_BUILD_EXAMPLES=OFF \
    -DBOX2D_BUILD_SHARED=OFF || return 1
  make || return 1
	make DESTDIR=${pkgdir} install || return 1
}
# vim: sw=2 ts=2 et:
