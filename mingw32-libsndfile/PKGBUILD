# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
pkgname=mingw32-libsndfile
pkgver=1.0.24
pkgrel=1
pkgdesc="A C library for reading and writing files containing sampled sound (mingw32)"
arch=('i686' 'x86_64')
url="http://www.mega-nerd.com/libsndfile"
license=('LGPL')
depends=('mingw32-flac' 'mingw32-libvorbis')
makedepends=('mingw32-pkgconfig')
options=('!libtool' '!strip')
source=(http://www.mega-nerd.com/libsndfile/files/libsndfile-${pkgver}.tar.gz)
md5sums=('8f823c30c1d8d44830db6ab845d6679e')

build() {
  cd "${srcdir}/libsndfile-${pkgver}"

  unset LDFLAGS CFLAGS CXXFLAGS
  ./configure --enable-shared --enable-static --prefix=/usr/i486-mingw32 --host=i486-mingw32 --disable-sqlite --disable-test-coverage #--disable-external-libs
  make
}

package() {
  cd "${srcdir}/libsndfile-${pkgver}"

  make DESTDIR="${pkgdir}" install
  rm -r $pkgdir/usr/i486-mingw32/share/doc/
  rm -r $pkgdir/usr/i486-mingw32/share/man/
}
