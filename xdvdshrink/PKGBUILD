# Contributor: Ewoud Nuyts <ewoud.nuyts@gmail.com>

pkgname=xdvdshrink
pkgver=2.6.1.10
pkgrel=7
conflicts=('dvdshrink')
pkgdesc="Create fair-use archival copies of DVD content on single-layer writable DVDs"
url="http://dvdshrink.sourceforge.net/"
license="GPL"
arch=('i686' 'x86_64')
depends=('gtk2-perl' 'transcode' 'mjpegtools' 'cdrkit' 'dvd+rw-tools' 'dvdauthor')
source=(http://downloads.sourceforge.net/sourceforge/dvdshrink/dvdshrink-2.6.1-10mdk.tar.gz xdvdshrink.desktop fixes.diff)

build() {
  cd $startdir/src/dvdshrink/usr/bin
  patch -Np1 -i $srcdir/fixes.diff
  cd ../..
  mkdir -p $startdir/pkg/usr/bin
  mkdir -p $startdir/pkg/usr/share/{pixmaps,dvdshrink/doc}
  mv usr/share/icons/* $startdir/pkg/usr/share/pixmaps
  mv usr/share/doc/dvdshrink/{README.txt,batchrip.txt,example.xml} \
  	 $startdir/pkg/usr/share/dvdshrink/doc
  mv usr/share/applications/dvdshrink/* $startdir/pkg/usr/share/dvdshrink
  mv usr/bin/* $startdir/pkg/usr/bin
  chmod a+rx $startdir/pkg/usr/bin/*
  mkdir -p ${startdir}/pkg/usr/share/applications
  install -m644 ${startdir}/src/${pkgname}.desktop ${startdir}/pkg/usr/share/applications/
} 
md5sums=('97af304a32d9eb49420a8eb7dffce671' '49a4e2f99c5f0994d2f49fcba20c65ce' '231b3789b337acebbce19b1a0e0ac7a1')
