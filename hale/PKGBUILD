# Contributor: MCMic <come.bernigaud@laposte.net>

pkgname=hale
pkgver=0.5.1
pkgrel=2
pkgdesc="A Role Playing Game (RPG) with a turn based, tactical combat system. A lengthy campaign is included, with easy support for the creation of additional content."
arch=('i686' 'x86_64')
url="http://sourceforge.net/projects/hale/"
license=('GPL')
depends=('java-runtime>=6' 'lwjgl')
makedepends=()
conflicts=()
source=('http://sourceforge.net/projects/hale/files/hale-0.5.1.zip/download')
md5sums=('42c3dfce0e4e3db935eafbd401690d81')

build() {
    cd $srcdir/

    mkdir -p $pkgdir/opt/
    mkdir -p $pkgdir/usr/bin/
    cp -r $srcdir/hale/ $pkgdir/opt/
    echo -e "#!/bin/sh\ncd /opt/hale/ && sh hale.sh" > $pkgdir/usr/bin/hale
    chmod a+rx $pkgdir/usr/bin/hale
    rm -r $pkgdir/opt/hale/lib/native
    ln -s /usr/share/lwjgl/native $pkgdir/opt/hale/lib/native
    rm -r $pkgdir/opt/hale/lib/lwjgl.jar
    ln -s /usr/share/lwjgl/jar/lwjgl.jar $pkgdir/opt/hale/lib/lwjgl.jar
    chmod -R a+wx $pkgdir/opt/hale/docs $pkgdir/opt/hale/campaigns
    rm $pkgdir/opt/hale/hale.exe
    rm -r $pkgdir/opt/hale/src
}
