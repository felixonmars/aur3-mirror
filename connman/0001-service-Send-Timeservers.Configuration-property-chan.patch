From 8d0c65ad8f708f397816148fb5e34603b246ae2c Mon Sep 17 00:00:00 2001
From: Patrik Flykt <patrik.flykt@linux.intel.com>
Date: Thu, 19 Apr 2012 11:00:08 +0300
Subject: [PATCH 1/5] service: Send Timeservers.Configuration property changed

Fixes BMC#25055.
---
 src/service.c |   10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/src/service.c b/src/service.c
index 8f97c09..04be98e 100644
--- a/src/service.c
+++ b/src/service.c
@@ -1724,6 +1724,15 @@ static void proxy_configuration_changed(struct connman_service *service)
 	proxy_changed(service);
 }
 
+static void timeservers_configuration_changed(struct connman_service *service)
+{
+	connman_dbus_property_changed_array(service->path,
+			CONNMAN_SERVICE_INTERFACE,
+			"Timeservers.Configuration",
+			DBUS_TYPE_STRING,
+			append_tsconfig, service);
+}
+
 static void link_changed(struct connman_service *service)
 {
 	connman_dbus_property_changed_dict(service->path,
@@ -2933,6 +2942,7 @@ static DBusMessage *set_property(DBusConnection *conn,
 		}
 
 		service_save(service);
+		timeservers_configuration_changed(service);
 
 		__connman_timeserver_sync(service);
 	} else if (g_str_equal(name, "Domains.Configuration") == TRUE) {
-- 
1.7.10

