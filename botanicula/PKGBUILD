# Maintainer: Ner0

pkgname=botanicula
_gamepkg="Botanicula.air"
pkgver=1.0
pkgrel=1
pkgdesc="A point'n'click exploration game from the creators of Machinarium"
arch=('any')
url="http://www.botanicula.net/"
license=('custom')
depends=('adobe-air-sdk')
makedepends=('unzip')
source=($pkgname.desktop
        $pkgname.sh)
md5sums=('ad97074584ba149be4a135d892f3951d'
         '59a9c09f43e709755bc013893f70a69a')

# Uncomment this to reduce the compression time
# PKGEXT='.pkg.tar'

build () {
   msg "You need a full copy of this game in order to install it"
   msg "Searching for ${_gamepkg} in dir: \"$startdir\""
	 pkgpath=$startdir
   if [[ ! -f "$startdir/${_gamepkg}" ]]; then
       error "Game package not found, please type absolute path to ${_gamepkg} (/home/joe):"
       read pkgpath
       if [[ ! -f "${pkgpath}/${_gamepkg}" ]]; then
           error "Unable to find game package." && return 1
       fi
    fi
    msg "Found game package, installing..."


  # Creating folders
  install -dm755 "$pkgdir"/usr/{bin,share/{applications,games/botanicula}}

  # Extracting the game files
  unzip "$pkgpath/$_gamepkg" -d "$pkgdir/usr/share/games/$pkgname"

  # Installing launch script and desktop file
  install -m755 $pkgname.sh "$pkgdir/usr/bin/$pkgname"
  install -m644 $pkgname.desktop "$pkgdir/usr/share/applications"
}
