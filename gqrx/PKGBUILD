# Maintainer: Dominik Heidler <dheidler@gmail.com>

pkgname=gqrx
pkgver=2.0
pkgrel=3
pkgdesc="Control and SDR application for the Funcube Dongle software defined radio receiver."
arch=('i686' 'x86_64')
url="http://www.oz9aec.net/index.php/gnu-radio/gqrx-sdr"
license=('GPL')
depends=('qt>=4.6' 'boost-libs' 'fftw' 'libusb' 'gsl' 'alsa-lib')
makedepends=('make' 'gnuradio' 'patch' 'boost')
install='gqrx.install'
source=("http://downloads.sourceforge.net/${pkgname}/${pkgname}-${pkgver}-src.tar.gz" "link_libs.patch" "21-fcd.rules" "${pkgname}.png" "${pkgname}.desktop")

build() {
	cd "$srcdir/$pkgname-$pkgver-src"
	msg "Applying patch for linking against librt and libboost_system"
	patch -p1 < ../link_libs.patch
	qmake
	make
}

package() {
	install -m755 -d $pkgdir/etc/udev/rules.d
	install -m755 -d $pkgdir/usr/{bin,share/applications,share/pixmaps}

	cd $srcdir
	
	install -D -m644 21-fcd.rules $pkgdir/etc/udev/rules.d
	install -D -m644 $pkgname.desktop $pkgdir/usr/share/applications
	install -D -m644 $pkgname.png $pkgdir/usr/share/pixmaps

	cd "$pkgname-$pkgver-src"

	install -D -m755 $pkgname $pkgdir/usr/bin
}

md5sums=('278aa43746b98cbac6a5564a7789c14a'
         'ee7432d6325175f0940cb36831d77d4e'
         '2be3bf7cba02e90cbbb9d5f6cfdaf68b'
         'f7032a8883c89bd80e0d0fd36f861c59'
         '810f89195231c18f32af92522aade721')
