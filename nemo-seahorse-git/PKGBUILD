# Maintainer: OmeGa <omg@vmail.me>

_pkgname=nemo-seahorse
pkgname=${_pkgname}-git
pkgver=20121117
pkgrel=1
pkgdesc="PGP encryption and signing for Nemo file manager."
arch=('i686' 'x86_64')
url="https://github.com/linuxmint/nemo-extensions"
license=('GPL2')
depends=('libcryptui' 'gcr' 'nemo-fm')
makedepends=('intltool' 'git')
options=('!libtool')

install=$pkgname.install

_gitroot="git://github.com/linuxmint/nemo-extensions.git"
_gitname="nemo-extensions"

build() {
  cd $srcdir

  msg "Connecting to GIT server..."
  if [ -d $_gitname ]; then
      cd $_gitname && git pull origin
      msg "The local files are updated."
  else
      git clone $_gitroot $_gitname
  fi

  msg "GIT checkout done or server timeout."
  msg "Starting make..."

  rm -rf "$srcdir/$_gitname-build"
  git clone "$srcdir/$_gitname" "$srcdir/$_gitname-build"
  
  cd "$srcdir/$_gitname-build"/${_pkgname}

  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var \
              --disable-static --disable-schemas-compile
  make
}

package() {
  cd "$_gitname-build"/${_pkgname}
  make DESTDIR="${pkgdir}" install
}
