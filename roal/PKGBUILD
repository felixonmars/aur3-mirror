# Maintainer: Bjoern Bidar <theodorstormgrade@gmail.com>
pkgname=roal  
pkgrel=1
pkgver=0.3
pkgdesc="Relics of Annorath is a MMORPG which plays in a medieval/post-modern ambience, game launcher"
url="https://portal.annorath-game.com"
arch=('i686' 'x86_64')
license=('GPL3' 'CC: BY-NC-ND' 'custom: SIL')
depends=( 'qt5' 'icu' 'openssl' 'libtorrent-rasterbar')
makedepends=( 'git' )

#source=("git://github.com/QuantumBytesInc/ROAL.git")
#md5sums=('SKIP')
_gitroot='git://github.com/QuantumBytesInc/ROAL.git'
_gitname=ROAL
build() {
   cd "$srcdir"
   msg "Connecting to GIT server..."
   if [ -d $_gitname ] ; then
     cd $_gitname && git pull origin
     msg "The local files are updated."
   else
     git clone --depth=1 $_gitroot $_gitname
   fi
   msg "GIT checkout done or server timeout"
   cd "${srcdir}/$_gitname"

   qmake-qt5 -project
   qmake-qt5
   make || return 1

}


package() {
   install -D -m644 "${srcdir}/$_gitname/licences/SIL - Open Font License.txt" \
        "${pkgdir}/usr/share/licenses/${pkgname}/SIL - Open Font License.txt"
   install -D -m644 "${srcdir}/$_gitname/LICENSE" \
        "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
  make DESTDIR=$pkgdir/ install
}

#pkgver () {
#  cd "$srcdir/$_gitname"
#  echo $(git describe --always | sed 's/-/./g')
#}
