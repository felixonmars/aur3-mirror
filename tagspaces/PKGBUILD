pkgname=tagspaces
pkgver=1.7.9
pkgrel=1
pkgdesc="TagSpaces is an open source personal data manager.
It helps you organize files with tags on every platform."
arch=("i686" "x86_64")
url="http://tagspaces.org"
license=("AGPL")
depends=("node-webkit")
makedepends=("gendesk")
sha256sums=("97b61978fd746cad1b16494f4bfc75ea74f46e0d5612ad0d96c34010dafaa66e")
source=("https://github.com/uggrock/tagspaces/archive/v${pkgver}.tar.gz")

prepare() {
  gendesk -f -n --pkgname "$pkgname" --pkgdesc "$pkgdesc" --exec='nw /opt/'${pkgname}'/data/node-webkit/'
}

package() {
  msg2 "create path and copy files"
  mkdir -p $pkgdir/opt/${pkgname}
  cp -R $srcdir/${pkgname}-${pkgver}/* $pkgdir/opt/${pkgname}
  install -Dm644 "$pkgname.desktop" "$pkgdir/usr/share/applications/$pkgname.desktop"
  install -Dm644 "$srcdir/${pkgname}-${pkgver}/data/assets/icon.svg" "$pkgdir/usr/share/pixmaps/$pkgname.svg"
#  msg2 "symlink /usr/bin/nw -> /usr/lib/${pkgname}/nw"
#  ln -s "/usr/bin/nw" "$pkgdir/opt/${pkgname}/data/node-webkit/nw"
#  ln -s "/usr/lib/nw.pak" "$pkgdir/opt/${pkgname}/data/node-webkit/nw.pak" 
}
