# Maintainer: Matthew Bauer <mjbauer95@gmail.com>
_pkgname='pithos'
pkgname="$_pkgname-bzr"
pkgver=62
pkgrel=4
pkgdesc='A Pandora Radio (pandora.com) player for the GNOME Desktop using the libpiano library (also used by pianobar).'
arch=('i686' 'x86_64')
url="http://launchpad.net/$_pkgname"
license=('GPL')
depends=('python2' 'pygtk' 'python-notify' 'dbus-python' 'gstreamer0.10-python' 'pyxdg' 'python-distutils-extra') #python-libpiano
makedepends=('bzr' 'swig' 'python2-distribute')
optdepends=('python-keybinder')
provides=("$_pkgname" "python-libpiano")

_bzrbranch="https://code.launchpad.net/$_pkgname/trunk"
_bzrmod="$_pkgname"

build() {
	cd ${srcdir}

	msg "Connecting to the server...."

	if [ ! -d ./${_bzrmod} ]; then
		bzr co ${_bzrbranch} ${_bzrmod}
	else
		bzr up ${_bzrmod}
	fi

	msg "BZR checkout done or server timeout"
	msg "Starting make..."

	[ -d ./${_bzrmod}-build ] && rm -rf ./${_bzrmod}-build
	cp -r ./${_bzrmod} ./${_bzrmod}-build
	cd ./${_bzrmod}-build

	python2 setup.py install --prefix=/usr --root="${pkgdir}"
}
