# Maintainer: flub <flub123@gmx.de>

pkgname=torque
pkgver=3.0.1
pkgrel=1
pkgdesc='An open source resource manager providing control over batch jobs and distributed compute nodes.'
url='http://www.clusterresources.com/products/torque-resource-manager.php'
arch=('i686' 'x86_64')
license=('GPL')
depends=('openssh')
makedepends=('make' 'gcc')
optdepends=()
install=torque.install
options=(!libtool)
source=("http://www.clusterresources.com/downloads/${pkgname}/${pkgname}-${pkgver}.tar.gz"
        "torque-server"
        "torque-client")
md5sums=('d65463f823fdcd864c09ffd16841507b'
         '41581ea0fba02960ec7c128432f8f6ec'
         'dfe8aa183dd9ec5dfcc2ba6a5f234053')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  ./configure --with-default-server=localhost \
              --with-server-home=/var/spool/torque \
  				    --with-rcp=scp \
  				    --prefix=/usr \
  				    --disable-gcc-warnings \
  				    --mandir=/usr/share/man || return 1
  make || return 1
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}/" install || return 1
  mkdir -p ${pkgdir}/etc/rc.d/
  cp ${srcdir}/torque-server ${pkgdir}/etc/rc.d/
  cp ${srcdir}/torque-client ${pkgdir}/etc/rc.d/ 
}

# vim:set ts=2 sw=2 et:

