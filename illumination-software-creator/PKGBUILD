# Maintainer: Limao Luo <luolimao@gmail.com>
# Contributor: snostorm <snostormjp@gmail.com>

pkgname=illumination-software-creator
pkgver=5.0b2
pkgrel=5
pkgdesc="Illumination Software Creator: Graphical programming environment that generates source code for various targets (including ActionScript/Adobe Flex, Android, HTML/JS, and Python/GTK)"
url="http://lunduke.com/?page_id=3454"
arch=('i686' 'x86_64')
license=('custom:GLL')
depends=('gtk2' 'desktop-file-utils')
optdepends=(
    'pygtk: Needed for Python/GTK target'
    'eclipse-android: Needed for Android target'
    'android-sdk: Needed for Android target'
    'adobe-air-sdk: Needed for building Adobe Air/flex targets')
provides=('illumination')
if test "$CARCH" == x86_64; then
    depends+=('lib32-gtk2')
    optdepends+=(
	'lib32-libcanberra: To get rid of an annoying error'
	'lib32-gtk-engines: Needed to get a decent look & feel')
fi
install="illumination.install"
source=(
    'http://www.lunduke.com/isc/beta/isc-5-beta-2-linux.tar.gz'
    'LICENSE'
    'illumicon48.png'
    'illumicon.png'
    'illumination.desktop'
)
sha256sums=(
    '9a63a68689014dd5158b7b0273894bc292007e44c4604beca5263872ce4681df'
    '870a9a45df91e2cb5017e8d6d29467e859809105b6830e7124fe97637b07d973'
    '5a5c76b8ab3ded50ac22082c16782ab0355fbe49f068155182f33f99b484d840'
    'e97606f3482f0d4110aa8333c52faa7a77e417aff4f17ec87c149f96b7924e7e'
    '00b0833e4ef6eea8e59b89699237ff37a358b0d4c49a89997e34d1772b095bae')
sha512sums=(
    '828ce762ab85720058bd05b98370a5d666c018f0924d7956f57355910e196bf07b6e9142c3453ac2fb06e280cc66d70a4a7448f6c9aca6b5ee06324b3c1b4a4d'
    '69bfd303f6e152da51fd87ab5d20e989332b919206311fc4b88c85ecd5aa96bad3287bdc3dfbc3ad72401560133d0b2877be4fb67a09cce03f8c1f5ba2db6d5b'
    'e898236916ed5ed0d2a71e27242675c0f8e744d180b5441895a02b32179da23a66d976a0d91f583cb1534b48c8d92c9fadab085f80a621586495a79a5918a118'
    '606649a56c5d747b6b32e5a3389341183bee86fe34aa935ada0d40726413995b297ad8194ce8cee83c4290f0c8b040a5dfa9e80e9914f1ae5ec692d753a5e06d'
    'a08206852f04eb84f09c1e4fd72eded1ba8eddf502be112d3ae0a0b211c360f098ebdd5d3ea07028b4211c2d4276881ed21afaa8927a505901c2119d8f9a7d73')

build() {
    cd $srcdir
    tar xzf isc-5-beta-2-linux.tar.gz
    mkdir opt/
    mv illumination/ opt/illumination/
    cp $startdir/*png opt/illumination/
    mv opt/ $pkgdir/.
    install -D LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
    desktop-file-install illumination.desktop --dir="${pkgdir}/usr/share/applications/"
}

package() {
    install -dD $pkgdir/opt/* /opt/.
}
