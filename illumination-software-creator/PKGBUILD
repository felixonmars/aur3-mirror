# Maintainer: Limao Luo <luolimao@gmail.com>
# Contributor: snostorm <snostormjp@gmail.com>

pkgname=illumination-software-creator
pkgver=5.0b2
pkgrel=7
pkgdesc="Illumination Software Creator: Graphical programming environment that generates source code for various targets (including ActionScript/Adobe Flex, Android, HTML/JS, and Python/GTK)"
url="http://lunduke.com/?page_id=3454"
arch=('i686' 'x86_64')
license=('custom:GLL')
depends=('gtk2' 'desktop-file-utils')
optdepends=(
    'pygtk: Needed for Python/GTK target'
    'eclipse-android: Needed for Android target'
    'android-sdk: Needed for Android target'
    'adobe-air-sdk: Needed for building Adobe Air/flex targets')
provides=('illumination')
if test "$CARCH" == x86_64; then
    depends+=('lib32-gtk2')
    optdepends+=(
	'lib32-libcanberra: To get rid of an annoying error'
	'lib32-gtk-engines: Needed to get a decent look & feel')
fi
install="illumination.install"
source=(
    'http://www.lunduke.com/isc/beta/isc-5-beta-2-linux.tar.gz'
    'LICENSE'
    'illumination.png'
    'illumination.desktop'
)
sha256sums=(
    '9a63a68689014dd5158b7b0273894bc292007e44c4604beca5263872ce4681df'
    '870a9a45df91e2cb5017e8d6d29467e859809105b6830e7124fe97637b07d973'
    'e97606f3482f0d4110aa8333c52faa7a77e417aff4f17ec87c149f96b7924e7e'
    '5b540f541aee9365d8891f89929ce6bd88135150657d6101b1b8c9fb6bfe6863')
sha512sums=(
    '828ce762ab85720058bd05b98370a5d666c018f0924d7956f57355910e196bf07b6e9142c3453ac2fb06e280cc66d70a4a7448f6c9aca6b5ee06324b3c1b4a4d'
    '69bfd303f6e152da51fd87ab5d20e989332b919206311fc4b88c85ecd5aa96bad3287bdc3dfbc3ad72401560133d0b2877be4fb67a09cce03f8c1f5ba2db6d5b'
    '606649a56c5d747b6b32e5a3389341183bee86fe34aa935ada0d40726413995b297ad8194ce8cee83c4290f0c8b040a5dfa9e80e9914f1ae5ec692d753a5e06d'
    '76e0e1aae789ca20a8261e84e17303a5e0ba0b51a60764db8d9f1df50915e8e067af7c4f5963e48f1fdf3354cf20f3a4a8ad436215f969b4f9b46838e76f02b0')

build() {
    cd $srcdir
    mkdir opt/
    install -Dm644 LICENSE $pkgdir/usr/share/licenses/$pkgname/LICENSE
    mv illumination/ opt/$pkgname/
    install -Dm644 illumination.png $pkgdir/usr/share/pixmaps/illumination.png
    mv opt/ $pkgdir/.
    desktop-file-install illumination.desktop --dir="${pkgdir}/usr/share/applications/"
}

package() {
    install -dD $pkgdir/opt/* /opt/.
}
