# Maintainer: archtux <antonio.arias99999 at gmail.com>
# Contributor: knedlyk
 
pkgname=deadbeef-git
pkgver=20111204
pkgrel=1
pkgdesc="mp3/ogg/flac/ape/sid/mod/nsf/m4a/mpc/shn music player based on GTK2 with translations"
url="http://deadbeef.sourceforge.net"
arch=('i686' 'x86_64')
license='GPL2'
depends=('alsa-lib' 'gtk2' 'libsamplerate')
makedepends=('autoconf' 'automake' 'curl' 'faad2' 'flac' 'ffmpeg' 'git' 'intltool' 'libcddb' 'libcdio' 'libmad' 'libsndfile' 'libvorbis' 'libx11' 'pkg-config' 'wavpack' 'zlib')
optdepends=('libvorbis: ogg vorbis playback' 'libmad: mp1/2/3 playback' 'flac: flac playback' 'curl: lastfm scrobbler, shoutcast, icecast, podcast support' 'wavpack: wv playback' 'libsndfile: wav playback' 'libcdio: audio cd playback' 'libcddb: audio cd plugin' 'ffmpeg: for wma, aa3, oma, ac3, etc' 'libmms: required for MMS protocol support' 'faad2: required for AAC/MP4 support' 'dbus: required for OSD notifications support' 'pulseaudio: required for PulseAudio output plugin' 'libx11: required for global hotkeys plugin')
provides=('deadbeef')
conflicts=('deadbeef')
options=('!libtool')
install='deadbeef.install'

_gitname=deadbeef
_gitroot=git://lxde.git.sourceforge.net/gitroot/lxde/${_gitname}
 
build() {
  cd $srcdir
  msg "Connecting to GIT server...."
  rm  -rf $srcdir/$_gitname-build
 
  if [ -d $_gitname ]; then
   cd $_gitname
   git pull origin
    else
   git clone $_gitroot
     fi

  msg "GIT checkout done or server timeout"
  msg "Starting make..."
 
  cd $srcdir
  cp -r $_gitname $_gitname-build
 
  cd $_gitname-build
  git checkout --track -b l10n origin/i18n
 
  ./autogen.sh
  ./configure --prefix=/usr
  make
  make DESTDIR=$pkgdir install
}