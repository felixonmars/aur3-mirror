pkgname=php-libgit2-git
pkgver=20110408
pkgrel=1
pkgdesc="PHP bindings for libgit2 (php-git)"
url="https://github.com/libgit2/php-git"
license="MIT"
arch=('i686' 'x86_64')
depends=('php' 'libgit2')
conflicts=('php-libgit2')
makedepends=('php')
_gitroot='git://github.com/libgit2/php-git.git'
_gitname='develop'
source=()
md5sums=()

build() {
	cd $startdir/src
	msg "Connecting to github.com GIT server...."
    
	if [ -d $startdir/src/$_gitname ] ; then
		cd php-git && git pull origin
		msg "The local files are updated."
	else
		git clone $_gitroot
		cd php-git
	fi
	
	cd src || return 1
	msg "PHPIZE"
	/usr/bin/phpize
	msg CONFIGURE
	./configure --prefix=/usr
	msg "MAKE"
	make
	msg "INSTALL"
	make INSTALL_ROOT=${pkgdir} install
	msg "Rememeber to add 'extension=git.so' to your php config"
}
