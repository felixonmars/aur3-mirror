# Contributor: Orivej Desh <masecretaire@gmx.fr>
# Maintainer: Orivej Desh <masecretaire@gmx.fr>
pkgname=sonic-visualiser
pkgver=1.7.2
pkgrel=1
pkgdesc="A viewer and analyser of music audio files"
arch=("i686" "x86_64")
url="http://www.sonicvisualiser.org/"
license=("GPL")
depends=("qt" "liblrdf" "bzip2" "rubberband" "liblo" "libid3tag" "redland" "vamp-plugin-sdk>=2.0" \
	"libmad" "libvorbis" "libfishsound") # Dependencies on this line are optional
source=("http://downloads.sourceforge.net/sv1/$pkgname-$pkgver.tar.bz2" "assert.patch")
md5sums=('06b31cd07eee708d33aba46cb2d20fe2' '9651c6045b1086be24641f96b10bdcbc')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -Np1 -i ../assert.patch || return 1
  qmake
  make || return 1
  install -d "$pkgdir/usr/bin" "$pkgdir/usr/share/applications" "$pkgdir/usr/share/pixmaps" 
  install "sv/sonic-visualiser" "$pkgdir/usr/bin"
  install "sv/sonic-visualiser.desktop" "$pkgdir/usr/share/applications"
  install "sv/icons/sv-48x48.png" "$pkgdir/usr/share/pixmaps/sv-icon.png"
}
