# Maintainer: wenLiangcan <boxeed@gmail.com>

pkgname=light-table
_pkgname=LightTable
pkgver=0.6.0
pkgrel=2
pkgdesc="A new interactive IDE that lets you modify running programs and embed anything from websites to games."
arch=('x86_64' 'i686')
url='http://www.lighttable.com/'
license=('GPL')
depends=('libudev.so.0' 'nss' 'gconf')
source=("${_pkgname}.desktop")
md5sums=('154487451c9e12f1e6b49556d1f6481c')
options=('!strip')

if [[ ${CARCH} == "x86_64" ]]; then
    source+=("http://d35ac8ww5dfjyg.cloudfront.net/playground/bins/${pkgver}/LightTableLinux64.tar.gz")
    md5sums+=('12da99c02687c136c6281e8adcdfbed2')
elif [[ ${CARCH} == "i686" ]]; then
    source+=("https://d35ac8ww5dfjyg.cloudfront.net/playground/bins/${pkgver}/LightTableLinux.tar.gz")
    md5sums+=('6565f599b7760f0f7dd2d186d9cc6d17')
fi

package() {
    cd "${srcdir}"
    install -Dm644 "${_pkgname}.desktop" "${pkgdir}/usr/share/applications/${_pkgname}.desktop"
    mkdir -p "${pkgdir}/opt/${_pkgname}"
    #use libudev.so.0 as dep and remove related function in launch script 
    sed -i -e '6,31d' "${_pkgname}/LightTable"
    mv -T "${_pkgname}" "${pkgdir}/opt/${_pkgname}"
    chmod -R 755 "${pkgdir}/opt/${_pkgname}"
}
