# Maintainer: Sam S. <smls75@gmail.com>

pkgname=mnemosyne-bzr
pkgver=2.0_rc1++
pkgrel=0
pkgdesc="A pyqt flash-card program with a sophisticated card review algorithm (latest development snapshot)"
arch=('i686' 'x86_64')
url='http://www.mnemosyne-proj.org'
license=('GPL')
depends=('python2-pyqt' 'python2-matplotlib' 'python2-cherrypy')
makedepends=('bzr' 'python2-distribute' 'python2-sphinx')
optdepends=('texlive-core: support for mathematical formulae in cards')
conflicts=('mnemosyne')
install='mnemosyne-bzr.install'

_bzrbranch=lp:mnemosyne-proj
_bzrdir=mnemosyne-proj

build() {
  cd ${srcdir}

  msg "Connecting to the server...."
  if [ ! -d ./${_bzrdir} ];
    then bzr co ${_bzrbranch} ${_bzrdir};
    else bzr up ${_bzrdir}; fi
  msg "BZR checkout done or server timeout."

  msg "Starting setup..."
  cd ${_bzrdir}/mnemosyne
  make DESTDIR=${pkgdir} install-system
}
