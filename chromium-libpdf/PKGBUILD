# Maintainer: Andrew Webley <unsuspectinghero@gmail.com>
# Contributor: Dmitriy Morozov <archlinux@foxcub.org>
pkgname=chromium-libpdf
pkgver=25.0.1337.0
pkgrel=1
pkgdesc="PDF Viewer for Chromium"
url="http://wiki.archlinux.org/index.php/Chromium#libpdf.so"
arch=('i686' 'x86_64')
license=('custom:chrome')
depends=('chromium')
makedepends=('lynx')
if [ "$CARCH" = "i686" ]; then
	_arch="i386"
	sha512sums=('d13920830394e569df225cfbd5e77e422cd81e034b65e37201039fde84347c04c8163879e2d976aef7dca3dc0999aff37da4ce772e9689f03d88437f4956c5b2 ')
elif [ "$CARCH" = "x86_64" ]; then
	_arch="amd64"
	sha512sums=('89533223a97a5b1fefe06958b41ce2e0a8421237eb804e85b6d880456dde0438ebb4e9692ee06e1794e6a55d3c6b4a1b0c9bdbf8475aaff331bc1a90b386e8bc')
fi
source=("https://dl.google.com/linux/direct/google-chrome-unstable_current_$_arch.deb")
build() {
	cd "$srcdir"
	lynx https://www.google.com/chrome/intl/en/eula_text.html --dump >> LICENSE
	bsdtar xvf "google-chrome-unstable_current_$_arch.deb" data.tar.lzma
	bsdtar xvf data.tar.lzma opt/google/chrome/libpdf.so
	install -Dm755 opt/google/chrome/libpdf.so "$pkgdir/usr/lib/chromium/libpdf.so"
	install -Dm644 LICENSE "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
