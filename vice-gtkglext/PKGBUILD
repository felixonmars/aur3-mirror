# Contributor: grimi <grimi at poczta dot fm>

pkgname=vice-gtkglext
_pkgname=vice
pkgver=2.3
pkgrel=3
pkgdesc="A Versatile Commodore Emulator , with enabled gtkglext"
arch=('i686' 'x86_64')
license=('GPL')
url="http://vice-emu.sourceforge.net"
depends=('alsa-lib' 'gtkglext' 'gcc-libs' 'giflib' 'lame' 'libjpeg' 'libpng' 'libxrandr')
makedepends=('xorg-font-utils' 'pkg-config')
provides=("vice=$pkgver")
conflicts=('vice' 'vice-gnomeui')
replaces=('vice')
source=(http://downloads.sourceforge.net/project/vice-emu/releases/${_pkgname}-${pkgver}.tar.gz ffmpeg.patch)
md5sums=('b48d137874daad50c087a0686cbdde34'
         '54a21b8ea5b1fbf4201172f15fad0a43')


build() {
  cd ${_pkgname}-${pkgver}

  patch -Np1 -i ../ffmpeg.patch

  ./configure --prefix=/usr --enable-fullscreen --enable-gnomeui

  sed 's|cp \$(fontsdir)|cp data/fonts|' -i data/fonts/Makefile

  make -j1
}


package() {
  cd ${_pkgname}-${pkgver}

  make DESTDIR=$pkgdir install
}

