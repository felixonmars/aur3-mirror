# Maintainer: Joao Cordeiro <jlcordeiro at gmail dot com>
# Contributor: SirClueless

pkgname=libtcod-beta
_pkgname=libtcod
pkgver=1.5.1
pkgrel=3
pkgdesc="Roguelike graphics/utility library"
arch=('i686' 'x86_64')
url="http://doryen.eptalys.net/libtcod/"
license=('BSD')
depends=('libpng' 'sdl' 'zlib' 'libgl')
provides=('libtcod')
source=(http://doryen.eptalys.net/?file_id=26
        'pnginfopp.patch')
md5sums=('c674f60416eee5f35f35388d7e965dfe'
         '732a2c42882fb6eef879b1343bc8b38e')

build() {
   tar -zxvf "?file_id=26"

   cd "$srcdir/$_pkgname-$pkgver"

   patch -p0 ./src/sys_sdl_img_png.c < $srcdir/pnginfopp.patch

   if test "$CARCH" == x86_64; then
      make -f makefiles/makefile-linux64 release TEMP=$pkgdir/tmp/
   else
      make -f makefiles/makefile-linux release TEMP=$pkgdir/tmp/
   fi

   mkdir -p $pkgdir/usr/lib
   mkdir -p $pkgdir/usr/include/$_pkgname

   install -D -m 644 libtcod{,gui,xx}.so $pkgdir/usr/lib/
   install -D -m 644 include/*.h* $pkgdir/usr/include/$_pkgname/
}

# vim:set ts=2 sw=2 et:
