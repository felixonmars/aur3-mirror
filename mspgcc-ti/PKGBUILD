# Maintainer: Peter Ivanov <ivanovp@gmail.com>

pkgname=mspgcc-ti
pkgver=2.01.01.00
pkgrel=2
pkgdesc="GNU toolchain for the TI MSP430 processor"
arch=('i686' 'x86_64')
url="http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSPGCC/1_00_00_00/index_FDS.html"
license=('GPL')
#makedepends=('unzip')
#depends=('elfutils' 'libmpc')
options=(!strip !emptydirs !libtool)
install=mspgcc-ti.install
_installer=msp430-gcc-full-linux-installer-2.1.1.0.run
source=("http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSPGCC/2_01_01_00/exports/$_installer")
sha1sums=('af4b4c73bf6ebef2a67d6ef8e7b774503d9353de')
_install_dir=/opt/ti/mspgcc

build() {
  chmod +x $_installer
}

package() {
  echo Running installer...
  ${srcdir}/$_installer --mode unattended --prefix $pkgdir$_install_dir
  mkdir -p $pkgdir$_install_dir/msp430-elf/lib
  mv -v $pkgdir$_install_dir/include/*.ld $pkgdir$_install_dir/msp430-elf/lib
  mkdir -p $pkgdir$_install_dir/msp430-elf/include
  mv -v $pkgdir$_install_dir/include/*.h $pkgdir$_install_dir/msp430-elf/include
}

# vim:set sts=2 ts=2 sw=2 et:
