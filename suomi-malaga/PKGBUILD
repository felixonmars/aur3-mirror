# Contributor: Jussi Timperi <jussi.timperi at gmail dot com>

pkgbase=suomi-malaga
pkgname=suomi-malaga-voikko
#pkgname=($pkgbase-voikko $pkgbase-sukija)
pkgver=1.10
pkgrel=1
pkgdesc="A description of Finnish morphology written in Malaga."
arch=('i686' 'x86_64')
url="http://voikko.sourceforge.net/"
license=('GPL2')
makedepends=('python2' 'malaga>=7.12')
conflicts=('suomi-malaga')
provides=('suomi-malaga')
source=(http://downloads.sourceforge.net/voikko/$pkgbase-$pkgver.tar.gz)

build() {
  cd "$srcdir/$pkgbase-$pkgver"

  sed 's|PYTHON=python|PYTHON=python2|g' -i Makefile
  make voikko EXTRA_LEX=vocabulary/erikoisalat/linux-distributions.lex
  make sukija EXTRA_LEX=vocabulary/erikoisalat/linux-distributions.lex

}

package_suomi-malaga-voikko() {
  cd "$srcdir/$pkgbase-$pkgver"
  make voikko-install DESTDIR="$pkgdir/usr/lib/suomi-malaga"

}

package_suomi-malaga-sukija() {
  cd "$srcdir/$pkgbase-$pkgver/sukija"

  mkdir -p "${pkgdir}/usr/lib/suomi-malaga/2/mor-standard"
  cp suomi.lex_l "${pkgdir}/usr/lib/suomi-malaga/2/mor-standard/sukija-fi_FI.lex_l"
  cp suomi.mor_l "${pkgdir}/usr/lib/suomi-malaga/2/mor-standard/sukija-fi_FI.mor_l"
  cp suomi.sym_l "${pkgdir}/usr/lib/suomi-malaga/2/mor-standard/sukija-fi_FI.sym_l"
  cp suomi.pro "${pkgdir}/usr/lib/suomi-malaga/2/mor-standard/sukija-fi_FI.pro"

}

# vim:set ts=2 sw=2 et:
md5sums=('a3517a6aa76d11f16db7231530ad6c29')
