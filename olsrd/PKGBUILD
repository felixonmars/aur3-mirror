# Contributor: William Rea <sillywilly@gmail.com>
# Maintainer: Claudio Pisa <clauz@ninux.org>
pkgname=olsrd
pkgver="0.6.5.2"
pkgrel=1
pkgdesc="OLSR routing daemon"
arch=(i686 x86_64 ppc)
url="http://www.olsr.org"
license=('BSD')
depends=('glibc')
makedepends=('bison')
backup=(etc/olsrd.conf)
install=olsrd.install
source=(http://www.olsr.org/releases/0.6/${pkgname}-${pkgver}.tar.bz2 rc.d.olsrd)
md5sums=('190e3c763656f71d3ca6868db7658f43' '36c7756c5d670a33d6ae7f3ba4207e48')

build() {
  cd `ls -Fd $startdir/src/olsrd* | grep /$`
  make OS=linux build_all || return 1
  make DESTDIR=$startdir/pkg install_all || return 1
  mkdir -p $startdir/pkg/etc/rc.d
  cp $startdir/rc.d.olsrd $startdir/pkg/etc/rc.d/olsrd
  chmod 755 $startdir/pkg/etc/rc.d/olsrd
  mkdir -p $startdir/pkg/usr/share/licenses/olsrd
  cp license.txt $startdir/pkg/usr/share/licenses/olsrd/
}

