# Contributor: Bernhard Walle <bernhard.walle@gmx.de>
# Maintainer: Ronny Steiner <post@sirsteiner.de>
# AUR Category: office
pkgname=ffgtk
pkgver=0.7.8
pkgrel=2
pkgdesc="FRITZ!Box Fax-Software and Call-Monitor"
url="http://www.tabos.org/ffgtk"
license="GPL"
depends=('libcapi20' 'capifax>=0.7.3-4' 'spandsp' 'libao' 'libsndfile' 'speex')
makedepends=('libcapi20' 'spandsp' 'intltool' 'libao' 'libsndfile' 'speex')
conflicts=('ffgtk-svn')
arch=(i686 x86_64)
source=(http://www.tabos.org/ffgtk/download/${pkgname}-${pkgver}.tar.bz2 patch_plugins.txt)
md5sums=('e23de494510a96f515fdfe7e20292c59' 'd6ae60ca529d0679c3231c713068e423')
install=('ffgtk.install')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}
#  mv ./ffgtk/Makefile.am ./ffgtk/Makefile.am.orig
#  sed -e 's/ -Werror//' ./ffgtk/Makefile.am.orig > ./ffgtk/Makefile.am
  patch ./plugins/Makefile.am <../../patch_plugins.txt
  ./autogen.sh
  ./configure --prefix=/usr --sysconfdir=/etc --with-gnome-keyring=no
  make || return 1
  make DESTDIR=${pkgdir} install || return 1
}
