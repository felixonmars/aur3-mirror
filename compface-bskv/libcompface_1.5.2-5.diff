--- libcompface-1.5.2.orig/t.xbm
+++ libcompface-1.5.2/t.xbm
@@ -0,0 +1,23 @@
+#define noname_width 48
+#define noname_height 48
+static char noname_bits[] = {
+ 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x3F,0x00,0x00,0x00,0x00,0xFF,
+ 0x3F,0x00,0x00,0x00,0x80,0xFF,0xFF,0x00,0x00,0x00,0xE0,0xFF,0xFF,0x03,0x00,
+ 0x00,0xF0,0xBF,0xFC,0x07,0x00,0x00,0xF8,0x0F,0xE0,0x0F,0x00,0x00,0xF8,0x03,
+ 0x00,0x0F,0x00,0x00,0xFC,0x01,0x00,0x0E,0x00,0x00,0xFE,0x00,0x00,0x04,0x00,
+ 0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x7F,0x00,0x00,0x08,0x00,0x00,0x7F,0x00,
+ 0x00,0x10,0x00,0x80,0x7F,0x00,0x00,0x10,0x00,0x80,0x3F,0x00,0x00,0x20,0x00,
+ 0x80,0x3F,0x00,0x00,0x00,0x00,0x80,0x3F,0x00,0x00,0x40,0x00,0xC0,0x3F,0x00,
+ 0x00,0x40,0x00,0xC0,0x3F,0x00,0x00,0x40,0x00,0xC0,0x3F,0x00,0x3D,0xC0,0x00,
+ 0x00,0x3F,0x80,0x60,0x60,0x00,0x00,0x7E,0x00,0x2C,0x70,0x00,0x00,0x3C,0x00,
+ 0x07,0x18,0x00,0x00,0x38,0x00,0x04,0x38,0x00,0x00,0x18,0x00,0x20,0x38,0x00,
+ 0x00,0x20,0x00,0x00,0x30,0x00,0x00,0x20,0x00,0x00,0x20,0x00,0x00,0x00,0x00,
+ 0x00,0x40,0x00,0x00,0x50,0x00,0x00,0x00,0x00,0x00,0x21,0x00,0x00,0x40,0x00,
+ 0x80,0x53,0x00,0x00,0x20,0x00,0x80,0x6F,0x00,0x00,0x20,0x00,0xC0,0x37,0x00,
+ 0x00,0x1A,0x00,0xC0,0xFF,0x00,0x80,0x0D,0x00,0xC0,0x6F,0x00,0x03,0x1C,0x00,
+ 0xE0,0xEF,0x81,0x02,0x06,0x00,0xC0,0x7F,0x01,0x80,0x07,0x00,0xE0,0x5F,0x83,
+ 0x00,0x06,0x00,0xC0,0xDF,0x06,0x00,0x06,0x00,0xE0,0x1F,0x0D,0x00,0x07,0x00,
+ 0xC0,0x3F,0x5D,0xC1,0x03,0x00,0xE0,0x3B,0xDA,0x00,0x06,0x00,0xC0,0x27,0xF4,
+ 0x01,0x02,0x00,0xC0,0x11,0xF8,0x0F,0x03,0x00,0x80,0x01,0xF0,0xFF,0x15,0x00,
+ 0x80,0x11,0xC0,0xFF,0x13,0x00,0x80,0x50,0xD0,0xFF,0x0D,0x00,0x00,0x41,0x80,
+ 0x3E,0x0B,0x00};
--- libcompface-1.5.2.orig/t.pbm
+++ libcompface-1.5.2/t.pbm
@@ -0,0 +1,3 @@
+P4
+48 48
+÷jªª®ÿÚÕkU[UýZÕZªÛëµºµu·úªUNªíïªª©k¿úêªª­UõUV©ZïµUt‚UµÝ%U(š­õJ”‚=¶ú‰TH–ÛÕUTMþ’ª¨.ÕÚ©P—5÷%ªªVêýª©--n«T*KÕûÚ²„­vßvÕ(—UöÕT¥-­{j«ZVµÞÖÞ®­Ví½U[®­ûÖª•Rª®ª¥*­Ûõµ©JRªßmR•méRªUV¶¾®Ú’UU×qU)U­º®ªªªµïiWÕkWÝVÔU]m¶ÕWUkVí­Zª¶í¶µ«jÛVÕjµU¶»¿]Ú­UWuj«ÛïÝÞÛ|ª²«}µ«Wm_×m}½«êý¶Ö×}W¶Ýº½«íÝ¶×vî»÷oz½»mÝÝ­kê×hej
--- libcompface-1.5.2.orig/compface.c
+++ libcompface-1.5.2/compface.c
@@ -19,7 +19,7 @@
 #include "config.h"
 #endif
 
-#include "compface_private.h"
+#include "compface.h"
 
 int
 compface(fbuf)
--- libcompface-1.5.2.orig/t2.pbm
+++ libcompface-1.5.2/t2.pbm
@@ -0,0 +1,3 @@
+P4
+48 48
+Þþ®ÔïêîH¬Ê®¾õeUW_õº½j­ª«õªµ¥]½zÕÚÚîÕõZ§%[uUY]oÕõuU[Zªú¦©U¯zÚ¢äªÛºJ¡E›Zõ"”ÆÕù¡&ºº¢¤/çô•QWJµ¹P¤šÎúEUV¥{õYXKGmR¥M*½õ´ÒVï¶ê±Nš¦ú²ª[K]åmU¦ª×¶··[V«{Ú­§[]öµZ”¥WUZUK]ºúÙU$¥_»d š›it¥Z¦¦××U´šª®¸ê©J«U×UUUZßynª½n«¶¢º««fÚ¾ª­f«{U¥VÛvÚÝUm¶ªµjÚ¦ÝßÛ¥»Z®ªåm]¿{·½³åTÝ[êÝ^«o®»këÝU{öÖ¾»î¦ÛµÛÝ[{¶Þ¶ç}
\ No newline at end of file
--- libcompface-1.5.2.orig/semantic.cache
+++ libcompface-1.5.2/semantic.cache
@@ -0,0 +1,15 @@
+;; Object libcompface-1.5.2/
+;; SEMANTICDB Tags save file
+(semanticdb-project-database-file "libcompface-1.5.2/"
+  :tables (list 
+   (semanticdb-table "Makefile"
+    :major-mode 'makefile-mode
+    :tags '(("prefix" variable (:default-value ("/usr/local")) nil [1 30]) ("exec_prefix" variable (:default-value ("${prefix}")) nil [30 58]) ("srcdir" variable (:default-value (".")) nil [58 78]) ("BINDIR" variable (:default-value ("${exec_prefix}/bin")) nil [78 107]) ("LIBDIR" variable (:default-value ("${exec_prefix}/lib")) nil [107 136]) ("MANDIR" variable (:default-value ("${prefix}/man")) nil [136 160]) ("INCLUDEDIR" variable (:default-value ("${prefix}/include")) nil [160 191]) ("RM" variable (:default-value ("rm" "-f")) nil [194 218]) ("LN_S" variable (:default-value ("ln" "-s")) nil [218 242]) ("RANLIB" variable (:default-value ("ranlib")) nil [242 267]) ("INSTALL" variable (:default-value ("/usr/bin/install" "-c")) nil [267 305]) ("INSTALL_PROGRAM" variable (:default-value ("${INSTALL}")) nil [305 334]) ("INSTALL_DATA" variable (:default-value ("${INSTALL}" "-m" "644")) nil [334 370]) ("SHELL" variable (:default-value ("/bin/sh")) nil [370 396]) ("NAME" variable (:default-value ("compface")) nil [397 414]) ("UNNAME" variable (:default-value ("uncompface")) nil [414 435]) ("EXEEXT" variable nil nil [435 446]) ("NAMEEXE" variable (:default-value ("$(NAME)$(EXEEXT)")) nil [446 474]) ("UNNAMEEXE" variable (:default-value ("$(UNNAME)$(EXEEXT)")) nil [474 505]) ("EXECUTABLE" variable (:default-value ("$(BINDIR)/$(NAMEEXE)")) nil [505 539]) ("UNEXECUTABLE" variable (:default-value ("$(BINDIR)/$(UNNAMEEXE)")) nil [539 577]) ("LIBNAME" variable (:default-value ("lib$(NAME).a")) nil [577 601]) ("SOLIBNAME" variable (:default-value ("lib$(NAME).so")) nil [601 627]) ("LIBRARY" variable (:default-value ("$(LIBDIR)/$(LIBNAME)")) nil [627 659]) ("MAN1DIR" variable (:default-value ("$(MANDIR)/man1")) nil [659 685]) ("MAN3DIR" variable (:default-value ("$(MANDIR)/man3")) nil [685 711]) ("OBJECTS" variable (:default-value ("arith.o" "file.o" "compress.o" "gen.o" "uncompface.o")) nil [711 767]) ("SOURCES" variable (:default-value ("compface.c" "uncompface.c" "arith.c" "file.c" "compress.c" "gen.c" "cmain.c" "uncmain.c" "version.c")) nil [767 868]) ("INSTALLHEADERS" variable (:default-value ("compface.h")) nil [868 897]) ("HDRS" variable (:default-value ("$(INSTALLHEADERS)" "data.h" "compface_private.h")) nil [897 949]) ("OTHERS" variable (:default-value ("README" "$(NAME).1" "$(NAME).3" "Makefile.in" "Makefile.Ashton" "configure" "configure.in" "install-sh" "mkinstalldirs" "ChangeLog")) nil [949 1078]) ("DISTFILES" variable (:default-value ("$(OTHERS)" "$(HDRS)" "$(SOURCES)")) nil [1079 1127]) ("CC" variable (:default-value ("gcc")) nil [1128 1138]) ("CFLAGS" variable (:default-value ("-g" "-O2")) nil [1138 1155]) ("DEFS" variable (:default-value ("-DPACKAGE_NAME=\\\"\\\"" "-DPACKAGE_TARNAME=\\\"\\\"" "-DPACKAGE_VERSION=\\\"\\\"" "-DPACKAGE_STRING=\\\"\\\"" "-DPACKAGE_BUGREPORT=\\\"\\\"" "-DSTDC_HEADERS=1" "-DHAVE_SYS_TYPES_H=1" "-DHAVE_SYS_STAT_H=1" "-DHAVE_STDLIB_H=1" "-DHAVE_STRING_H=1" "-DHAVE_MEMORY_H=1" "-DHAVE_STRINGS_H=1" "-DHAVE_INTTYPES_H=1" "-DHAVE_STDINT_H=1" "-DHAVE_UNISTD_H=1" "-DHAVE_ERRNO_H=1" "-DHAVE_FCNTL_H=1" "-DHAVE_STRINGS_H=1" "-DHAVE_STRERROR=1" "-DHAVE_CONFIG_H")) nil [1155 1551]) ("LDFLAGS" variable nil nil [1551 1563]) ("LIBS" variable nil nil [1563 1572]) ("all" function (:arguments ("$(NAMEEXE)" "$(UNNAMEEXE)")) nil [1573 1604]) ("$(NAMEEXE)" function (:arguments ("cmain.o" "compface.o" "$(LIBNAME)")) nil [1604 1703]) ("$(UNNAMEEXE)" function (:arguments ("uncmain.o" "$(LIBNAME)")) nil [1703 1786]) ("$(LIBNAME)" function (:arguments ("$(OBJECTS)")) nil [1786 1865]) ("lint" function nil nil [1865 1898]) ("clean" function nil nil [1898 1964]) ("distclean" function (:arguments ("clean")) nil [1964 2051]) ("dist" function (:arguments ("$(DISTFILES)")) nil [2051 2320]) ("install" function (:arguments ("$(NAMEEXE)" "$(UNNAMEEXE)" "$(LIBNAME)")) nil [2320 3078]) ("shar" function nil nil [3078 3164]) ("static" function (:arguments ("$(OBJECTS)")) nil [3164 3236]) ("shared" function (:arguments ("$(OBJECTS)")) nil [3236 3344]) (".c.o" function nil nil [3344 3394]) ("arith.o" function (:arguments ("arith.c" "compface.h" "data.h")) nil [3394 3436]) ("cmain.o" function (:arguments ("cmain.c" "compface.h" "data.h")) nil [3429 3474]) ("compface.o" function (:arguments ("compface.c" "compface.h" "data.h")) nil [3464 3515]) ("compress.o" function (:arguments ("compress.c" "compface.h" "data.h")) nil [3505 3552]) ("file.o" function (:arguments ("file.c" "compface.h" "data.h")) nil [3546 3585]) ("gen.o" function (:arguments ("gen.c" "compface.h" "data.h")) nil [3580 3621]) ("uncmain.o" function (:arguments ("uncmain.c" "compface.h" "data.h")) nil [3612 3663]) ("uncompface.o" function (:arguments ("uncompface.c" "compface.h" "data.h")) nil [3651 3697]) (".PHONY" function (:arguments ("clean" "mostlyclean" "distclean" "realclean" "dist" "all")) nil [3697 3753]))
+    :file "Makefile"
+    :pointmax 3822
+    )
+   )
+  :file "semantic.cache"
+  :semantic-tag-version "2.0pre3"
+  :semanticdb-version "2.0pre3"
+  )
--- libcompface-1.5.2.orig/Makefile
+++ libcompface-1.5.2/Makefile
@@ -0,0 +1,120 @@
+prefix          = /usr/local
+exec_prefix     = ${prefix}
+srcdir          = .
+BINDIR		= ${exec_prefix}/bin
+LIBDIR		= ${exec_prefix}/lib
+MANDIR		= ${prefix}/man
+INCLUDEDIR	= ${prefix}/include
+
+
+
+RM              = rm -f
+LN_S            = ln -s
+RANLIB          = ranlib
+INSTALL         = /usr/bin/install -c
+INSTALL_PROGRAM = ${INSTALL}
+INSTALL_DATA    = ${INSTALL} -m 644
+SHELL           = /bin/sh
+
+NAME		= compface
+UNNAME		= uncompface
+EXEEXT		= 
+NAMEEXE		= $(NAME)$(EXEEXT)
+UNNAMEEXE	= $(UNNAME)$(EXEEXT)
+EXECUTABLE	= $(BINDIR)/$(NAMEEXE)
+UNEXECUTABLE	= $(BINDIR)/$(UNNAMEEXE)
+LIBNAME		= lib$(NAME).a
+SOLIBNAME	= lib$(NAME).so
+LIBRARY		= $(LIBDIR)/$(LIBNAME)
+MAN1DIR		= $(MANDIR)/man1
+MAN3DIR		= $(MANDIR)/man3
+OBJECTS		= arith.o file.o compress.o gen.o uncompface.o compface.o
+SOURCES		= compface.c uncompface.c arith.c file.c compress.c gen.c \
+		  cmain.c uncmain.c version.c
+INSTALLHEADERS  = compface.h
+HDRS		= $(INSTALLHEADERS) data.h compface_private.h
+OTHERS		= README $(NAME).1 $(NAME).3 Makefile.in Makefile.Ashton \
+		  configure configure.in install-sh mkinstalldirs ChangeLog
+
+DISTFILES       =  $(OTHERS) $(HDRS) $(SOURCES)
+
+CC		= gcc
+CFLAGS		= -g -O2
+#CFLAGS		= -g 
+DEFS		= -DPACKAGE_NAME=\"\" -DPACKAGE_TARNAME=\"\" -DPACKAGE_VERSION=\"\" -DPACKAGE_STRING=\"\" -DPACKAGE_BUGREPORT=\"\" -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -DHAVE_ERRNO_H=1 -DHAVE_FCNTL_H=1 -DHAVE_STRINGS_H=1 -DHAVE_STRERROR=1  -DHAVE_CONFIG_H
+LDFLAGS		= 
+LIBS		= 
+
+all:		$(NAMEEXE) $(UNNAMEEXE)
+
+$(NAMEEXE) :	cmain.o $(LIBNAME)
+		$(CC) $(LDFLAGS) -o $@ cmain.o -lcompface
+
+$(UNNAMEEXE) :	uncmain.o $(LIBNAME)
+		$(CC) $(LDFLAGS) -o $@ uncmain.o -lcompface
+
+$(LIBNAME) :	$(OBJECTS)
+		ar rc $(LIBNAME) $(OBJECTS)
+		-$(RANLIB) $(LIBNAME)
+
+lint :
+		lint -abchx $(SOURCES)
+
+clean :
+		-rm -f *.o *.a *.sh core a.out $(NAMEEXE) $(UNNAMEEXE)
+
+distclean: clean
+		-rm -rf *~
+		-rm -f config.log config.status config.cache Makefile
+
+dist: $(DISTFILES)
+		echo compface-`sed -e '/version/!d' -e 's/[^0-9.]*\([0-9.]*\).*/\1/' -e q version.c` > .fname
+		$(RM) -rf `cat .fname`
+		mkdir `cat .fname`
+		ln $(DISTFILES) `cat .fname`
+		tar chzf `cat .fname`.tar.gz `cat .fname`
+		$(RM) -rf `cat .fname` .fname
+
+install: 	$(NAMEEXE) $(UNNAMEEXE) $(LIBNAME)
+		$(INSTALL_PROGRAM) -d $(BINDIR) $(LIBDIR) $(MAN1DIR) $(MAN3DIR) $(INCLUDEDIR)
+		$(INSTALL_PROGRAM) $(srcdir)/$(NAMEEXE) $(EXECUTABLE) 
+		-chmod 0755 $(EXECUTABLE)
+		-strip $(EXECUTABLE)
+		$(INSTALL_PROGRAM) $(srcdir)/$(UNNAMEEXE) $(UNEXECUTABLE)
+		-chmod 0755 $(UNEXECUTABLE)
+		-strip $(UNEXECUTABLE)
+		$(INSTALL_DATA) $(srcdir)/$(NAME).1 $(MAN1DIR)/$(NAME).1
+		cd $(MAN1DIR) && $(RM) ./$(UNNAME).1 && $(LN_S) $(NAME).1 $(UNNAME).1
+		$(INSTALL_DATA) $(srcdir)/$(NAME).3 $(MAN3DIR)/$(NAME).3
+		cd $(MAN3DIR) && $(RM) ./$(UNNAME).3 && $(LN_S) $(NAME).3 $(UNNAME).3
+		for hdr in $(INSTALLHEADERS); do $(INSTALL_DATA) $(srcdir)/$${hdr} $(INCLUDEDIR)/$${hdr}; done
+		$(INSTALL_DATA) $(srcdir)/$(LIBNAME) $(LIBRARY)
+
+shar :
+		shar.script $(OTHERS) $(HDRS) $(SOURCES) > $(NAME).sh
+		compress $(NAME).sh
+
+static:		$(OBJECTS)
+		ar rc $(LIBNAME) $(OBJECTS)
+		-ranlib $(LIBNAME)
+
+shared:		$(OBJECTS)
+		$(CC) -shared -Wl,-soname,$(SOLIBNAME).1 $(LDFLAGS) -o $(SOLIBNAME).1.0.0 $(OBJECTS)
+
+.c.o:
+	$(CC) -c $(CPPFLAGS) $(DEFS) $(CFLAGS) $<
+
+arith.o:	arith.c compface.h data.h
+cmain.o:	cmain.c compface.h data.h
+compface.o:	compface.c compface.h data.h
+compress.o:	compress.c compface.h data.h
+file.o:		file.c compface.h data.h
+gen.o:		gen.c compface.h data.h
+uncmain.o:	uncmain.c compface.h data.h
+uncompface.o:	uncompface.c compface.h data.h
+
+.PHONY: clean mostlyclean distclean realclean dist all shared static
+
+# Prevent GNU make v3 from overflowing arg limit on SysV.
+.NOEXPORT:
+
--- libcompface-1.5.2.orig/t2.xbm
+++ libcompface-1.5.2/t2.xbm
@@ -0,0 +1,23 @@
+#define noname_width 48
+#define noname_height 48
+static char noname_bits[] = {
+ 0x7B,0x7F,0x75,0x2B,0xB1,0xF7,0x57,0x77,0x12,0x35,0x53,0x75,0x7D,0xAF,0xA6,
+ 0xAA,0xEA,0xFA,0xAF,0x5D,0xBD,0x56,0xB5,0x55,0xD5,0xAF,0x55,0xAD,0xA5,0xBA,
+ 0xBD,0x5E,0xAB,0x5B,0x5B,0x77,0xAB,0xAF,0x5A,0xE5,0xA4,0xDA,0xFE,0xAE,0xAA,
+ 0x9A,0xBA,0xF6,0xAB,0xAF,0xAE,0xAA,0xDA,0x5A,0x55,0x5F,0x65,0x95,0xAA,0xF5,
+ 0x5E,0x5B,0x45,0x27,0x58,0x55,0xDB,0x5D,0x52,0x85,0xA2,0xD9,0x5A,0xAF,0x44,
+ 0x29,0xD8,0x63,0xAB,0x9F,0x48,0x85,0x64,0xB9,0x5D,0x5D,0x45,0x25,0xD0,0xF4,
+ 0xE7,0x2F,0xA9,0x8A,0xEA,0x52,0xAD,0x9D,0x0A,0x25,0x70,0x59,0x73,0x5F,0xA2,
+ 0xAA,0x6A,0xA5,0xDE,0xAF,0x9A,0x1A,0xD0,0xD2,0xE2,0xB6,0x4A,0xA5,0xB2,0x54,
+ 0xBD,0xAF,0x2D,0x4B,0xD8,0x6A,0xF7,0x6D,0x57,0x8D,0x72,0x59,0x65,0x5F,0x4D,
+ 0x55,0xDA,0xD2,0xBA,0xA7,0xB6,0xAA,0x65,0x55,0xEB,0x6D,0xED,0xED,0xDA,0x6A,
+ 0xD5,0xDE,0x5B,0xB5,0xE5,0xDA,0xBA,0x6F,0xAD,0x5A,0x29,0xA5,0xEA,0xAA,0x5A,
+ 0xAA,0xD2,0xBA,0x5D,0x5F,0x9B,0xAA,0x24,0xA5,0xFA,0xDD,0x26,0x05,0x59,0xD9,
+ 0x96,0x2E,0xA5,0x5A,0x65,0x65,0xEB,0xEB,0xAA,0x2D,0x59,0x55,0x75,0x1D,0x57,
+ 0x95,0x52,0xD5,0xAA,0xEB,0xAA,0xAA,0xAA,0x5A,0xFB,0x9E,0x76,0x55,0xBD,0x76,
+ 0xD5,0x6D,0x45,0x5D,0xD5,0xD5,0x66,0x5B,0x7D,0x55,0xB5,0x66,0xD5,0xDE,0xAA,
+ 0xA5,0x6A,0xDB,0x6E,0x5B,0xBB,0xAA,0xB6,0x6D,0x55,0xAD,0x56,0x5B,0x65,0xBB,
+ 0xFB,0xDB,0xA5,0xDD,0x5A,0x75,0x55,0xA7,0xB6,0xBA,0xFD,0xDE,0xED,0xBD,0xCD,
+ 0xA7,0x2A,0xBB,0xDA,0x57,0xBB,0x7A,0xD5,0xF6,0x75,0xDD,0xD6,0xD7,0xBB,0xAA,
+ 0xDE,0x6F,0x6B,0x7D,0xDD,0x77,0x65,0xDB,0xAD,0xDB,0xBB,0xDA,0xDE,0x6D,0x7B,
+ 0x6D,0xE7,0xBE};
--- libcompface-1.5.2.orig/file.c
+++ libcompface-1.5.2/file.c
@@ -77,8 +77,42 @@
 {
 	register int c, i;
 	register char *s, *t;
+	static char table_inv[] = { 0,8,4,12,2,10,6,14,1,9, 5,13, 3,11, 7,15 };
+	static char table_nop[] = { 0,1,2, 3,4, 5,6, 7,8,9,10,11,12,13,14,15 };
+	char *table = table_nop;	/* optionally invert bits in nibble */
+	register inc = 0;		/* optionally swap nimmles */
+	int bits;
+	int len;
 
 	t = s = fbuf;
+
+	/* Does this look like an X bitmap ? */
+	if (sscanf(s, "#define %*s %d", &bits) == 1) {
+		if (bits == 48) {
+			char type1[256];
+			char type2[256];
+			while (*s && *s++ != '\n');
+			if (sscanf(s, "#define %*s %d", &bits) == 1) if (bits == 48) {
+				while (*s && *s++ != '\n');
+				for (len=0; s[len] && s[len]!='\n'; len++);
+				if (len<255) {
+				  if (sscanf(s, "static %s %s", type1,type2)==2 &&
+					(!strcmp(type1, "char") || 
+				    	 !strcmp(type2, "char"))) {
+						while (*s && *s++ != '\n');
+						inc = 1;
+						table = table_inv;
+					}
+				  else fprintf(stderr, "warning: xbitmap line 3 not static [unsigned] short ...\n");
+				} else fprintf(stderr, "warning: xbitmap line 3 too long\n");
+			}
+			else fprintf(stderr, "warning: xbitmaps must be 48x48\n");
+		}
+		else fprintf(stderr, "warning: xbitmaps must be 48x48\n");
+	}
+	/* Ensure s is reset if it was not an X bitmap ... */
+	if (! inc) s = fbuf;
+
 	for(i = strlen(s); i > 0; i--)
 	{
 		c = (int)*(s++);
@@ -89,7 +123,7 @@
 				status = ERR_EXCESS;
 				break;
 			}
-			*(t++) = c - '0';
+			(t++)[inc] = table[c - '0']; inc = - inc;
 		}
 		else if ((c >= 'A') && (c <= 'F'))
 		{
@@ -98,7 +132,7 @@
 				status = ERR_EXCESS;
 				break;
 			}
-			*(t++) = c - 'A' + 10;
+			(t++)[inc] = table[c - 'A' + 10]; inc = - inc;
 		}
 		else if ((c >= 'a') && (c <= 'f'))
 		{
@@ -107,10 +141,10 @@
 				status = ERR_EXCESS;
 				break;
 			}
-			*(t++) = c - 'a' + 10;
+			(t++)[inc] = table[c - 'a' + 10]; inc = - inc;
 		}
-		else if (((c == 'x') || (c == 'X')) && (t > fbuf) && (*(t-1) == 0))
-			t--;
+		else if (((c == 'x') || (c == 'X')) && (t > fbuf) &&
+			((t-1)[-inc] == table[0])) { t--; inc = -inc; }
 	}
 	if (t < fbuf + DIGITS)
 		longjmp(comp_env, ERR_INSUFF);
--- libcompface-1.5.2.orig/compface.3
+++ libcompface-1.5.2/compface.3
@@ -39,6 +39,10 @@
 The first line contains 72 characters and following lines contain
 79 characters except that the last line may be short.
 .LP
+This version of compface has been patched to also be able to handle
+normal XBM images.  uncompface will produce XBM output only if the -X 
+switch is applied.
+.LP
 The amount of compression obtained varies between face image files but
 the output of
 .I compface
--- libcompface-1.5.2.orig/compface.1
+++ libcompface-1.5.2/compface.1
@@ -51,8 +51,9 @@
 The first line contains 72 characters and following lines contain
 79 characters except that the last line may be short.
 .LP
-If the -X option is given to uncompface, it generates XBM format
-directly.
+This version of compface has been patched to also be able to handle
+normal XBM images.  uncompface will produce XBM output only if the -X 
+switch is applied.
 .LP
 The amount of compression obtained varies between face image files but
 the output of
--- libcompface-1.5.2.orig/compface.h
+++ libcompface-1.5.2/compface.h
@@ -143,7 +143,6 @@
 int AllWhite P((char *, int, int)) ;
 int BigPop P((Prob *)) ;
 int compface P((char *)) ;
-int main P((int, char *[])) ;
 int ReadBuf P(()) ;
 int Same P((char *, int, int)) ;
 int uncompface P((char *)) ;
--- libcompface-1.5.2.orig/debian/libcompface1.shlibs
+++ libcompface-1.5.2/debian/libcompface1.shlibs
@@ -0,0 +1 @@
+libcompface	1	libcompface1
--- libcompface-1.5.2.orig/debian/control
+++ libcompface-1.5.2/debian/control
@@ -0,0 +1,38 @@
+Source: libcompface
+Section: mail
+Priority: optional
+Maintainer: Hakan Ardo <hakan@debian.org>
+Standards-Version: 3.2.1.0
+Build-Depends: debhelper (>=5)
+
+Package: libcompfaceg1-dev
+Section: devel
+Priority: optional
+Architecture: any
+Depends: libcompfaceg1, libc6-dev
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 devel
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompfaceg1
+Section: libs
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 runtime
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: compface
+Section: mail
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Description: Compress/decompress images for mailheaders, user tools
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
--- libcompface-1.5.2.orig/debian/compat
+++ libcompface-1.5.2/debian/compat
@@ -0,0 +1 @@
+5
--- libcompface-1.5.2.orig/debian/libcompfaceg1.files
+++ libcompface-1.5.2/debian/libcompfaceg1.files
@@ -0,0 +1,3 @@
+usr/lib/libcompface.so.1.0.0
+usr/lib/libcompface.so.1
+usr/share/doc/libcompfaceg1
--- libcompface-1.5.2.orig/debian/control.common
+++ libcompface-1.5.2/debian/control.common
@@ -0,0 +1,38 @@
+Source: libcompface
+Section: mail
+Priority: optional
+Maintainer: Hakan Ardo <hakan@debian.org>
+Standards-Version: 3.2.1.0
+Build-Depends: debhelper (>=5)
+
+Package: libcompfaceg1-dev
+Section: devel
+Priority: optional
+Architecture: any
+Depends: libcompfaceg1, libc6-dev
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 devel
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompfaceg1
+Section: libs
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 runtime
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: compface
+Section: mail
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Description: Compress/decompress images for mailheaders, user tools
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
--- libcompface-1.5.2.orig/debian/compface.files
+++ libcompface-1.5.2/debian/compface.files
@@ -0,0 +1,4 @@
+usr/bin/
+usr/share/man/man1/
+usr/share/doc/compface/
+
--- libcompface-1.5.2.orig/debian/shlibs.local
+++ libcompface-1.5.2/debian/shlibs.local
@@ -0,0 +1 @@
+libcompface	1	libcompfaceg1
--- libcompface-1.5.2.orig/debian/libcompface1.files
+++ libcompface-1.5.2/debian/libcompface1.files
@@ -0,0 +1,4 @@
+usr/lib/libc5-compat/libcompface.so.1.0.0
+usr/lib/libc5-compat/libcompface.so.1
+usr/doc/libcompface1
+
--- libcompface-1.5.2.orig/debian/semantic.cache
+++ libcompface-1.5.2/debian/semantic.cache
@@ -0,0 +1,15 @@
+;; Object debian/
+;; SEMANTICDB Tags save file
+(semanticdb-project-database-file "debian/"
+  :tables (list 
+   (semanticdb-table "rules"
+    :major-mode 'makefile-mode
+    :tags '(("SHELL" variable (:default-value ("/bin/bash")) nil [145 163]) ("package" variable (:default-value ("libcompface")) nil [164 184]) ("version" variable (:default-value ("1.0.0")) nil [185 239]) ("version_major" variable (:default-value ("1")) nil [239 302]) ("old_libpath" variable (:default-value ("$(LD_LIBRARY_PATH)")) nil [302 336]) ("LD_LIBRARY_PATH" variable (:default-value ("shared:$(old_libpath)")) nil [336 374]) ("build" function (:arguments ("build-libc6")) nil [376 498]) ("build-libc6" function nil nil [498 617]) ("build-libc5" function nil nil [1357 1469]) ("clean" function nil nil [2316 2595]) ("binary-indep" function (:arguments ("checkroot" "build")) nil [2597 2701]) ("binary-arch" function (:arguments ("checkroot" "build" "binary-common" "binary-libc6")) nil [2777 2928]) ("binary-common" function nil nil [4680 4754]) ("binary-libc6" function nil nil [5414 5473]) ("binary-libc5" function nil nil [6084 6143]) ("binary" function (:arguments ("binary-indep" "binary-arch")) nil [7079 7114]) ("checkroot" function nil nil [7114 7163]))
+    :file "rules"
+    :pointmax 7219
+    )
+   )
+  :file "semantic.cache"
+  :semantic-tag-version "2.0pre3"
+  :semanticdb-version "2.0pre3"
+  )
--- libcompface-1.5.2.orig/debian/p
+++ libcompface-1.5.2/debian/p
@@ -0,0 +1,57 @@
+
+--- controls/libcompface_1989.11.11-13  Sun Jan 25 21:15:01 1998
++++ patched/libcompface_1989.11.11-13   Sun Feb  1 20:06:15 1998
+@@ -10,8 +10,8 @@
+ Architecture: any
+ Depends: libcompfaceg1, libc6-dev
+ Conflicts: compface (<= 89.11.11-10)
+-Description: Compres/decompres images for mailheaders, libc6 devel
+-  Converts 48x48 .xbm format (X bitmap) files inte a compressed format 
++Description: Compress/decompress images for mailheaders, libc6 devel
++  Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+   that can be placed in your X-Face: mail header. Some mailreaders, 
+   like exmh will then display this image when the user is reading your mail.
+ 
+@@ -21,8 +21,8 @@
+ Architecture: any
+ Depends: ${shlibs:Depends}
+ Conflicts: compface (<= 89.11.11-10)
+-Description: Compres/decompres images for mailheaders, libc6 runtime
+-  Converts 48x48 .xbm format (X bitmap) files inte a compressed format 
++Description: Compress/decompress images for mailheaders, libc6 runtime
++  Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+   that can be placed in your X-Face: mail header. Some mailreaders, 
+   like exmh will then display this image when the user is reading your mail.
+ 
+@@ -31,8 +31,8 @@
+ Priority: optional
+ Architecture: any
+ Depends: libcompface1, libc5-altdev
+-Description: Compres/decompres images for mailheaders, libc5 devel
+-  Converts 48x48 .xbm format (X bitmap) files inte a compressed format 
++Description: Compress/decompress images for mailheaders, libc5 devel
++  Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+   that can be placed in your X-Face: mail header. Some mailreaders, 
+   like exmh will then display this image when the user is reading your mail.
+ 
+@@ -42,8 +42,8 @@
+ Architecture: any
+ Depends: libc5 (>= 5.4.0.0)
+ Conflicts: libc5-dev, compface (<= 89.11.11-10)
+-Description: Compres/decompres images for mailheaders, libc5 runtime
+-  Converts 48x48 .xbm format (X bitmap) files inte a compressed format 
++Description: Compress/decompress images for mailheaders, libc5 runtime
++  Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+   that can be placed in your X-Face: mail header. Some mailreaders, 
+   like exmh will then display this image when the user is reading your mail.
+ 
+@@ -52,7 +52,7 @@
+ Priority: optional
+ Architecture: any
+ Depends: ${shlibs:Depends}
+-Description: Compres/decompres images for mailheaders, user tools
+-  Converts 48x48 .xbm format (X bitmap) files inte a compressed format 
++Description: Compress/decompress images for mailheaders, user tools
++  Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+   that can be placed in your X-Face: mail header. Some mailreaders, 
+   like exmh will then display this image when the user is reading your mail.
--- libcompface-1.5.2.orig/debian/libcompface1.postinst
+++ libcompface-1.5.2/debian/libcompface1.postinst
@@ -0,0 +1,8 @@
+#!/bin/sh
+
+if [ "$1" = "configure" ]; then
+		ldconfig
+end
+
+
+#DEBHELPER#
--- libcompface-1.5.2.orig/debian/libcompfaceg1.postinst
+++ libcompface-1.5.2/debian/libcompfaceg1.postinst
@@ -0,0 +1,13 @@
+#!/bin/sh -e
+
+PACKAGE="libcompfaceg1"
+
+# FSSTND compatible symlinks
+if [ "$1" = "configure" ]; then
+		# Fix libs
+		ldconfig
+fi
+
+#DEBHELPER#
+
+				
--- libcompface-1.5.2.orig/debian/libcompface1-altdev.files
+++ libcompface-1.5.2/debian/libcompface1-altdev.files
@@ -0,0 +1,4 @@
+usr/lib/libc5-compat/libcompface.so
+usr/*-linuxlibc1/
+usr/doc/libcompface1-altdev
+
--- libcompface-1.5.2.orig/debian/changelog
+++ libcompface-1.5.2/debian/changelog
@@ -0,0 +1,207 @@
+libcompface (1:1.5.2-5) unstable; urgency=high
+
+  * Fixed bufferoverflow when reading xbm files (closes: #534973)
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 29 Jun 2009 18:49:13 +0200
+
+libcompface (1:1.5.2-4) unstable; urgency=low
+
+  * Converted from debmake to debhelper (closes: #372969)
+  * Changed $(PWD) to $(CURDIR) to build under sudo (closes: #399390)
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 20 Nov 2006 21:06:20 +0100
+
+libcompface (1:1.5.2-3) unstable; urgency=low
+
+  * Applied patch from Matej Vela <vela@debian.org> fixing XBM input
+    (closes: #349015)
+  * Applied patch from Matej Vela <vela@debian.org> fixing include file
+    problem (closes: #12302)
+
+ -- Hakan Ardo <hakan@debian.org>  Sat,  4 Feb 2006 16:07:17 +0100
+
+libcompface (1:1.5.2-2) unstable; urgency=low
+
+  * compface now works again (closes: #348326)
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 16 Jan 2006 21:54:47 +0100
+
+libcompface (1:1.5.2-1) unstable; urgency=low
+
+  * Upgraded to v1.5.2 (closes: #261932)
+  * Fixed make up-to-dateness confusion (closes: #261932)
+  * Removed /usr/doc symlinks (closes: #322788)
+  * Added example on how to generate header from jpeg to README.Debian
+    (closes: #199100)
+  * Section information included in the control file (closes: #288824)
+  * libtool or *-config tools are not used (closes: #340392)
+
+ -- Hakan Ardo <hakan@debian.org>  Tue, 27 Dec 2005 16:53:12 +0100
+
+libcompface (1989.11.11-24) unstable; urgency=low
+
+  * Fixed local link path (closes: #147607)
+
+ -- Hakan Ardo <hakan@debian.org>  Fri,  5 Jul 2002 23:41:21 +0200
+
+libcompface (1989.11.11-23) unstable; urgency=low
+
+  * Spelling errors fixed (Bug #124514, #124920, #124921)
+
+ -- Hakan Ardo <hakan@debian.org>  Sat, 12 Jan 2002 15:00:58 +0100
+
+libcompface (1989.11.11-22) unstable; urgency=low
+
+  * Applied Marcus Brinkmans patch removing arch specific libc5 stuff
+    and fixing the errno handling to be more portable ( Bug #106381,
+    #104138 )
+
+ -- Hakan Ardo <hakan@debian.org>  Thu, 26 Jul 2001 09:49:53 +0200
+
+libcompface (1989.11.11-21) unstable; urgency=low
+
+  * Fixed bad manpagelink (Bug #102741)
+
+ -- Hakan Ardo <hakan@debian.org>  Sat,  7 Jul 2001 21:48:48 +0200
+
+libcompface (1989.11.11-20) unstable; urgency=low
+
+  * Readded Build-Depends as they dissapeard (Bug #92477 #98374)
+  * Rules no longer overwrites LD_LIBRARY_PATH to work with fakeroot
+    (Bug #98182)
+  * Added uncompface.3 link (Bug #99558)
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 24 Jun 2001 16:01:18 +0200
+
+libcompface (1989.11.11-19) unstable; urgency=low
+
+  * compface.o now compiled in (Bug #93269)
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 20 May 2001 13:08:18 +0200
+
+libcompface (1989.11.11-18) unstable; urgency=low
+
+  * Added Build-Depends (Bug#92477)
+  * Recompied with stable binutils to fix corrupted libcompface.a
+    archive (Bug#92904)
+  * Now uses dh_strip instead of strip
+
+ -- Hakan Ardo <hakan@debian.org>  Sat,  7 Apr 2001 15:40:49 +0200
+
+libcompface (1989.11.11-17.5) unstable; urgency=low
+
+  * Updated the copyright file with another clearfication from the
+    author
+  * ldconfig now only called if configure param given
+  * Walked through the standars updates
+
+ -- Hakan Ardo <hakan@debian.org>  Fri,  2 Mar 2001 18:04:30 +0100
+
+libcompface (1989.11.11-17.4) unstable; urgency=low
+
+  * Fixed manual compresiton to work with build-daemons aswell
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 19 Nov 2000 13:13:51 +0100
+
+libcompface (1989.11.11-17.3) unstable; urgency=low
+
+  * Updated copright regarding modified versions (Bug #72019)
+  * compface now depends on libcompfaceg1 (Bug #71954)
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 29 Oct 2000 15:36:44 +0100
+
+libcompface (1989.11.11-17.2) unstable; urgency=low
+
+  * Manpages now claims xbm images can be handled (Bug #60143)
+  * Man pages and docs moved to /usr/share
+
+ -- Hakan Ardo <hakan@debian.org>  Thu, 10 Aug 2000 14:29:52 +0200
+
+libcompface (1989.11.11-17.1) unstable; urgency=low
+
+  * compface now uses shlibs:Depends instead of hardcoded depends (Bug #43029)
+  * Incoperated Tor's changes into the main release stream (Bug#30119)
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 30 Nov 1998 14:33:44 +0100
+
+libcompface (1989.11.11-16.1) unstable; urgency=low
+
+  * Modified 'rules' to support new ports (such as debian-arm),
+    without libc5 and 'altdev'.
+
+ -- Tor Slettnes <tor@slett.net>  Sat, 28 Nov 1998 12:59:01 -0800
+
+libcompface (1989.11.11-16) unstable; urgency=low
+
+  * Added some info in README.debian
+  * changelog.Debian now included in all packages
+  * compface should get right dependencis even if not installed (Bug ##17063)
+
+ -- Hakan Ardo <hakan@debian.org>  Wed, 21 Oct 1998 17:27:03 +0200
+
+libcompface (1989.11.11-15) frozen unstable; urgency=low
+
+  * Rerelease to get into frozen too.
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 16 Mar 1998 22:43:13 +0100
+
+libcompface (1989.11.11-14) unstable; urgency=low
+
+  * Walked through checklist and updated Standards-Version to 2.4.0.0
+  * Renamed libcompfaceg1's doc dir to match pkg name
+  * Removed leading spaces in descriptions
+  * Applied Richard Braakman <dark@xs4all.nl>'s fixes to the package 
+    descriptions (Bug #18904)
+  * Order of so lib and links fixed. (Bug #19349)
+  * Fixed /usr/doc link for libcompface1-altdev.
+  * Sets LD_LIBRARY_PATH to shared/ before compiling.
+  * Added a shlibs.local file.
+
+ -- Hakan Ardo <hakan@debian.org>  Fri, 13 Mar 1998 18:33:44 +0100
+
+libcompface (1989.11.11-13) unstable; urgency=low
+
+  * i486 no longer hardcoded in the rules file. Bug #16717.
+  * Recompiled (again) to get rid of compface's dependencis on libc5 
+    and libcompface1. Bug #16687.
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 12 Jan 1998 11:43:39 +0100
+
+libcompface (1989.11.11-12) unstable; urgency=low
+
+  * Man pages now included in altdev package too.
+  * Provided links in /usr/doc for all the package names
+  * Moved the /usr/doc stuff from the dev package to the so lib packages. Fixes Bug #15147.
+  * Copyright file updated to relect the fact that the original package is splited into several debian packages
+  * The libs are now stripped. Fixes Bug #15670.
+  * Changed headder into header in the descriptions.
+  * libcompface1 now depends on libc5 (>= 5.4.0.0). Fixes bug #14790.
+  * Darren <torin@daft.com> fixed this (Bug #14632):
+      1. The Makefile invocation uses LDFLAGS which isn't in the Makefile and
+         the link doesn't use implicit rules, so it doesn't get used.
+      2. '-D_REENTRANT' needs to be passed in CFLAGS for the shared objects.
+      3. '-lc' needs to be passed to the link stage of the shared library so
+         that ldso knows what libc it goes to.
+      4. The sequential commands linked by ';' should instead be linked by
+         '&&'.  This ensures that if a command fails, that rule fails.
+      5. make install is invoked in the debian/rules binary-arch target when
+         the install stuff has been done already and the install isn't correct
+         for the current Makefile.
+    I where unable to get your patch accepted so I had to apply it by hand. I 
+    hope I got it all right...
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 22 Dec 1997 16:25:43 +0100
+
+libcompface (1989.11.11-11) unstable; urgency=low
+
+  * Changed verson to be y2k compatible fixes bug #12680 
+  * Changed name of source package from compface to libcompface.
+  * Compleatly repacked and splitet into several bin packages:
+      libcompfaceg1-dev   - libc6 devel
+      libcompfaceg1       - libc6 runtime
+      libcompface1-altdev - libc5 devel
+      libcompface1        - libc5 runtime
+      compface            - user tools
+    This should fix bug #12428 and #13103.
+
+ -- Hakan Ardo <hakan@debian.org>  Thu, 18 Sep 1997 12:37:18 +0200
--- libcompface-1.5.2.orig/debian/dirs
+++ libcompface-1.5.2/debian/dirs
@@ -0,0 +1,8 @@
+usr/lib
+usr/include
+usr/man/man3
+usr/man/man1
+usr/bin
+usr/lib/libc5-compat
+usr/doc/libcompface
+usr/doc/compface
--- libcompface-1.5.2.orig/debian/changelog.old
+++ libcompface-1.5.2/debian/changelog.old
@@ -0,0 +1,130 @@
+libcompface (1989.11.11-18) unstable; urgency=low
+
+  * Added Build-Depends (Bug#92477)
+	* Recompied with stable binutils to fix corrupted 
+	  libcompface.a archive (Bug#92904)
+
+ -- Hakan Ardo <hakan@debian.org>  Sat,  7 Apr 2001 15:01:57 +0200
+
+libcompface (1989.11.11-17.5) unstable; urgency=low
+
+  * Updated the copyright file with another clearfication from the
+    author
+  * ldconfig now only called if configure param given
+  * Walked through the standars updates
+
+ -- Hakan Ardo <hakan@debian.org>  Fri,  2 Mar 2001 18:04:30 +0100
+
+libcompface (1989.11.11-17.4) unstable; urgency=low
+
+  * Fixed manual compresiton to work with build-daemons aswell
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 19 Nov 2000 13:13:51 +0100
+
+libcompface (1989.11.11-17.3) unstable; urgency=low
+
+  * Updated copright regarding modified versions (Bug #72019)
+  * compface now depends on libcompfaceg1 (Bug #71954)
+
+ -- Hakan Ardo <hakan@debian.org>  Sun, 29 Oct 2000 15:36:44 +0100
+
+libcompface (1989.11.11-17.2) unstable; urgency=low
+
+  * Manpages now claims xbm images can be handled (Bug #60143)
+  * Man pages and docs moved to /usr/share
+
+ -- Hakan Ardo <hakan@debian.org>  Thu, 10 Aug 2000 14:29:52 +0200
+
+libcompface (1989.11.11-17.1) unstable; urgency=low
+
+  * compface now uses shlibs:Depends instead of hardcoded depends (Bug #43029)
+  * Incoperated Tor's changes into the main release stream (Bug#30119)
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 30 Nov 1998 14:33:44 +0100
+
+libcompface (1989.11.11-16.1) unstable; urgency=low
+
+  * Modified 'rules' to support new ports (such as debian-arm),
+    without libc5 and 'altdev'.
+
+ -- Tor Slettnes <tor@slett.net>  Sat, 28 Nov 1998 12:59:01 -0800
+
+libcompface (1989.11.11-16) unstable; urgency=low
+
+  * Added some info in README.debian
+  * changelog.Debian now included in all packages
+  * compface should get right dependencis even if not installed (Bug ##17063)
+
+ -- Hakan Ardo <hakan@debian.org>  Wed, 21 Oct 1998 17:27:03 +0200
+
+libcompface (1989.11.11-15) frozen unstable; urgency=low
+
+  * Rerelease to get into frozen too.
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 16 Mar 1998 22:43:13 +0100
+
+libcompface (1989.11.11-14) unstable; urgency=low
+
+  * Walked through checklist and updated Standards-Version to 2.4.0.0
+  * Renamed libcompfaceg1's doc dir to match pkg name
+  * Removed leading spaces in descriptions
+  * Applied Richard Braakman <dark@xs4all.nl>'s fixes to the package 
+    descriptions (Bug #18904)
+  * Order of so lib and links fixed. (Bug #19349)
+  * Fixed /usr/doc link for libcompface1-altdev.
+  * Sets LD_LIBRARY_PATH to shared/ before compiling.
+  * Added a shlibs.local file.
+
+ -- Hakan Ardo <hakan@debian.org>  Fri, 13 Mar 1998 18:33:44 +0100
+
+libcompface (1989.11.11-13) unstable; urgency=low
+
+  * i486 no longer hardcoded in the rules file. Bug #16717.
+  * Recompiled (again) to get rid of compface's dependencis on libc5 
+    and libcompface1. Bug #16687.
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 12 Jan 1998 11:43:39 +0100
+
+libcompface (1989.11.11-12) unstable; urgency=low
+
+  * Man pages now included in altdev package too.
+  * Provided links in /usr/doc for all the package names
+  * Moved the /usr/doc stuff from the dev package to the so lib packages. Fixes Bug #15147.
+  * Copyright file updated to relect the fact that the original package is splited into several debian packages
+  * The libs are now stripped. Fixes Bug #15670.
+  * Changed headder into header in the descriptions.
+  * libcompface1 now depends on libc5 (>= 5.4.0.0). Fixes bug #14790.
+  * Darren <torin@daft.com> fixed this (Bug #14632):
+      1. The Makefile invocation uses LDFLAGS which isn't in the Makefile and
+         the link doesn't use implicit rules, so it doesn't get used.
+      2. '-D_REENTRANT' needs to be passed in CFLAGS for the shared objects.
+      3. '-lc' needs to be passed to the link stage of the shared library so
+         that ldso knows what libc it goes to.
+      4. The sequential commands linked by ';' should instead be linked by
+         '&&'.  This ensures that if a command fails, that rule fails.
+      5. make install is invoked in the debian/rules binary-arch target when
+         the install stuff has been done already and the install isn't correct
+         for the current Makefile.
+    I where unable to get your patch accepted so I had to apply it by hand. I 
+    hope I got it all right...
+
+ -- Hakan Ardo <hakan@debian.org>  Mon, 22 Dec 1997 16:25:43 +0100
+
+libcompface (1989.11.11-11) unstable; urgency=low
+
+  * Changed verson to be y2k compatible fixes bug #12680 
+  * Changed name of source package from compface to libcompface.
+  * Compleatly repacked and splitet into several bin packages:
+      libcompfaceg1-dev   - libc6 devel
+      libcompfaceg1       - libc6 runtime
+      libcompface1-altdev - libc5 devel
+      libcompface1        - libc5 runtime
+      compface            - user tools
+    This should fix bug #12428 and #13103.
+
+ -- Hakan Ardo <hakan@debian.org>  Thu, 18 Sep 1997 12:37:18 +0200
+
+Local variables:
+mode: debian-changelog
+add-log-mailing-address: "hakan@debian.org"
+End:
--- libcompface-1.5.2.orig/debian/libcompfaceg1-dev.files
+++ libcompface-1.5.2/debian/libcompfaceg1-dev.files
@@ -0,0 +1,6 @@
+usr/lib/libcompface.a
+usr/lib/libcompface.so
+usr/include/compface.h
+usr/share/man/man3
+
+
--- libcompface-1.5.2.orig/debian/rules
+++ libcompface-1.5.2/debian/rules
@@ -0,0 +1,232 @@
+#!/usr/bin/make -f
+# Made with the aid of debmake, by Christoph Lameter,
+# based on the sample debian/rules file for GNU hello by Ian Jackson.
+
+SHELL = /bin/bash
+
+package=libcompface
+
+version=1.0.0 #$(shell expr `pwd` : '.*-\([0-9.]*\)')
+version_major=1 #$(shell expr `pwd` : '.*-\([0-9]*\).[0-9.]*')
+old_libpath := $(LD_LIBRARY_PATH)
+LD_LIBRARY_PATH=shared:$(old_libpath)
+
+
+build:		build-libc6
+	$(checkdir)
+	@echo '### Building binaries...'
+	$(MAKE) LDFLAGS="-s -L$(CURDIR)/shared"
+	touch build
+
+build-libc6:
+	$(checkdir)
+	@echo LD_LIBRARY_PATH = $(LD_LIBRARY_PATH)
+	@echo '### Building libc6/glibc2 libraries...'
+
+	-mkdir shared static
+#
+# First build the shared library
+#
+	cd shared && \
+	    $(MAKE) -f ../Makefile VPATH=".." srcdir=".." \
+		LDFLAGS="-lc"\
+	        CFLAGS="-O2 -fPIC -pipe -D_BSD_SOURCE -D_REENTRANT" shared && \
+		ln -sf $(package).so $(package).so.$(version_major) &&  \
+		ln -sf $(package).so.$(version) $(package).so #&& \
+#		strip --strip-unneeded $(package).so.$(version)
+#
+# Build the static library (it does not need Position Independent Code,
+# which reserves one register; thus, without -fPIC we get more efficient
+# code).
+#
+	cd static && \
+	     $(MAKE) -f ../Makefile VPATH=".." srcdir=".." \
+	          CFLAGS="-O2 -pipe -D_BSD_SOURCE" LDFLAGS="-s" static #&& \
+#		  strip --strip-debug $(package).a
+
+	touch build-libc6
+
+build-libc5:
+	$(checkdir)
+	@echo LD_LIBRARY_PATH = $(LD_LIBRARY_PATH)
+	@echo '### Building libc5 libraries...'
+
+	-cat debian/control.libc5 >> debian/control
+	-mkdir shared5 static5
+#
+# First build the shared library
+#
+	cd shared5 && \
+	    $(MAKE) -f ../Makefile VPATH=".." srcdir=".." \
+		CC=$(avar)-linuxlibc1-gcc\
+		LDFLAGS="-lc"\
+	        CFLAGS="-O2 -fPIC -pipe -D_BSD_SOURCE -D_REENTRANT" shared && \
+		ln -sf $(package).so $(package).so.$(version_major) &&  \
+		ln -sf $(package).so.$(version) $(package).so &&  \
+		strip --strip-unneeded $(package).so.$(version)
+
+#
+# Build the static library (it does not need Position Independent Code,
+# which reserves one register; thus, without -fPIC we get more efficient
+# code).
+#
+	cd static5 && \
+	     $(MAKE) -f ../Makefile VPATH=".." srcdir=".." \
+		  CC=$(avar)-linuxlibc1-gcc\
+	          CFLAGS="-O2 -pipe -D_BSD_SOURCE" LDFLAGS="-s" static && \
+		  strip --strip-debug $(package).a
+
+	touch build-libc5
+
+clean:
+	$(checkdir)
+	-rm -rf static shared static5 shared5
+	-rm -f build build-*
+	-make clean
+	-rm -f `find . -name "*~"`
+	-rm -rf debian/tmp `find debian/* -type d ! -name CVS` debian/files* core
+	-rm -f debian/*substvars
+	-cat debian/control.common > debian/control
+	-dh_clean
+
+
+binary-indep:	checkroot build
+	$(checkdir)
+# There are no architecture-independent files to be uploaded
+# generated by this package.  If there were any they would be
+# made here.
+
+binary-arch:	checkroot build binary-common binary-libc6
+	@echo '### Installing architecture dependent files...'
+#make install DESTDIR=`pwd`/debian/tmp
+
+	mkdir debian/tmp/usr/share
+	mkdir debian/tmp/usr/share/doc
+	mv debian/tmp/usr/man debian/tmp/usr/share/
+	mv debian/tmp/usr/doc/compface debian/tmp/usr/share/doc/
+	mv debian/tmp/usr/doc/libcompfaceg1 debian/tmp/usr/share/doc/
+	cp debian/copyright debian/tmp/usr/share/doc/libcompfaceg1
+	cp debian/README.debian debian/tmp/usr/share/doc/libcompfaceg1
+	cp debian/changelog debian/tmp/usr/share/doc/libcompfaceg1/changelog.Debian
+	gzip -9 debian/tmp/usr/share/doc/libcompfaceg1/changelog.Debian
+	mv debian/tmp/usr/doc/libcompfaceg1-dev debian/tmp/usr/share/doc/
+	#gzip -9 debian/tmp/usr/share/man/man1/compface.1
+	rm debian/tmp/usr/share/man/man1/uncompface.1 
+	ln -s compface.1.gz debian/tmp/usr/share/man/man1/uncompface.1.gz
+# gzip -9 debian/tmp/usr/share/man/man3/compface.3
+	-rm debian/tmp/usr/share/man/man3/uncompface.3
+	ln -s compface.3.gz debian/tmp/usr/share/man/man3/uncompface.3.gz
+
+	#debstd 
+
+
+	#-rm -rf debian/tmp/usr/man
+	#-rm -rf debian/tmp/usr/doc
+	#-rm -f  debian/tmp/usr/share/doc/libcompface
+	#-rm -rf debian/tmp/usr/share/doc/libcompfaceg1
+	#-rm -rf debian/tmp/usr/lib/libc5-compat
+	#-rm -rf debian/tmp/usr/share/man/man1
+	#-rm -rf debian/tmp/usr/bin
+	#-rm -rf debian/tmp/usr/$(avar)-linuxlibc1
+	#-rm -rf debian/tmp/usr/doc/libcompface 
+	#-rm -rf debian/tmp/usr/share/doc/compface 
+	#-rm -f  debian/tmp/usr/share/doc/libcompfaceg1
+	#-rm -rf debian/tmp/usr/doc/libcompface1
+	#-rm -f  debian/tmp/usr/doc/libcompface1-altdev
+
+	dh_installdeb
+	dh_installdocs
+	dh_installman
+
+	dh_movefiles
+	dh_installchangelogs
+	dh_compress
+	dh_fixperms
+	dh_strip
+
+	dh_shlibdeps	
+	dh_md5sums
+
+	#dpkg-gencontrol -plibcompfaceg1-dev -isp
+	#chown -R root.root debian/tmp
+	#chmod -R go=rX debian/tmp
+	#dpkg --build debian/tmp ..
+
+	dh_gencontrol
+	dh_builddeb
+
+binary-common:
+	$(checkdir)
+	@echo '### Installing common components...'
+
+	-rm -rf debian/tmp `find debian/* -type d`
+	install -d debian/tmp
+
+	cd debian/tmp && install -d usr/man/man3 usr/man/man1 usr/bin usr/doc/libcompface usr/doc/compface
+
+	install -m644 compface.3 debian/tmp/usr/man/man3/
+	install -m644 README debian/tmp/usr/doc/compface
+	install -m644 debian/copyright debian/tmp/usr/doc/compface
+	install -m644 debian/changelog debian/tmp/usr/doc/compface/changelog.Debian
+	gzip -9 debian/tmp/usr/doc/compface/changelog.Debian
+
+	install -m644 compface.1 debian/tmp/usr/man/man1/
+	ln -s compface.1 debian/tmp/usr/man/man1/uncompface.1
+	install -m744 compface debian/tmp/usr/bin/
+	install -m744 uncompface debian/tmp/usr/bin/
+
+
+binary-libc6:
+	@echo '### Installing libc6 components...'
+
+	cd debian/tmp && install -d usr/lib usr/include
+
+	install -m644 static/$(package).a debian/tmp/usr/lib/
+	install -m644 compface.h debian/tmp/usr/include/
+
+	-ln -s $(package).so.$(version) debian/tmp/usr/lib/$(package).so
+	-ln -s $(package).so.$(version) debian/tmp/usr/lib/$(package).so.$(version_major)
+
+	cp shared/$(package).so.$(version) debian/tmp/usr/lib
+	chmod 644 debian/tmp/usr/lib/$(package).so.$(version)
+
+	-rm -r debian/tmp/usr/doc/libcompface
+	-mkdir debian/tmp/usr/doc/libcompfaceg1
+	-ln -s libcompfaceg1 debian/tmp/usr/doc/libcompface
+	-ln -s libcompfaceg1 debian/tmp/usr/doc/libcompfaceg1-dev
+
+
+binary-libc5:
+	@echo '### Installing libc5 components...'
+
+	cd debian/tmp && install -d usr/lib/libc5-compat usr/$(avar)-linuxlibc1/{lib,include}
+
+	install -m644 static5/$(package).a debian/tmp/usr/$(avar)-linuxlibc1/lib/
+	install -m644 compface.h debian/tmp/usr/$(avar)-linuxlibc1/include/
+
+	-ln -s $(package).so.$(version) debian/tmp/usr/lib/libc5-compat/$(package).so
+	-ln -s $(package).so.$(version) debian/tmp/usr/lib/libc5-compat/$(package).so.$(version_major)
+
+	cp shared5/$(package).so.$(version) debian/tmp/usr/lib/libc5-compat
+	chmod 644 debian/tmp/usr/lib/libc5-compat/$(package).so.$(version)
+
+	-mkdir debian/tmp/usr/doc/libcompface1
+	install -m644 debian/copyright debian/tmp/usr/doc/libcompface1
+	install -m644 debian/changelog debian/tmp/usr/doc/libcompface1/changelog.Debian
+	gzip -9 debian/tmp/usr/doc/libcompface1/changelog.Debian
+	-ln -s libcompface1 debian/tmp/usr/doc/libcompface1-altdev
+
+
+define checkdir
+	test -f debian/rules
+endef
+
+# Below here is fairly generic really
+
+binary:		binary-indep binary-arch
+
+checkroot:
+	$(checkdir)
+	test root = "`whoami`"
+
+.PHONY: binary binary-arch binary-indep clean checkroot
--- libcompface-1.5.2.orig/debian/copyright
+++ libcompface-1.5.2/debian/copyright
@@ -0,0 +1,109 @@
+This is Debian GNU/Linux's prepackaged version of James Ashton's 
+compface utility, which provides 48x48x1 image compression 
+and decompression to allow the inclusion of face images within 
+mail headers using the field name `X-face: '.
+
+Following the debian policys James Ashton's original package is 
+split up into several binary debian packages:
+
+      libcompfaceg1-dev   - libc6 devel
+      libcompfaceg1       - libc6 runtime
+      compface            - user tools
+
+They are all created form a single source package libcompface.
+
+This package was put together by me, Hakan Ardo 
+<hakan@debian.org> from the sourcecode I originaly obtained from
+ftp.cs.indiana.edu:/pub/faces/compface/compface.tar.Z. Later updates to the
+library were found at:
+
+  http://ftp.xemacs.org/pub/xemacs/aux/compface-1.5.2.tar.gz
+
+I have  applyed the compface patches found in the exmh-1.6.9-2 package:
+
+compface.patch:
+The compface.patch file has a patch that teaches the compface
+and uncompface programs how to read .xbm format (X bitmap) files,
+instead of the arcane .ikon files it used before.
+
+And I have made som changes to the Makefile to compile and link the 
+library sharead added adding support for the Debian package maintenance
+scheme, by adding various debian/* files.
+
+
+Compface - 48x48x1 image compression and decompression
+Copyright (c) James Ashton 1990.
+Written 89/11/11
+
+Feel free to distribute this source at will so long as the above
+message and this message are included in full.
+
+This copyright message dosn't specify whether modified version is allowed,
+but the following mail from the author does allow them:
+
+> From: James Ashton <James.Ashton@syseng.anu.edu.au>
+> Subject: Re: Bug#72019: compface not DFSG
+> Date: Wed, 20 Sep 2000 09:48:34 +1100 (EST)
+> 
+> >On Tue, Sep 19, 2000 at 08:58:43AM -0400, Raul Miller wrote:
+> >> Package: compface
+> >> Version: 1989.11.11-17.1
+> >> Severity: important
+> >>
+> >> compface's copyright doesn't grant permission to
+> >> distribute modified versions
+> >
+> >The compface copyright says:
+> >
+> >Feel free to distribute this source at will so long as the above
+> >message and this message are included in full.
+> >
+> >
+> >Which could be interpretated as it is allowed to distribute modified
+> >versions of it. James Ashton is the original author, would you care to
+> >clairify the matter, mr Ashton?
+> 
+> I don't mind modified versions being distributed.  Please included the
+> original copyright notices as specified and also prominently note, if
+> it is a modified version, the nature and author(s) of the
+> modifications.
+> --
+> James Ashton                  VK1XJA                    System Administrator
+> http://wwwsyseng.anu.edu.au/~jaa                   Department of Systems Engineering
+> Voice +61 2 6279 8675  Research School of Information Sciences and Engineering
+> FAX   +61 2 6279 8688                         Australian National University
+> Email James.Ashton@anu.edu.au                    Canberra ACT 0200 Australia
+> 
+
+Another peoblem with the copyright of this source code is that the
+copyright message in the source files and in the readme file is conflicting.
+The following mail from the author should clear that up:
+
+> From: James Ashton <James.Ashton@syseng.anu.edu.au>
+> Subject: Re: libcompface license (again)
+> Date: Thu, 22 Feb 2001 09:32:23 +1100 (EST)
+> 
+> >Hi,
+> >I'm maintaining the debian pkg of your compface lib, and I've talket to you
+> >before about it's license. And now ouer legal people have found another
+> >problem. The sourcefiles contains a diffrent copyright notice than the
+> >redmefile. They say:
+> >
+> >> *  Permission is given to distribute these sources, as long as the
+> >> *  copyright messages are not removed, and no monies are exchanged.=20
+> >
+> >The problem is the last part "no monies are exchanged". As you probably=20
+> >know we do allow third party companies to produce debian CDs and sell them.
+> >So this statement would inmply that we can't have your libcompface in
+> debian
+> >at all.
+> 
+> I'm happy to remove the phrase no monies are exchanged' from the
+> source and allow distribution as per the README file.  Do you need more
+> from me than just this email?
+> --
+> James Ashton                    VK1XJA                    System Administrator
+> http://wwwsyseng.anu.edu.au/~jaa             Department of Systems Engineering
+> Voice +61 2 6125 8675  Research School of Information Sciences and Engineering
+> FAX   +61 2 6125 8660                           Australian National University
+> Email James.Ashton@anu.edu.au                      Canberra ACT 0200 Australia
--- libcompface-1.5.2.orig/debian/libcompfaceg1.shlibs
+++ libcompface-1.5.2/debian/libcompfaceg1.shlibs
@@ -0,0 +1 @@
+libcompface	1	libcompfaceg1
--- libcompface-1.5.2.orig/debian/control.old
+++ libcompface-1.5.2/debian/control.old
@@ -0,0 +1,58 @@
+Source: libcompface
+Section: mail
+Priority: optional
+Maintainer: Hakan Ardo <hakan@debian.org>
+Standards-Version: 2.4.0.0
+
+Package: libcompfaceg1-dev
+Section: devel
+Priority: optional
+Architecture: any
+Depends: libcompfaceg1, libc6-dev
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 devel
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompfaceg1
+Section: libs
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Conflicts: compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc6 runtime
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: compface
+Section: mail
+Priority: optional
+Architecture: any
+Depends: ${shlibs:Depends}
+Description: Compress/decompress images for mailheaders, user tools
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompface1-altdev
+Section: devel
+Priority: optional
+Architecture: any
+Depends: libcompface1, libc5-altdev
+Description: Compress/decompress images for mailheaders, libc5 devel
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompface1
+Section: libs
+Priority: optional
+Architecture: any
+Depends: libc5 (>= 5.4.0.0)
+Conflicts: libc5-dev, compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc5 runtime
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
--- libcompface-1.5.2.orig/debian/control.libc5
+++ libcompface-1.5.2/debian/control.libc5
@@ -0,0 +1,21 @@
+
+Package: libcompface1-altdev
+Section: devel
+Priority: optional
+Architecture: any
+Depends: libcompface1, libc5-altdev
+Description: Compress/decompress images for mailheaders, libc5 devel
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
+
+Package: libcompface1
+Section: libs
+Priority: optional
+Architecture: any
+Depends: libc5 (>= 5.4.0.0)
+Conflicts: libc5-dev, compface (<= 89.11.11-10)
+Description: Compress/decompress images for mailheaders, libc5 runtime
+ Converts 48x48 .xbm format (X bitmap) files to a compressed format 
+ that can be placed in your X-Face: mail header. Some mailreaders, 
+ like exmh will then display this image when the user is reading your mail.
--- libcompface-1.5.2.orig/debian/README.debian
+++ libcompface-1.5.2/debian/README.debian
@@ -0,0 +1,13 @@
+libcompface for DEBIAN
+----------------------
+
+To generate a X-Face header from an arbitrary sized jpg face.jpg, use:
+
+  djpeg face.jpg | pnmscale -width=48 -height=48 | ppmtopgm | pgmtopbm | pbmtoxbm | compface
+
+There have been some trouble reported about using the compface lib, se 
+http://www.debian.org/Bugs/db/12/12302.html, but the utilities provided with 
+it seems to be working fine. This bug has been forwarde to the upstream 
+author, but he's not replyed...
+
+Hakan Ardo <hakan@debian.org>, Thu, 18 Sep 1997 12:37:18 +0200
