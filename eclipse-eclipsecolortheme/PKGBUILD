# Maintainer: xgdgsc <xgdgsc@gmail.com>
# Contributor: Jes√∫s Jerez <jerezmoreno@gmail.com>
pkgname=eclipse-eclipsecolortheme
pkgver=0.13.1
_pkgdate="201405041302"

pkgrel=1
pkgdesc="Eclipse Color Theme"
url="http://www.eclipsecolorthemes.org"
license=("EPL/1.0")
arch=('any')
depends=('eclipse')
makedepends=('unzip')
noextract=("com.github.eclipsecolortheme_${pkgver}.${_pkgdate}.jar" "com.github.eclipsecolortheme.feature_${pkgver}.${_pkgdate}.jar")
source=(
  "http://eclipse-color-theme.github.com/update/features/com.github.eclipsecolortheme.feature_${pkgver}.${_pkgdate}.jar"
                "http://eclipse-color-theme.github.com/update/plugins/com.github.eclipsecolortheme_${pkgver}.${_pkgdate}.jar"
                )

md5sums=('6ec614cfe6569280408b7a79a7396048'
'029e655aa27552e0024fe8ecb813610e')
 
package() {
        _dest="${pkgdir}"/usr/share/eclipse/dropins/${pkgname/eclipse-}/eclipse
 
        mkdir {plugins,features}
        cp com.github.eclipsecolortheme_${pkgver}.${_pkgdate}.jar plugins/
        cp com.github.eclipsecolortheme.feature_${pkgver}.${_pkgdate}.jar features/
 
        # Features
        find features -type f | while read _feature ; do
                if [[ ${_feature} =~ (.*\.jar$) ]] ; then
                        install -dm755 "${_dest}"/${_feature%*.jar}
                        cd "${_dest}"/${_feature/.jar}
                        jar xf "${srcdir}/${_feature}" || return 1
                else
                        install -Dm644 ${_feature} "${_dest}/${_feature}"
                fi
        done
 
        # Plugins
        find plugins -type f | while read _plugin ; do
                install -Dm644 ${_plugin} "${_dest}/${_plugin}"
        done
}
