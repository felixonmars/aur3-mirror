pkgname=lightdm
pkgver=0.4.2
pkgrel=1
pkgdesc="A lightweight display manager"
arch=('i686' 'x86_64')
url="https://launchpad.net/lightdm"
license=('GPL3' 'LGPL3')
source=("http://people.ubuntu.com/~robert-ancell/lightdm/releases/$pkgname-$pkgver.tar.gz"
lightdm
lightdm.service
)
depends=('gnome-themes-standard' 'gnome-icon-theme' 'libwebkit' 'dbus-glib' 'gtk2' 'libxklavier' 'intltool')
options=(!libtool)
optdepends=('xorg-server-xephyr: run lightdm in test mode' )
makedepends=('gnome-doc-utils' 'gobject-introspection' 'pkg-config')

build() {
  cd $srcdir/$pkgname-$pkgver
     ./configure --prefix=/usr \
     --with-dbus-sys=/etc/dbus-1/system.d \
     --with-log-dir=/var/log/lightdm \
     --with-config-file=/etc/lightdm.conf \
     --with-xauth-dir=/var/run/lightdm/authority \
     --enable-introspection=no \
     --sysconfdir=/etc --disable-static --libexecdir=/usr/lib/lightdm
   make || return 1
}

package() {
  cd $srcdir/$pkgname-$pkgver
  make DESTDIR=$pkgdir install
  mkdir -p $pkgdir/etc/rc.d 
  mkdir -p $pkgdir/lib/systemd/system/
 # init services file 
  install -m755 ../lightdm $pkgdir/etc/rc.d
  install -m644 ../lightdm.service $pkgdir/lib/systemd/system/
  
  rm -r $pkgdir/etc/init
  
}

md5sums=('4f04e9a0ce270b497ba4d84a289d941e'
         '990fdeb198f2ef928274bde0b9d2df99'
         '7458f1ed463bace911d8292a1615c85f')
