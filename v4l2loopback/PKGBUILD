# Maintainer: SpepS <dreamspepser at yahoo dot it>

pkgname=v4l2loopback
pkgver=0.4.0
pkgrel=2
pkgdesc="A kernel module to create V4L2 loopback devices"
arch=(i686 x86_64)
url="https://github.com/umlaeute/v4l2loopback/"
license=('GPL')
makedepends=('kernel26-headers')
conflicts=("$pkgname-svn" "$pkgname-git")
install="$pkgname.install"
source=("${url}tarball/v$pkgver")
md5sums=('48be34acdedab1a6a1b3da8fdef76e6e')

build() {
  cd `find "$srcdir" -maxdepth 1 -mindepth 1 -type d`

  make
}

package() {
  cd `find "$srcdir" -maxdepth 1 -mindepth 1 -type d`

  # module
  install -Dm644 $pkgname.ko "$pkgdir/lib/modules/`uname -r`/kernel/drivers/misc/$pkgname.ko"

  # docs
  install -Dm644 doc/v4l2.html "$pkgdir/usr/share/doc/$pkgname/v4l2.html"
  install -Dm644 README NEWS "$pkgdir/usr/share/doc/$pkgname"

  # example
  install -d "$pkgdir/usr/share/$pkgname/examples"
  install -Dm644 examples/* "$pkgdir/usr/share/$pkgname/examples"
}

# vim:set ts=2 sw=2 et:
