#Maintainer: Nathan Owe <ndowens.aur at gmail dot com>
pkgname=4th
pkgver=3.61.1
pkgrel=2
pkgdesc="A Forth Compiler"
arch=('i686' 'x86_64')
url="http://www.xs4all.nl/~thebeez/4tH/index.html"
license=('LGPL')
depends=('glibc')
install=4th.install
source=("http://4th.googlecode.com/files/${pkgname}-${pkgver}-unix.tar.gz"
		"Makefile.patch")
md5sums=('465605cb841def6f3cede647ccf9ef27'
         'abc0db2df21a2c7d28901bbe61f2a68d')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}-unix/sources"
  #Patched Makefile to install manual and docs
  patch -uNi ${srcdir}/Makefile.patch
  if [ "$CARCH" == "x86_64" ]; then
	  cp include/* . ; 
	  make clean
  fi
  make
  
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}-unix/sources"
  install -d ${pkgdir}/usr/{lib,bin}
  make BINARIES=${pkgdir}/usr/bin \
	   LIBRARIES=${pkgdir}/usr/lib \
	   DOCDIR=${pkgdir}/usr/share/doc \
	   MANDIR=${pkgdir}/usr/share/man install
  
 }
