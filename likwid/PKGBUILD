# Maintainer: Florian Plaza OÃ±ate <florian<dot>plaza[at]gmail[dot]com>
pkgname=likwid
pkgver=2.3
pkgrel=0
pkgdesc="Lightweight performance tools"
url="http://likwid.googlecode.com"
arch=('x86_64' 'i686')
license=('GPLv3')
depends=()
makedepends=()
optdepends=('perl: for likwid-mpirun and likwid-perscope'
			'openmpi: for likwid-mpirun'
			'gnuplot: for likwid-perfscope')
conflicts=()
source=("${url}/files/${pkgname}-${pkgver}.${pkgrel}.tar.gz")
sha1sums=('7199904da200c4da1fdcd5388399a039ec3eed02')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make || return 1
  
  if [[ ${CARCH} == x86_64 ]]
  then
	  make likwid-bench || return 1 
  fi
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  sed -i -e \
	  "10s:/usr/local:${pkgdir}/usr:; 11s:/man:/share/man:"\
	  config.mk || return 1
  make install || return 1
}

