# Maintainer: elwin013 <kontakt AT elwin013 DOT com>
# Contributor: Jesses <jesse.jaara AT gmail DOT com>
# Contributor: robb_force <robb_force AT holybuffalo DOT net>
pkgname=daimonin
pkgver=0.10.5
pkgrel=7
pkgdesc="A free, open source, Massively Multiplayer Online Role-playing Game (MMORPG)."
arch=('i686' 'x86_64')
url="http://www.daimonin.org"
license=('GPL')
depends=('sdl_mixer' 'sdl_image' 'physfs' 'curl')
source=(http://daimonin.svn.sourceforge.net/viewvc/${pkgname}/main/client.tar.gz  \
${pkgname}.desktop \
${pkgname}.png \
Makefile.am \
Makefile.in \
daimonin)
md5sums=('adf6a983bebd05d694dc1e936fcacd60'
         'a910ade3a5c18cd9dd3fb156b4bea57a'
         '7480f31868a20a4bce8fe940adc3c243'
         'ae5d69ad02077c79a5a6dfc56f26ac46'
         'ed395a742e2b8c303e333013b49e8fe5'
         'e45328fe741bdc94751eee9bd3f29bee')


build() {
  cp Makefile.am $srcdir/client/make/linux
  cp Makefile.in $srcdir/client/make/linux
  mkdir -p $pkgdir/opt
  
  cd "$srcdir/client/make/linux"
  ./bootstrap
  ./configure --prefix=/opt
  make
  make DESTDIR="${pkgdir}" install
  
  cd ../../
  mkdir -p $pkgdir/usr/share/licenses/$pkgname
  install --mode=644 License $pkgdir/usr/share/licenses/$pkgname/License
  install --mode=644 media/License\ Note $pkgdir/usr/share/licenses/$pkgname/License\ Note
  install --mode=644 media/media.txt $pkgdir/usr/share/licenses/$pkgname/media.txt
  
  cd ../../
  mkdir -p $pkgdir/usr/bin
  install --mode=755 $pkgname $pkgdir/usr/bin/
  mkdir $pkgdir/usr/share/applications
  mkdir $pkgdir/usr/share/pixmaps
  install --mode=644 $pkgname.desktop $pkgdir/usr/share/applications/
  install --mode=644 $pkgname.png $pkgdir/usr/share/pixmaps/
}
