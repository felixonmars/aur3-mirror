# Maintainer: Andrey Vlasovskikh <andrey.vlasovskikh@gmail.com>
pkgname=pycharm-eap
_buildver=110.303
pkgver=2.0.${_buildver}
pkgrel=1
pkgdesc="PyCharm Early Access Program (EAP). 30-day free trial."
arch=('i686' 'x86_64')
url="http://www.jetbrains.com/pycharm/"
license=("custom")
depends=("jdk")
changelog="CHANGES"
source=("http://download.jetbrains.com/python/pycharm-${_buildver}.tar.gz")
md5sums=('57564b1a0982d4404974cf3775cef0c5')

build() {
  cd "${srcdir}"
  mkdir -p "${pkgdir}/opt/${pkgname}" || return 1
  cp -R "${srcdir}/pycharm-${_buildver}/"* "${pkgdir}/opt/${pkgname}" || return 1
  if [[ $CARCH = 'i686' ]]; then
     rm -f "${pkgdir}/opt/${pkgname}/bin/libyjpagent64.so"
     rm -f "${pkgdir}/opt/${pkgname}/bin/fsnotifier64"
  fi
  mkdir -p "${pkgdir}/usr/share/licenses/${pkgname}/" || return 1
  install -m 644 "${srcdir}/pycharm-${_buildver}/license/PyCharm_license.txt" "${pkgdir}/usr/share/licenses/${pkgname}/PyCharm_license.txt"
}

