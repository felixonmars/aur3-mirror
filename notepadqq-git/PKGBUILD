# Maintainer: Jesse Spangenberger <azulephoenix@gmail.com>

pkgname=notepadqq-git
_pkgname=notepadqq
pkgver=0.34.0.r1.g2bcb4a0
pkgrel=1
pkgdesc="A Linux clone of Notepad++"
arch=('i686' 'x86_64')
url="http://notepadqq.altervista.org/wp/"
license=('GPL3')
depends=('qt5-webkit=5.3.1' 'hicolor-icon-theme' 'desktop-file-utils' 'file')
provides=('notepadqq')
conflicts=('notepadqq-bin')
install=${_pkgname}.install
makedepends=('qt5-base')

sha1sums=('SKIP')

source=(git+https://github.com/notepadqq/notepadqq.git)

pkgver() {
	cd "${srcdir}/${_pkgname}"
	git describe --long | sed -r 's/([^-]*-g)/r\1/;s/-/./g;s/^v//g'
}

build() {
	cd "${srcdir}/${_pkgname}/src/ui"
	
	 qmake-qt5 "PREFIX=${pkgdir}/usr" notepadqq.pro -r -spec linux-g++
	 make
	
}

package() {
	cd "${srcdir}/${_pkgname}/src/ui"
	make DESTDIR="${pkgdir}/usr" install
	
	install -Dm644 "${pkgdir}/usr/share/icons/hicolor/scalable/apps/${_pkgname}.svg" "${pkgdir}/usr/share/pixmaps/${_pkgname}.svg"
}
