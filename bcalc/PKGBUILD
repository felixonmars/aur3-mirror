# Maintainer: Krzysztof Wloch <wloszekk@gmail.com>
# Contributor: Piotr Beling <qwak@w8.pl>
pkgname=bcalc
pkgver=11.12.0
pkgrel=1
pkgdesc="Bridge Calculator is program which solves problems in the Bridge card game (like double dummy problem)"
arch=('i686' 'x86_64')
url="http://www.bcalc.w8.pl"
license=('custom')
depends=('lua>=5.1')
options=('!strip')
source=("${url}/download/bcalc${pkgver//./}_linux_${CARCH/_/-}.tar.gz"
	"${url}/download/bcalc_linuxpkgdevel_09.tar.gz")
md5sums=('d06fcaa29d8814b3ebe052e40a4f5e27'
         '32ebb622ae7ef95626279a0dfc877964')

[ "$CARCH" = "x86_64" ] && md5sums[0]='be891198ca9c5dd0463cdad05a54e332'

build() {
	install -d $pkgdir/usr/bin			|| return 1

	cd $srcdir					|| return 1

	install -m 755 bcalcgui $pkgdir/usr/bin/bcalcgui	|| return 1
	install -m 755 bcalconsole $pkgdir/usr/bin/bcalconsole	|| return 1

	install -D -m644 bcalc.desktop \
	$pkgdir/usr/share/applications/bcalc.desktop	|| return 1

	install -D -m644 bcalc.png \
	$pkgdir/usr/share/pixmaps/bcalc.png		|| return 1
	
	install -d $pkgdir/usr/share/locale/pl/LC_MESSAGES/
	install -D -m644 i18n/pl/LC_MESSAGES/* $pkgdir/usr/share/locale/pl/LC_MESSAGES/

	install -d $pkgdir/var/lib/bcalc/downloaders
	install -D -m644 downloaders/* $pkgdir/var/lib/bcalc/downloaders
	
	install -d $pkgdir/usr/lib
	ln -s /usr/lib/liblua.so $pkgdir/usr/lib/liblua5.1.so.0
}
