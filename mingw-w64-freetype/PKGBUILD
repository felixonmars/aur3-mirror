# Maintainer: Daniel Kirchner <daniel at ekpyron dot org>

pkgname=mingw-w64-freetype
pkgver=2.4.9
pkgrel=2
pkgdesc="TrueType font rendering library (mingw-w64)"
arch=('any')
url="http://www.freetype.org/"
license=('GPL')
depends=(mingw-w64-zlib)
makedepends=(mingw-w64-gcc)
source=(http://download.savannah.gnu.org/releases/freetype/freetype-$pkgver.tar.gz)
options=(!strip !buildflags)
md5sums=('c15f6dc8ed190d67b89ae09aaf7896b4')

_targetarch32=i686-w64-mingw32
_targetarch64=x86_64-w64-mingw32

build() {
  cd "$srcdir/freetype-$pkgver"
  
  rm -rf build32
  mkdir build32
  cd build32

  CC=${_targetarch32}-gcc \
  ../configure --host=$_targetarch32 \
  --prefix=/usr/$_targetarch32 \
  --enable-static \
  --enable-shared \
  --with-zlib=/usr/$_targetarch32

  make
  make DESTDIR="$pkgdir" install
  
  cd ..
  rm -rf build64
  mkdir build64
  cd build64
  
  CC=${_targetarch64}-gcc \
  ../configure --host=$_targetarch64 \
  --prefix=/usr/$_targetarch64 \
  --enable-static \
  --enable-shared \
  --with-zlib=/usr/$_targetarch64

  make
  make DESTDIR="$pkgdir" install
}

# vim:set ts=2 sw=2 et:
