# Maintainer: György Balló <ballogy@freestart.hu>
pkgname=indicator-datetime
pkgver=0.3.1
pkgrel=4
pkgdesc="A very, very simple clock"
arch=('i686' 'x86_64')
url="https://launchpad.net/indicator-datetime"
license=('GPL')
depends=('libindicator>=0.3.0' 'libdbusmenu>=0.3.94' 'ido>=0.2.2' 'geoclue>=0.12.0' 'evolution-data-server>=3.2')
true && depends=('libindicator3>=0.3.0' 'libdbusmenu-gtk3>=0.3.94' 'ido>=0.2.2' 'geoclue>=0.12.0' 'evolution-data-server>=3.2')
makedepends=('intltool>=0.41.0')
options=(!libtool)
install=$pkgname.install
source=(http://launchpad.net/$pkgname/0.3/$pkgver/+download/$pkgname-$pkgver.tar.gz
        make-ccpanel-optional.patch)
md5sums=('d566d240c3e4312e979381d9d8dd4b9a'
         '038e2a2a1bf860462cbe338860aa2147')

build() {
  cd "$srcdir/$pkgname-$pkgver"
  patch -Np1 -i "$srcdir/make-ccpanel-optional.patch"

  autoreconf -fi
  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --libexecdir=/usr/lib/$pkgname \
              --disable-static --disable-schemas-compile --disable-ccpanel
  make
}

package() {
  cd "$srcdir/$pkgname-$pkgver"

  make DESTDIR="$pkgdir/" install
}
