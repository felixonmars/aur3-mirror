# Contributor: Kristof Jozsa <kjozsa@ftldev.hu>
# Contributor: made_in_nz

pkgname=visualvm
pkgver=1.3.2
pkgrel=3
pkgdesc="A Java VM monitoring and troubleshooting tool"
arch=('i686' 'x86_64')
url="https://visualvm.dev.java.net/"
license=('GPL2')
depends=('java-environment')
options=(!strip)

source=(http://java.net/downloads/visualvm/release132/visualvm_132.zip \
    visualvm)
md5sums=('aa54354c583ee384f3f90a86208b3ca9' '0187d33fcb833ac2a5349e9bbaa0c52c')

build() {
  cd $startdir/src
  mkdir $startdir/pkg/opt
  mv visualvm_132 $startdir/pkg/opt/visualvm

  rm -f $startdir/pkg/opt/visualvm/*.txt
  rm -f $startdir/pkg/opt/visualvm/bin/*.exe
  rm -f $startdir/pkg/opt/visualvm/platform/lib/nbexec.{dll,exe}
  rm -rf $startdir/pkg/opt/visualvm/profiler/lib/deployed/jdk1{5,6}/{hpux*,mac,solaris*,windows*}

  mkdir -p $startdir/pkg/usr/bin/
  install -m 755 $startdir/visualvm $startdir/pkg/usr/bin/
}
