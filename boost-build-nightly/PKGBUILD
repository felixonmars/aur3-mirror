# Maintainer: Tianjiao Yin <ytj000@gmail.com>

pkgname=boost-build-nightly
pkgdesc="Boost build system, Nightly build"
pkgver=20120428
pkgrel=1
arch=('i686' 'x86_64')
url="http://www.boost.org/doc/tools/build/"
license=('boost')
depends=('boost')
optdepends=(
	'qt: for qt support'
	'openmpi: for mpi support'
        'python: for python bindings'
	'python2: for python2 bindings'
	'docbook-xml: for boost book'
	'docbook-xsl: for boost book'
	'libxslt: for boost book'
	'doxygen: for boost book'
)
conflicts=('boost-build' 'boost-build-config' )
provides=('boost-build' 'boost-build-config')
source=('boost-build-config' 'boost-build.install')
install=boost-build.install

build() {
	BD_NAME="boost-build"
	BD_SRC="${BD_NAME}.tar.bz2"
	BD_SRC_URI="http://boost.org/boost-build2/${BD_SRC}"

	msg "Downloading..."
	wget -N ${BD_SRC_URI}
	msg "Extracting..."
	bsdtar -x -f ${BD_SRC}
	msg "Packaging..."

	mkdir -p "${pkgdir}/usr/share"
	mkdir -p "${pkgdir}/etc"
	rm -Rf "${BD_NAME}/engine"
	cp -R "${BD_NAME}" "${pkgdir}/usr/share"
	install -D -m755 "${srcdir}/boost-build-config" "${pkgdir}/etc/rc.d/boost-build-config"
	touch "${pkgdir}/etc/site-config.jam"
}
md5sums=('2896e894f2d6ad13c8e0650a12b3bfa3'
         'b846271cc0b9b7c628970fe58a7ca15f')
