# Contributor: Kamil Stachowski <kamil.stachowski@gmail.com>

pkgname=atp-vim
pkgver=9.6
pkgrel=2
pkgdesc="Automatic LaTex Plugin for Vim"
url='http://sourceforge.net/projects/atp-vim/'
arch=(any)
license=('GPL')
depends=('python2-psutil')
makedepends=('vim')
provides=('atp-vim')
conflicts=()
replaces=()
source=("http://downloads.sourceforge.net/project/atp-vim/releases/AutomaticTexPlugin_$pkgver.vba")
install=("$pkgname.install")
md5sums=('384d0fb7492beb1db9b526e4cb151a4f')


build() {
	cd "$srcdir"
	vim "AutomaticTexPlugin_$pkgver.vba" -c "silent! UseVimball ." -c "q"
}

package() {
	mkdir -p "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/autoload" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/colors" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/ftplugin" "$pkgdir/usr/share/vim/vimfiles"
	cp -r "$srcdir/syntax" "$pkgdir/usr/share/vim/vimfiles"
	# workaround for doc/tags
	cp -r "$srcdir/doc/" "$pkgdir/usr/share/vim/vimfiles"
	mv "$pkgdir/usr/share/vim/vimfiles/doc/tags" "$pkgdir/usr/share/vim/vimfiles/doc/atp-tags"
}
