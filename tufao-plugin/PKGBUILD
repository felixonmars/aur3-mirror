# Maintainer: Vinícius dos Santos Oliveira <vini.ipsmaker@gmail.com>
pkgname=tufao-plugin
pkgver=0.0.3
pkgrel=2
pkgdesc="A QtCreator plugin to work with Tufão."
arch=('i686' 'x86_64')
url="http://tufao.googlecode.com/"
license=('LGPL3')
depends=('qtcreator=2.5.0')
source=('http://get.qt.nokia.com/qtcreator/qt-creator-2.5.0-src.tar.gz'
        'http://tufao.googlecode.com/files/tufao-0.3-src.tar.bz2')
md5sums=('31e26cdd1e3eeb8c406382ebe886dcc5'
         'd2ace35a4d6f9e372e1536322cbd4223')

build() {
  if [ -z "$QTC_BUILD" ]; then
      if [ -z "$QTC_SOURCE" ]; then
          export QTC_SOURCE="$srcdir/qt-creator-2.5.0-src"
      fi
      cd "$QTC_SOURCE"

      mkdir -p build
      cd build
      qmake ../qtcreator.pro
      make

      export QTC_BUILD="$QTC_SOURCE/build"
  fi

  cd "$srcdir/tufao/tools/qtcreatorplugin"
  qmake
  make
}

package() {
  cd "${QTC_BUILD}/lib/qtcreator/plugins"
  mkdir -p "$pkgdir/usr/lib/qtcreator/plugins"
  cp -r TufaoTeam "$pkgdir/usr/lib/qtcreator/plugins"
}
