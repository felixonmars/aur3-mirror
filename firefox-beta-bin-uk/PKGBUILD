# Maintainer: Kovivchak Evgen <oneonfire@gmail.com>

pkgname=firefox-beta-bin-uk
_pkgreal=firefox-beta-bin
_pkgnome=firefox-beta
pkgver=17.0b4
pkgrel=1
_lang=uk
_srcurl=ftp://ftp.mozilla.org/pub/firefox/candidates
pkgdesc='Standalone web browser from mozilla.org! Latest beta with Ukrainian language'
url='http://www.mozilla.org/projects/firefox'
arch=('i686' 'x86_64')
depends=('dbus-glib' 'desktop-file-utils' 'libxt' 'mime-types' 'nss' 'shared-mime-info')
license=('MPL' 'GPL' 'LGPL')
provides=('firefox-16.0b6')

_source_x86=(${_srcurl}/${pkgver}-candidates/build1/linux-i686/${_lang}/firefox-${pkgver}.tar.bz2
	     ${_pkgnome}.desktop
	     ${_pkgnome}-safe.desktop)
_md5sums_x86=('9c7a261294b654f4c4aeedd3dc08a4e9'
	      '560e14d6cfb802255c6f2f71705201dc'
	      'fbd49e056293bc8b4acbda98da857a8f')

_source_x86_64=(${_srcurl}/${pkgver}-candidates/build1/linux-x86_64/${_lang}/firefox-${pkgver}.tar.bz2
	        ${_pkgnome}.desktop
	        ${_pkgnome}-safe.desktop)
_md5sums_x86_64=('7dda08087d0592de937439e664cda5b2'
	         '560e14d6cfb802255c6f2f71705201dc'
	         'fbd49e056293bc8b4acbda98da857a8f')

source=(${_source_x86[@]})
md5sums=(${_md5sums_x86[@]})

[ "$CARCH" = "x86_64" ] && source=(${_source_x86_64[@]}) && md5sums=(${_md5sums_x86_64[@]})

build() {
	cd $srcdir

	mkdir -p $pkgdir/{usr/{bin,share/{applications,pixmaps}},opt}
	cp -r firefox $pkgdir/opt/${_pkgreal}-$pkgver

	ln -s /opt/${_pkgreal}-$pkgver/firefox $pkgdir/usr/bin/${_pkgreal}
	install -m644 $srcdir/{$_pkgnome.desktop,$_pkgnome-safe.desktop} $pkgdir/usr/share/applications/
	install -m644 $srcdir/firefox/icons/mozicon128.png $pkgdir/usr/share/pixmaps/${_pkgreal}-icon.png
}
