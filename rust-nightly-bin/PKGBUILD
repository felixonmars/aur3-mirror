# Maintainer: Michael Sproul <micsproul@gmail.com>
pkgname=rust-nightly-bin
pkgver=0.12.0_pre_2014.09.13
pkgrel=1
arch=('i686' 'x86_64')
pkgdesc='A safe, concurrent, practical language from Mozilla.'
url='http://www.rust-lang.org/'
provides='rust'
conflicts=('rust' 'rust-git' 'rust-nightly')
depends=('shared-mime-info')
license=('MIT' 'Apache')
source=("http://static.rust-lang.org/dist/rust-nightly-${CARCH}-unknown-linux-gnu.tar.gz"
		'https://raw.githubusercontent.com/rust-lang/rust/master/src/etc/gedit/share/mime/packages/rust.xml')
sha256sums=('SKIP' 'SKIP')
install=rust.install
options=(staticlibs !strip)

package() {
	# Rust
	cd rust-nightly-${CARCH}-unknown-linux-gnu
	./install.sh --prefix=$pkgdir/usr

	# MIME type association
	mkdir -p "${pkgdir}/usr/share/mime/packages"
	install -m 644 "${srcdir}/rust.xml" "${pkgdir}/usr/share/mime/packages/rust.xml"
}
