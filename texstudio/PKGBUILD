# Maintainer: Cl√©ment DEMOULINS <clement@archivel.fr>

pkgname=texstudio
pkgver=2.3
pkgrel=6
pkgdesc="Fork of the LaTeX IDE TexMaker. Gives you an environment where you can easily create and manage LaTeX documents."
arch=('i686' 'x86_64')
url="http://texstudio.sourceforge.net/"
license=('GPL')
depends=('poppler-qt')
optdepends=('evince: pdf reader', 'okular: alternate pdf reader')
replaces=('texmakerx')
install=$pkgname.install

source=(http://downloads.sourceforge.net/project/texstudio/texstudio/TeXstudio%20${pkgver}/${pkgname}-${pkgver}.tar.gz gcc47.patch)
md5sums=('32cde0fe8398ec9b1d434c7ab6f70782'
         '43f48372347d79da11ff83f973e8683a')

build() {
    cd "$srcdir/$pkgname$pkgver"
    patch -p1 < ../gcc47.patch
    sed -i '/^Exec=texstudio$/ s/$/ %F/' utilities/texstudio.desktop
    qmake texstudio.pro
    make
}

package() {
    cd "$srcdir/$pkgname$pkgver"
    make INSTALL_ROOT="$pkgdir" install
}
