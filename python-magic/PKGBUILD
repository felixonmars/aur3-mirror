# Contributor: Vinay S Shastry <vinayshastry@gmail.com>
# Maintainer: David Keogh <davekeogh@shaw.ca>

pkgname=python-magic
pkgver=5.03
pkgrel=2
pkgdesc="Python bindings to allow you to access the libmagic api"
arch=('i686' 'x86_64')
url="http://darwinsys.com/file/"
license=('custom')
depends=('file' 'python')
source=(ftp://ftp.astron.com/pub/file/file-$pkgver.tar.gz)
md5sums=('d05f08a53e5c2f51f8ee6a4758c0cc53')

build() {
  cd $startdir/src/file-$pkgver/python
  sed -i 's#/usr/bin/python#/usr/bin/python2#' ../magic/Magdir/python

  python2 setup.py build
  mkdir -p $startdir/pkg/usr/lib/python2.7/lib-dynload
  cp build/lib.*/magic.so $startdir/pkg/usr/lib/python2.7/lib-dynload/
  install -D -m644 $startdir/src/file-$pkgver/COPYING $startdir/pkg/usr/share/licenses/$pkgname/COPYING
}
