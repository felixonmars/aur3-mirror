# Maintainer: Andre Wayand <archlinuxorg at awayand dot sleepmail dot com>
# Contributor: Branko Vukelic <bg.branko@gmail.com>

pkgname=gjiten
pkgver=2.6
pkgrel=4
pkgdesc="Japanese and kanji dictionary program for GNOME"
url="http://gjiten.sourceforge.net/"
license="GPL"
arch=('i686' 'x86_64')

depends=('gtk2' 'libgnome>=2.2.0' 'libgnomeui>=2.2.0' 'libglade>=2.0' 'gconf>=2.0')
makedepends=('lynx' 'xmlto' 'perlxml' 'docbook-xsl')
optdepends=('perl: install extra dictionaries'
'kanjipad: handwritten kanji lookup'
'scim-anthy: japanese input')

install=gjiten.install

source=(http://gjiten.sourceforge.net/$pkgname-$pkgver.tar.gz
 'http://gjiten.sourceforge.net/dictfiles/edict'
 'http://gjiten.sourceforge.net/dictfiles/kanjidic')
md5sums=('44a5d9640e37d8b0547f9c7e3d7ac67a'
 '56aef34061ede99977d87810524a8ab2'
 'd872fa6f0dbcbf901dad8bd8cb1066ef')
sha1sum=('034ce08e082ed21fc61bec97baf43589edb2e42f'
 'ea1b720b04f7ac2e41fc0686ae8537ea2c1cdac1'
 '0253b6ffd2494b89eb2e8343ed2afc9addf0f71c')

build() {
 cd $srcdir/$pkgname-$pkgver
 patch -uN dicfiles/getdics.pl ../../getdics-updurl.diff || return 1
 ./configure --prefix=/usr || return 1
 make || return 1
 make DESTDIR=$pkgdir install || return 1
 mkdir -p $pkgdir/usr/share/gjiten/dicfiles || return 1

 msg "Installing extra dictionary script"
 for file in dicfiles/*
 do
     install -Dm0644 $file $pkgdir/usr/share/gjiten/dicfiles/ || return 1
 done

 msg "Installing dictionaries"
 cd $srcdir
 install -Dm0644 edict $pkgdir/usr/share/gjiten/dics/edict || return 1
 install -m0644 kanjidic $pkgdir/usr/share/gjiten/dics/kanjidic || return 1
}
