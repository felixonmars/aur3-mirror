# Maintainer: Moritz LÃ¼decke <ritze@skweez.net>
# Contributor: boenki <boenki at gmx dot de>

pkgname=cover-thumbnailer
pkgver=0.8.2
pkgrel=2
pkgdesc="A Python script which displays music album covers in nautilus, preview of pictures which are in a folder and more."
url="http://software.flogisoft.com/cover-thumbnailer/en/"
license=('GPL3')
arch=('any')
depends=('python-imaging' 'python2-gconf')
makedepends=('gettext')
install=${pkgname}.install
source=(http://download.flogisoft.com/files/Software/Cover_thumbnailer/${pkgname}_${pkgver}_src.tar.gz
	cover-thumbnailer.thumbnailer)
md5sums=('192645103dba2b2dbcfc2e1b284f825b'
	 '449512e73548687b924c261d5f5d5fc8')

build() {
	cd $srcdir/${pkgname}_$pkgver
	sed -i "s|#!/usr/bin/python|#!/usr/bin/python2|g" ${pkgname}{,-gui}.py

	./install.sh -p $pkgdir
	mkdir ${pkgdir}/usr/share/thumbnailers
	cp ../cover-thumbnailer.thumbnailer "${pkgdir}/usr/share/thumbnailers"

	install -m755 -d "${pkgdir}/usr/share/gconf/schemas"
	gconf-merge-schema "${pkgdir}/usr/share/gconf/schemas/${pkgname}.schemas" --domain cover-thumbnailer ${pkgdir}/usr/share/${pkgname}/${pkgname}.schema
}
