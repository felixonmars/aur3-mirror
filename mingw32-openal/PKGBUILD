# Maintainer: Sven-Hendrik Haase <sh@lutzhaase.com>
# Contributor: Pierre Bourdon <delroth@gmail.com>

pkgname=mingw32-openal
pkgver=1.13
pkgrel=2
pkgdesc="OpenAL audio library for use with opengl (mingw32)"
arch=(any)
url="http://connect.creativelabs.com/openal/"
license=('GPL2')
makedepends=('mingw32-gcc' 'mingw32-w32api' 'mingw32-dx7-headers' 'cmake')
options=(!strip !buildflags)
source=(http://connect.creativelabs.com/openal/Downloads/openal-soft-${pkgver}.tbz2
        toolchain.cmake)
md5sums=('58b7d2809790c70681b825644c5f3614'
         '4ad924b32ec6b45f0e34ac39984859f3')

build() {
  cd $srcdir/openal-soft-$pkgver/build

  unset LDFLAGS

  cmake -DCMAKE_TOOLCHAIN_FILE=../../toolchain.cmake \
        -DCMAKE_INSTALL_PREFIX=/usr/i486-mingw32 ..
  make
}

package() {
  cd $srcdir/openal-soft-$pkgver/build

  make DESTDIR=${pkgdir} install
}
