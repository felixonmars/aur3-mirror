# Contributor: Matthew Bauer <mjbauer95@gmail.com>

os=linux
origpkgformat=tar
#origpkgformat=deb

pkgname=granola-gui
pkgver=3.0.1
#pkgver=3.0.3
pkgrel=1

pkgdesc="Granola makes computers more energy efficient without slowing them down. Granola is safe, easy to use, and allows your computer to operate as efficiently as possible without sacrificing performance when it's needed most. Help save the world with Granola. (GUI)"
arch=('any')
url="http://grano.la/"
license=('custom')
depends=('python>=2.6.0' 'granola')

if [ "$origpkgformat" = "deb" ]
then
  makedepends=('deb2targz')
else
  makedepends=()
fi
optdepends=()

if [ "$origpkgformat" = "deb" ]
then
  if [ $CARCH = i686 ]
  then
    origarch=i386
    md5sums=('46ec315760370ae4a71d7231da673c49')
  elif [ $CARCH = x86_64 ]
  then
    origarch=amd64
    md5sums=('0eef3cac5d9b7bb377cfe93f869a7a88')
  fi

  origpkgdistro=ubuntu
  #origpkgdistro=debian
  origpkgdistrover=lucid
  #origpkgdistrover=etch
  origpkgdistrostr=$origpkgdistro/$origpkgdistrover
  source=("https://download.miserware.com/$os/$origpkgformat/${origpkgdistrostr}/$origarch/${pkgname}_${pkgver}-0${origpkgdistrover}1_${origarch}.${origpkgformat}")
elif [ "$origpkgformat" = "tar" ]
then
  if [ $CARCH = i686 ]
  then
    origarch=i386
    md5sums=('9660defca50061f02b5e6f3e342d7bbc')
  elif [ $CARCH = x86_64 ]
  then
    origarch=x86_64
    md5sums=('ec8e1ba82ddb66348106c472ed0e5cdd')
  fi

  origpkgcompress=gz
  source=("https://download.miserware.com/$os/$origpkgformat/${origpkgdistro}$origarch/${pkgname}-${pkgver}-${origarch}.${origpkgformat}.${origpkgcompress}")
fi

build() {
  cd "$srcdir"

  if [ "$origpkgformat" = "deb" ]
  then
    deb2targz "${pkgname}_${pkgver}-0${origpkgdistrover}1_${origarch}.${origpkgformat}"
    mkdir deb
    cd "deb"
    tar xfz "../${pkgname}_${pkgver}-0${origpkgdistrover}1_${origarch}.tar.gz"
  else
    cd "$pkgname-$pkgver"

    python setup.py build
  fi
}

package() {
  if [ "$origpkgformat" = "deb" ]
  then
    cd $srcdir
    cp -r deb/* $pkgdir
  else
    cd "$srcdir/$pkgname-$pkgver"

    python setup.py install --prefix=/usr --root=$pkgdir
  fi
}

# vim:set ts=2 sw=2 et:
