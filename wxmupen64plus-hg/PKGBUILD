pkgname='wxmupen64plus-hg'
pkgver=326
pkgrel=2
pkgdesc='An experimental Mupen64Plus frontend written with wxWidgets'
url='https://bitbucket.org/auria/wxmupen64plus/'
depends=('mupen64plus-core-hg' 'wxgtk-2.9')
makedepends=('mercurial' 'waf')
arch=('i686' 'x86_64')
license=('GPL')
optdepends=('mupen64plus-video-rice-hg'
            'mupen64plus-audio-sdl-hg'
            'mupen64plus-input-sdl-hg'
            'mupen64plus-rsp-hle-hg')

_hgroot='http://bitbucket.org/auria'
_hgrepo='wxmupen64plus'

build()
{
	cd "${srcdir}/${_hgrepo}"

	waf --mupenapi=/usr/include/mupen64plus --wxconfig=/usr/bin/wx-config-2.9 --prefix=${pkgdir}/usr configure || return 1
	waf || return 1
	waf install || return 1

	install -D "${pkgdir}/usr/share/wxmupen64plus/mupenicon_large.png" "${pkgdir}/usr/local/share/wxmupen64plus/mupenicon_large.png"

	install -Dm644 freedesktop/wxMupen64Plus.desktop "${pkgdir}/usr/share/applications/wxmupen64plus.desktop"

	mkdir -p "${pkgdir}/usr/lib"
	ln -s /usr/lib/mupen64plus "${pkgdir}/usr/lib/wxmupen64plus"
}
