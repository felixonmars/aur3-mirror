# Maintainer: Serge Zirukin <ftrvxmtrx@gmail.com>
# Contributor: Sergei Lebedev <superbobry@gmail.com>

pkgname=ocaml-mascot
pkgver=1.0
_pkgver="$pkgver-beta"
pkgrel=2
pkgdesc="Style checker for OCaml sources"
arch=("i686" "x86_64")
url="http://mascot.x9c.fr"
license=('GPL')
depends=('ocaml>=3.12.1')
makedepends=('ocaml-findlib')
options=("!strip !makeflags")
source=("http://mascot.x9c.fr/distrib/mascot-$_pkgver.tar.gz")
md5sums=('d24b8cadb46b18ee9f0ab0c391252a88')
install=ocaml-mascot.install


build() {
  cd "$srcdir/${pkgname/ocaml-/}-$_pkgver"
  sh configure -ocaml-prefix /usr
  make all
}

package() {
  cd "$srcdir/${pkgname/ocaml-/}-$_pkgver"
  export OCAMLFIND_DESTDIR="$pkgdir$(ocamlfind printconf destdir)"
  install -dm 755 "$OCAMLFIND_DESTDIR"
  make install
}
